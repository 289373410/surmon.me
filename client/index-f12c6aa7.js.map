{"version":3,"file":"index-f12c6aa7.js","sources":["../../vite/modulepreload-polyfill","../../src/config/app.config.ts","../../src/universal/context.ts","../../src/app/environment.ts","../../src/language/key.ts","../../src/language/data.ts","../../src/environment.ts","../../src/config/api.config.ts","../../src/constants/error.ts","../../src/services/layout.ts","../../src/transforms/validate.ts","../../src/utils/scroller.ts","../../src/utils/effects.ts","../../src/transforms/ua.ts","../../src/universal/ref.ts","../../src/universal/prefetch.ts","../../src/universal/index.ts","../../src/app/state.ts","../../src/services/i18n.ts","../../src/services/meta.ts","../../src/services/storage.ts","../../src/services/theme.ts","../../src/services/defer.ts","../../plugin-vue:export-helper","../../src/services/loading/progress.vue","../../src/services/loading/index.ts","../../src/transforms/outside.ts","../../src/utils/script-loader.ts","../../src/services/gtag.ts","../../src/services/popup/constant.ts","../../src/services/popup/hook.ts","../../src/services/nodepress.ts","../../src/store/meta.ts","../../src/app/enhancer.ts","../../src/constants/state.ts","../../src/constants/anchor.ts","../../src/services/lozad.ts","../../src/services/highlight.ts","../../src/transforms/relink.ts","../../src/transforms/markdown.ts","../../src/utils/fetch-delay.ts","../../src/store/article.ts","../../src/store/announcement.ts","../../src/services/swiper.ts","../../src/transforms/thumbnail.ts","../../src/components/archive/carrousel.vue","../../src/transforms/moment.ts","../../src/components/archive/announcement.vue","../../src/constants/storage.ts","../../src/transforms/state.ts","../../src/components/archive/item.vue","../../src/components/archive/list.vue","../../src/pages/index.vue","../../src/store/archive.ts","../../src/transforms/text.ts","../../src/components/common/banner.vue","../../src/pages/archive.vue","../../src/store/comment.ts","../../src/pages/article/content.vue","../../src/components/common/uadsense.vue","../../src/pages/article/mammon.vue","../../src/constants/gtag.ts","../../src/utils/clipboard.ts","../../src/components/widget/share.vue","../../src/pages/article/share.vue","../../src/pages/article/meta.vue","../../src/pages/article/related.vue","../../src/constants/regex.ts","../../src/utils/editable.ts","../../src/components/comment/helper.ts","../../src/components/comment/topbar.vue","../../src/components/comment/main.vue","../../src/components/comment/list/link.vue","../../src/components/comment/list/ua.vue","../../src/components/comment/list/item.vue","../../src/components/comment/list/index.vue","../../src/components/comment/loadmore.vue","../../src/components/comment/publisher.vue","../../src/components/comment/pen.vue","../../src/components/comment/index.vue","../../src/pages/article/index.vue","../../src/store/category.ts","../../src/components/archive/header.vue","../../src/pages/category.vue","../../src/store/tag.ts","../../src/pages/tag.vue","../../src/pages/date.vue","../../src/pages/search.vue","../../src/constants/tunnel.ts","../../src/config/bff.config.ts","../../src/services/tunnel.ts","../../src/services/music.ts","../../src/pages/music.vue","../../src/store/lens.ts","../../src/utils/random.ts","../../src/pages/lens.vue","../../src/pages/job.vue","../../src/pages/about.vue","../../src/pages/merch/list.vue","../../src/pages/merch/index.vue","../../src/pages/freelancer.vue","../../src/pages/guestbook.vue","../../src/pages/app.vue","../../src/app/router.ts","../../src/transforms/route.ts","../../src/transforms/url.ts","../../src/services/amplitude.ts","../../src/services/adsense.ts","../../src/services/popup/root.vue","../../src/services/popup/popup.ts","../../src/services/popup/image.ts","../../src/services/popup/index.ts","../../src/services/slogan.ts","../../src/services/copyright.ts","../../src/services/baidu-seo-push.ts","../../src/utils/text-2-image.ts","../../src/services/titler.ts","../../src/services/emoji-23333.ts","../../src/services/sticky.ts","../../src/services/exporter.ts","../../src/store/index.ts","../../src/components/common/ulink.ts","../../src/components/common/uimage.ts","../../src/components/common/empty.vue","../../src/components/common/spin.vue","../../src/components/common/placeholder.ts","../../src/components/common/skeleton/base.vue","../../src/components/common/skeleton/line.vue","../../src/components/common/skeleton/paragraph.vue","../../src/components/common/responsive.ts","../../src/components/common/client-only.ts","../../src/services/interior.ts","../../src/components/root/error.vue","../../src/components/root/captured.vue","../../src/components/layout/pc/menu.ts","../../src/components/layout/pc/nav.vue","../../src/components/layout/pc/aside/search.vue","../../src/components/layout/pc/aside/article.vue","../../src/components/layout/pc/aside/mammon.vue","../../src/components/layout/pc/aside/tag.vue","../../src/components/layout/pc/aside/nav.vue","../../src/components/widget/calendar.vue","../../src/components/layout/pc/aside/index.vue","../../src/components/layout/pc/header.vue","../../src/components/layout/pc/footer.vue","../../src/components/widget/wallflower/flower.vue","../../src/components/widget/wallflower/garden.vue","../../src/store/wallpaper.ts","../../src/components/widget/wallpaper/wall.vue","../../src/components/widget/wallpaper/main.vue","../../src/components/widget/background.vue","../../src/components/widget/player.vue","../../src/components/widget/toolbox.vue","../../src/components/layout/pc/main.vue","../../src/components/layout/mobile/header.vue","../../src/components/layout/mobile/footer.vue","../../src/components/layout/mobile/aside.vue","../../src/components/layout/mobile/main.vue","../../src/components/widget/emoji-rain.vue","../../src/app/index.vue","../../src/app/main.ts","../../src/csr.ts"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","/**\n * @file App config\n * @module config.app\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const DEFAULT_FETCH_DELAY = 468\nexport const PRIMARY_COLOR = '#0088f5'\nexport const MUSIC_ALBUM_ID = '638949385'\nexport const BILIBILI_UID = '27940710'\nexport const GITHUB_UID = 'surmon-china'\nexport const GA_MEASUREMENT_ID = 'UA-84887611-3'\nexport const ADSENSE_CLIENT_ID = 'ca-pub-4710915636313788'\n\nexport const META = Object.freeze({\n  title: 'Surmon.me',\n  keywords: 'Surmon 博客,surmon-china,苏尔蒙,Vue 博客,前端技术开发博客,JavaScript 技术',\n  description: '来苏之望',\n  domain: 'surmon.me',\n  url: 'https://surmon.me',\n  author: 'Surmon',\n  email: 'i@surmon.me'\n})\n\nexport const FRIEND_LINKS = Object.freeze({\n  JimmyLv: '//blog.jimmylv.info'\n  // SkyRover: '//skyrover.me',\n  // Jooger: '//jooger.me'\n})\n\nexport const VALUABLE_LINKS = Object.freeze({\n  RSS: '/rss.xml',\n  SITE_MAP: '/sitemap.xml',\n  SPONSOR: '/sponsor',\n\n  SURMON_ME: 'https://github.com/surmon-china/surmon.me',\n  GITHUB_BLOG_LIST: 'https://github.com/stars/surmon-china/lists/surmon-me',\n  VUNIVERSAL: 'https://github.com/surmon-china/vuniversal',\n  NODEPRESS: 'https://github.com/surmon-china/nodepress',\n  SURMON_ME_NATIVE: 'https://github.com/surmon-china/surmon.me.native',\n  APP_APK_FILE:\n    'https://raw.githubusercontent.com/surmon-china/surmon.me.native/master/dist/android/surmon.me.apk',\n\n  THROW_ERROR: 'https://throwerror.io',\n  FOX_FINDER: 'https://foxfinder.io',\n  GITHUB: 'https://github.com/surmon-china',\n  GITHUB_SPONSORS: 'https://github.com/sponsors/surmon-china',\n  PAYPAL: 'https://www.paypal.me/surmon',\n  UPWORK: 'https://www.upwork.com/freelancers/~0142e621258ac1770d',\n  FUCK_IPC: 'http://www.beian.miit.gov.cn',\n\n  GOOGLE_LIVE_MAP: 'https://www.google.com/maps/d/embed?mid=1sRx6t0Yj1TutbwORCvjwTMgr70r62Z6w',\n  QQ_GROUP:\n    'https://shang.qq.com/wpa/qunwpa?idkey=837dc31ccbcd49feeba19430562be7bdc06f4428880f78a391fd61c8af714ce4',\n  TELEGRAM: 'https://t.me/surmon',\n  TELEGRAM_GROUP: 'https://t.me/joinchat/F6wOlxYwSCUpZTYj3WTAWA',\n  SPOTIFY: 'https://open.spotify.com/user/v0kz9hpwpbqnmtnrfhbyl812o',\n  MUSIC_163: 'https://music.163.com/#/playlist?id=638949385',\n  YOUTUBE: 'https://www.youtube.com/channel/UCoL-j6T28PLSJ2U6ZdONS0w',\n  DOUBAN: 'https://www.douban.com/people/nocower',\n  ZHIHU: 'https://www.zhihu.com/people/surmon',\n  WEIBO: 'https://weibo.com/surmon',\n  QUORA: 'https://www.quora.com/profile/Surmon',\n  BILIBILI: 'https://space.bilibili.com/27940710',\n  STACK_OVERFLOW: 'https://stackoverflow.com/users/6222535/surmon?tab=profile',\n  LEETCODE_CN: 'https://leetcode-cn.com/u/surmon',\n  LINKEDIN: 'https://www.linkedin.com/in/surmon',\n  INSTAGRAM: 'https://www.instagram.com/surmon666',\n  TWITTER: 'https://twitter.com/surmon_me'\n})\n","/**\n * @file App universal context\n * @module universal.context\n * @author Surmon <https://github.com/surmon-china>\n */\n\n// https://github.com/nuxt/framework/blob/main/packages/nitro/src/runtime/app/render.ts\nimport { watchEffect } from 'vue'\nimport { isClient, isServer } from '/@/app/environment'\n\n// Symble\nconst SSR_SYMBLE_KEY = '__SSR__'\nexport const renderSSRSymbleScript = () => {\n  return `<script>window.${SSR_SYMBLE_KEY} = true</script>`\n}\nexport const getSSRSymbleStatus = () => Boolean((window as any)[SSR_SYMBLE_KEY])\n\n// Context\nconst SSR_CONTEXT_KEY = '__INITIAL_SSR_CONTEXT__'\nexport const renderSSRContextScript = (data: string) => {\n  return `<script>window.${SSR_CONTEXT_KEY} = ${data}</script>`\n}\nexport const getSSRContextData = (): Partial<SSRContext> | null => {\n  return (window as any)[SSR_CONTEXT_KEY] || null\n}\n\nexport interface SSRContext {\n  store: any\n  refs: any\n  url: string\n  [key: string]: any\n}\n\n// ssr context\nlet ssrContext: Partial<SSRContext> = {}\nexport const setSSRContext = (key: keyof SSRContext, value: any) => {\n  ssrContext[key] = value ? JSON.parse(JSON.stringify(value)) : value\n}\nexport const getSSRContext = (key: keyof SSRContext) => {\n  return isClient ? getSSRContextData()?.[key] : ssrContext[key]\n}\n\n// for app\nexport function rebirthSSRContext(app: any) {\n  ssrContext = Object.assign({}, {})\n  app.config.globalProperties.$ssrContext = ssrContext\n  return ssrContext\n}\nexport function getSSRContextByApp(app: any) {\n  return app.config.globalProperties.$ssrContext || ssrContext\n}\n\n/**\n * Allows full control of the hydration cycle to set and receive data from the server.\n *\n * @param key a unique key to identify the data in the Nuxt payload\n * @param get a function that returns the value to set the initial data\n * @param set a function that will receive the data on the client-side\n * @link https://github.com/nuxt/framework/blob/main/packages/nuxt3/src/app/composables/hydrate.ts\n * @example\n    useHydration(\n      'store',\n      () => pinia.state.value,\n      (storeState) => (pinia.state.value = storeState)\n    )\n */\n// MARK: memory leak\nexport const useHydration = <T>(key: keyof SSRContext, get: () => T, set: (value: T) => void) => {\n  if (isServer) {\n    watchEffect(() => {\n      setSSRContext(key, get())\n    })\n  }\n  if (isClient) {\n    set(getSSRContext(key))\n  }\n}\n","/**\n * @file App environment\n * @module app.environment\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { getSSRSymbleStatus } from '/@/universal/context'\n\n// app mode\nexport const isSSR = typeof window === 'undefined' || getSSRSymbleStatus()\nexport const isSPA = !isSSR\n\n// runtime env\nexport const isServer = import.meta.env.SSR\nexport const isClient = !isServer\n","/**\n * @file I18n keys\n * @module i18n.key\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport enum LANGUAGE_KEYS {\n  PAGE_HOME = 'home',\n  CATEGORY_INSIGHT = 'insight',\n  CATEGORY_CODE = 'code',\n  PAGE_GITHUB = 'github',\n  PAGE_LENS = 'lens',\n  PAGE_INSTAGRAM = 'instagram',\n  PAGE_MUSIC = 'music',\n  PAGE_JOB = 'job',\n  PAGE_MERCH = 'merch',\n  PAGE_ABOUT = 'about',\n  PAGE_FREELANCER = 'freelancer',\n  PAGE_GUESTBOOK = 'guestbook',\n  PAGE_APP = 'app',\n  PAGE_ARCHIVE = 'archive',\n  SITE_MAP_XML = 'sitemap xml',\n  EMPTY_PLACEHOLDER = `common empty's placeholder`,\n  NOT_FOUND = 'notFound',\n  BACK_TO_HOME_PAGE = 'back to home page',\n  GUESTBOOK_SLOGAN = 'guestbook banner slogan',\n  WALLPAPER = 'wallpaper',\n  PAGE_FREELANCER_SLOGAN = 'service page banner slogan',\n  PAGE_FREELANCER_EMAIL_ME = 'email me',\n  PAGE_FREELANCER_HIRE_ME = 'hire me',\n  DEVICE_ANDROID = 'android',\n  DEVICE_IOS = 'ios',\n  AD = 'ad',\n  WEBCAM = 'webcam',\n  BARRAGE = 'barrage',\n  FEEDBACK = 'feedback',\n  TO_TOP = 'to page top',\n  TO_BOTTOM = 'to page bottom',\n  ORIGIN_ORIGINAL = 'original',\n  ORIGIN_REPRINT = 'reprint',\n  ORIGIN_HYBRID = 'hybrid',\n  ACTION_OPEN_DESC = 'open article description',\n  ACTION_CLOSE_DESC = 'close article description',\n  ACTION_ON = 'on',\n  ACTION_OFF = 'off',\n  APP_SLOGAN = 'app slogan',\n  MUSIC_PLACEHOLDER = 'music page placeholder',\n  SEARCH_PLACEHOLDER = 'search input placeholder',\n  HOT_ARTICLE_LIST_TITLE = 'hot article list title',\n  PAGE_TITLE = 'page title',\n  ANNOUNCEMENT_PLACEHOLDER = 'announcement empty placeholder',\n  CATEGORY_PLACEHOLDER = 'category empty placeholder',\n  TAG_PLACEHOLDER = 'tag placeholder',\n  ARTICLE_TITLE = 'article title',\n  ARTICLE_PLACEHOLDER = 'article empty placeholder',\n  ARTICLE_FULL_COL_READ = 'read by fullCol',\n  ARTICLE_FULL_SCREEN_READ = 'read by fullScreen',\n  ARTICLE_READ_ALL = 'read all article content',\n  ARTICLE_RENDERING = 'rendering',\n  ARTICLE_LIST_LOADMORE = 'loadmore',\n  ARTICLE_LIST_LOADING = 'loading',\n  ARTICLE_LIST_NO_MORE = 'no more',\n  COMMENT_LIST_PLACEHOLDER = 'comment list placeholder',\n  COMMENT_ANONYMOUS = 'anonymous',\n  COMMENT_LIKE = 'like comment',\n  COMMENT_REPLY = 'reply comment',\n  COMMENT_PAGINATION_OLD = 'get old comments',\n  COMMENT_PAGINATION_NEW = 'get new comments',\n  COMMENT_PAGINATION_HOT = 'get hot comments',\n  COMMENT_PAGINATION_COOL = 'get cool comments',\n  COMMENT_LOADMORE = 'loadmore comments',\n  COMMENT_POST_NAME = `comment's author name`,\n  COMMENT_POST_EMAIL = `comment's author email`,\n  COMMENT_POST_SITE = `comment's author site url`,\n  COMMENT_POST_CONTENT = `comment's content`,\n  COMMENT_POST_PLACEHOLDER = `comment box placeholder`,\n  COMMENT_POST_SUBMIT = `submit comment`,\n  COMMENT_POST_SUBMITTING = `comment submitting`,\n  COMMENT_POST_ERROR_EMAIL = `comment submit failed of email error`,\n  COMMENT_POST_ERROR_URL = `comment submit failed of site url error`,\n  COMMENT_POST_ERROR_CONTENT = `comment submit failed of content error`,\n  COMMENT_POST_ERROR_SUBMIT = `comment submit failed of submit error`,\n  COMMENT_POST_ERROR_ACTION = `comment submit failed of other error`,\n  COMMENT_ACCOUNT_SETTING = `comment account setting`,\n  COMMENT_ACCOUNT_EDIT = 'edit comment account',\n  COMMENT_ACCOUNT_CLEAR = 'clear comment account',\n  COMMENT_LIST_COUNT = 'comments',\n  COMMENT_LIKE_COUNT = 'likes',\n  QUERY_PARAMS_ERROR = 'query params error'\n}\n","/**\n * @file I18n config\n * @module i18n.config\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { I18nLanguage, I18nMap } from '/@/services/i18n'\nimport { LANGUAGE_KEYS } from './key'\n\nexport enum Language {\n  En = 'en',\n  Zh = 'zh'\n}\n\nexport const languages: I18nLanguage[] = [\n  {\n    code: Language.Zh,\n    iso: 'zh-CN',\n    name: '简体中文'\n  },\n  {\n    code: Language.En,\n    iso: 'en-US',\n    name: 'English'\n  }\n]\n\nexport const langMap: I18nMap<LANGUAGE_KEYS, Language> = {\n  [LANGUAGE_KEYS.PAGE_HOME]: {\n    [Language.Zh]: '明殿',\n    [Language.En]: 'home'\n  },\n  [LANGUAGE_KEYS.CATEGORY_INSIGHT]: {\n    [Language.Zh]: '无色庵',\n    [Language.En]: 'insight'\n  },\n  [LANGUAGE_KEYS.CATEGORY_CODE]: {\n    [Language.Zh]: '宁静寺',\n    [Language.En]: 'code'\n  },\n  [LANGUAGE_KEYS.PAGE_GITHUB]: {\n    [Language.Zh]: '丹青阁',\n    [Language.En]: 'github'\n  },\n  [LANGUAGE_KEYS.PAGE_LENS]: {\n    [Language.Zh]: '天涯',\n    [Language.En]: 'lens'\n  },\n  [LANGUAGE_KEYS.PAGE_INSTAGRAM]: {\n    [Language.Zh]: '海角',\n    [Language.En]: 'instagram'\n  },\n  [LANGUAGE_KEYS.PAGE_MUSIC]: {\n    [Language.Zh]: '梨园',\n    [Language.En]: 'music'\n  },\n  [LANGUAGE_KEYS.PAGE_JOB]: {\n    [Language.Zh]: '伯乐',\n    [Language.En]: 'job'\n  },\n  [LANGUAGE_KEYS.PAGE_ABOUT]: {\n    [Language.Zh]: '狂浪生',\n    [Language.En]: 'about'\n  },\n  [LANGUAGE_KEYS.PAGE_MERCH]: {\n    [Language.Zh]: '周边',\n    [Language.En]: 'merch'\n  },\n  [LANGUAGE_KEYS.PAGE_FREELANCER]: {\n    [Language.Zh]: '得道',\n    [Language.En]: 'freelancer'\n  },\n  [LANGUAGE_KEYS.PAGE_GUESTBOOK]: {\n    [Language.Zh]: '四方馆',\n    [Language.En]: 'guestbook'\n  },\n  [LANGUAGE_KEYS.PAGE_APP]: {\n    [Language.Zh]: '客户端',\n    [Language.En]: 'app'\n  },\n  [LANGUAGE_KEYS.PAGE_ARCHIVE]: {\n    [Language.Zh]: '黄卷青灯',\n    [Language.En]: 'archive'\n  },\n  [LANGUAGE_KEYS.SITE_MAP_XML]: {\n    [Language.Zh]: '旷日积晷',\n    [Language.En]: 'sitemap.xml'\n  },\n  [LANGUAGE_KEYS.EMPTY_PLACEHOLDER]: {\n    [Language.Zh]: '空空如也',\n    [Language.En]: 'No data'\n  },\n  [LANGUAGE_KEYS.NOT_FOUND]: {\n    [Language.Zh]: '众里寻他 我已不再',\n    [Language.En]: 'Arrives here at last'\n  },\n  [LANGUAGE_KEYS.BACK_TO_HOME_PAGE]: {\n    [Language.Zh]: '山河万里 长歌归故',\n    [Language.En]: 'Drive by'\n  },\n  [LANGUAGE_KEYS.GUESTBOOK_SLOGAN]: {\n    [Language.Zh]: '此心光明 亦复何言',\n    [Language.En]: 'You have come a long way'\n  },\n  [LANGUAGE_KEYS.WALLPAPER]: {\n    [Language.Zh]: '山河入梦',\n    [Language.En]: 'Gallery'\n  },\n  [LANGUAGE_KEYS.PAGE_FREELANCER_SLOGAN]: {\n    [Language.Zh]: '为我一挥手，如临万壑松',\n    [Language.En]: 'Talk is cheap. Show me the code'\n  },\n  [LANGUAGE_KEYS.PAGE_FREELANCER_EMAIL_ME]: {\n    [Language.Zh]: '放码过来',\n    [Language.En]: 'Email ME'\n  },\n  [LANGUAGE_KEYS.PAGE_FREELANCER_HIRE_ME]: {\n    [Language.Zh]: '或在 Upwork 雇佣我',\n    [Language.En]: 'Hire me on upwork.com'\n  },\n  [LANGUAGE_KEYS.DEVICE_ANDROID]: {\n    [Language.Zh]: 'Android',\n    [Language.En]: 'Android'\n  },\n  [LANGUAGE_KEYS.DEVICE_IOS]: {\n    [Language.Zh]: 'IOS',\n    [Language.En]: 'IOS'\n  },\n  [LANGUAGE_KEYS.AD]: {\n    [Language.Zh]: '广而告之',\n    [Language.En]: 'AD'\n  },\n  [LANGUAGE_KEYS.WEBCAM]: {\n    [Language.Zh]: '见相',\n    [Language.En]: 'Webcam'\n  },\n  [LANGUAGE_KEYS.BARRAGE]: {\n    [Language.Zh]: '畅言',\n    [Language.En]: 'Barrage'\n  },\n  [LANGUAGE_KEYS.FEEDBACK]: {\n    [Language.Zh]: '反馈',\n    [Language.En]: 'Feedback'\n  },\n  [LANGUAGE_KEYS.TO_TOP]: {\n    [Language.Zh]: '从头开始',\n    [Language.En]: 'To top'\n  },\n  [LANGUAGE_KEYS.TO_BOTTOM]: {\n    [Language.Zh]: '再来一屏',\n    [Language.En]: 'Next screen'\n  },\n  [LANGUAGE_KEYS.ORIGIN_ORIGINAL]: {\n    [Language.Zh]: '原创',\n    [Language.En]: 'og'\n  },\n  [LANGUAGE_KEYS.ORIGIN_REPRINT]: {\n    [Language.Zh]: '转载',\n    [Language.En]: 'rp'\n  },\n  [LANGUAGE_KEYS.ORIGIN_HYBRID]: {\n    [Language.Zh]: '混撰',\n    [Language.En]: 'hb'\n  },\n  [LANGUAGE_KEYS.ACTION_OPEN_DESC]: {\n    [Language.Zh]: '展开描述',\n    [Language.En]: 'open description'\n  },\n  [LANGUAGE_KEYS.ACTION_CLOSE_DESC]: {\n    [Language.Zh]: '收起描述',\n    [Language.En]: 'close description'\n  },\n  [LANGUAGE_KEYS.ACTION_ON]: {\n    [Language.Zh]: '开',\n    [Language.En]: 'on'\n  },\n  [LANGUAGE_KEYS.ACTION_OFF]: {\n    [Language.Zh]: '关',\n    [Language.En]: 'off'\n  },\n  [LANGUAGE_KEYS.APP_SLOGAN]: {\n    [Language.Zh]: '来苏之望',\n    [Language.En]: 'Because the mountain was there'\n  },\n  [LANGUAGE_KEYS.MUSIC_PLACEHOLDER]: {\n    [Language.Zh]: '五音六律，七弦八度',\n    [Language.En]: 'The music, the soul of man'\n  },\n  [LANGUAGE_KEYS.SEARCH_PLACEHOLDER]: {\n    [Language.Zh]: '探索与觉知',\n    [Language.En]: 'Search..'\n  },\n  [LANGUAGE_KEYS.PAGE_TITLE]: {\n    [Language.Zh]: '黄卷青灯',\n    [Language.En]: 'pages'\n  },\n  [LANGUAGE_KEYS.ANNOUNCEMENT_PLACEHOLDER]: {\n    [Language.Zh]: '空空如也',\n    [Language.En]: 'No announcements'\n  },\n  [LANGUAGE_KEYS.CATEGORY_PLACEHOLDER]: {\n    [Language.Zh]: '未分类',\n    [Language.En]: 'no cate'\n  },\n  [LANGUAGE_KEYS.TAG_PLACEHOLDER]: {\n    [Language.Zh]: '无标签',\n    [Language.En]: 'No tags'\n  },\n  [LANGUAGE_KEYS.ARTICLE_TITLE]: {\n    [Language.Zh]: '文不加点',\n    [Language.En]: 'Articles'\n  },\n  [LANGUAGE_KEYS.ARTICLE_PLACEHOLDER]: {\n    [Language.Zh]: '空空如也',\n    [Language.En]: 'No articles'\n  },\n  [LANGUAGE_KEYS.ARTICLE_FULL_COL_READ]: {\n    [Language.Zh]: '通栏阅读',\n    [Language.En]: 'Full Column'\n  },\n  [LANGUAGE_KEYS.ARTICLE_FULL_SCREEN_READ]: {\n    [Language.Zh]: '全屏阅读',\n    [Language.En]: 'Full Screen'\n  },\n  [LANGUAGE_KEYS.ARTICLE_READ_ALL]: {\n    [Language.Zh]: '阅读余下全文',\n    [Language.En]: 'Read all'\n  },\n  [LANGUAGE_KEYS.ARTICLE_RENDERING]: {\n    [Language.Zh]: '渲染中..',\n    [Language.En]: 'rendering...'\n  },\n  [LANGUAGE_KEYS.HOT_ARTICLE_LIST_TITLE]: {\n    [Language.Zh]: '群贤毕至',\n    [Language.En]: 'hot'\n  },\n  [LANGUAGE_KEYS.ARTICLE_LIST_LOADMORE]: {\n    [Language.Zh]: '山河入梦',\n    [Language.En]: 'loadmore'\n  },\n  [LANGUAGE_KEYS.ARTICLE_LIST_LOADING]: {\n    [Language.Zh]: '人面桃花',\n    [Language.En]: 'loading'\n  },\n  [LANGUAGE_KEYS.ARTICLE_LIST_NO_MORE]: {\n    [Language.Zh]: '春尽江南',\n    [Language.En]: 'no more'\n  },\n  [LANGUAGE_KEYS.COMMENT_LIST_PLACEHOLDER]: {\n    [Language.Zh]: '期待你的捷足先登',\n    [Language.En]: 'Hit the nail on the head'\n  },\n  [LANGUAGE_KEYS.COMMENT_ANONYMOUS]: {\n    [Language.Zh]: '匿名用户',\n    [Language.En]: 'anonymous'\n  },\n  [LANGUAGE_KEYS.COMMENT_LIKE]: {\n    [Language.Zh]: '赞',\n    [Language.En]: 'like'\n  },\n  [LANGUAGE_KEYS.COMMENT_REPLY]: {\n    [Language.Zh]: '回复',\n    [Language.En]: 'reply'\n  },\n  [LANGUAGE_KEYS.COMMENT_PAGINATION_OLD]: {\n    [Language.Zh]: '最旧',\n    [Language.En]: 'old'\n  },\n  [LANGUAGE_KEYS.COMMENT_PAGINATION_NEW]: {\n    [Language.Zh]: '最新',\n    [Language.En]: 'new'\n  },\n  [LANGUAGE_KEYS.COMMENT_PAGINATION_HOT]: {\n    [Language.Zh]: '最热',\n    [Language.En]: 'hot'\n  },\n  [LANGUAGE_KEYS.COMMENT_PAGINATION_COOL]: {\n    [Language.Zh]: '最冷',\n    [Language.En]: 'cool'\n  },\n  [LANGUAGE_KEYS.COMMENT_LOADMORE]: {\n    [Language.Zh]: '加载更多评论',\n    [Language.En]: 'loadmore comments'\n  },\n  [LANGUAGE_KEYS.COMMENT_POST_NAME]: {\n    [Language.Zh]: '名字',\n    [Language.En]: 'name'\n  },\n  [LANGUAGE_KEYS.COMMENT_POST_EMAIL]: {\n    [Language.Zh]: '邮箱',\n    [Language.En]: 'email'\n  },\n  [LANGUAGE_KEYS.COMMENT_POST_SITE]: {\n    [Language.Zh]: '网址',\n    [Language.En]: 'site'\n  },\n  [LANGUAGE_KEYS.COMMENT_POST_CONTENT]: {\n    [Language.Zh]: '内容',\n    [Language.En]: 'content'\n  },\n  [LANGUAGE_KEYS.COMMENT_POST_PLACEHOLDER]: {\n    [Language.Zh]: '愿你的见解一针见血',\n    [Language.En]: 'Hit the nail on the head'\n  },\n  [LANGUAGE_KEYS.COMMENT_POST_SUBMIT]: {\n    [Language.Zh]: '发射',\n    [Language.En]: 'publish'\n  },\n  [LANGUAGE_KEYS.COMMENT_POST_SUBMITTING]: {\n    [Language.Zh]: '发射中..',\n    [Language.En]: 'publishing'\n  },\n  [LANGUAGE_KEYS.COMMENT_POST_ERROR_EMAIL]: {\n    [Language.Zh]: '邮箱不合法',\n    [Language.En]: 'Email address is not legitimate!'\n  },\n  [LANGUAGE_KEYS.COMMENT_POST_ERROR_URL]: {\n    [Language.Zh]: '网址不合法',\n    [Language.En]: 'Site is not legitimate!'\n  },\n  [LANGUAGE_KEYS.COMMENT_POST_ERROR_CONTENT]: {\n    [Language.Zh]: '内容需要在 2000字/36行 以内',\n    [Language.En]: 'Content requirements are within 2000 words / 36 lines!'\n  },\n  [LANGUAGE_KEYS.COMMENT_POST_ERROR_SUBMIT]: {\n    [Language.Zh]: '发布失败，原因 -> 控制台',\n    [Language.En]: 'Submit failed, get err in dev console!'\n  },\n  [LANGUAGE_KEYS.COMMENT_POST_ERROR_ACTION]: {\n    [Language.Zh]: '操作失败，原因 -> 控制台',\n    [Language.En]: 'Action failed, get error in dev console!'\n  },\n  [LANGUAGE_KEYS.COMMENT_ACCOUNT_SETTING]: {\n    [Language.Zh]: '设置账户信息',\n    [Language.En]: 'account setting'\n  },\n  [LANGUAGE_KEYS.COMMENT_ACCOUNT_EDIT]: {\n    [Language.Zh]: '编辑信息',\n    [Language.En]: 'edit profile'\n  },\n  [LANGUAGE_KEYS.COMMENT_ACCOUNT_CLEAR]: {\n    [Language.Zh]: '清空信息',\n    [Language.En]: 'clear profile'\n  },\n  [LANGUAGE_KEYS.COMMENT_LIST_COUNT]: {\n    [Language.Zh]: '条看法',\n    [Language.En]: 'comments'\n  },\n  [LANGUAGE_KEYS.COMMENT_LIKE_COUNT]: {\n    [Language.Zh]: '人觉得有点牛逼',\n    [Language.En]: 'likes'\n  },\n  [LANGUAGE_KEYS.QUERY_PARAMS_ERROR]: {\n    [Language.Zh]: '请求参数错误：',\n    [Language.En]: 'Invalid query params: '\n  }\n}\n","/**\n * @file Dev environment\n * @module environment\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport enum NodeEnv {\n  Development = 'development',\n  Production = 'production',\n  Test = 'test'\n}\n\nexport const NODE_ENV = process.env.NODE_ENV as NodeEnv\nexport const isDev = process.env.NODE_ENV === NodeEnv.Development\nexport const isProd = process.env.NODE_ENV === NodeEnv.Production\nexport const isTest = process.env.NODE_ENV === NodeEnv.Test\n","/**\n * @file Api config\n * @module config.api\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { isDev } from '/@/environment'\nimport { isSPA, isServer } from '/@/app/environment'\n\n// common\nconst API_PROXY_URL = import.meta.env.VITE_API_PROXY_URL as string\nconst API_LOCAL_URL = import.meta.env.VITE_API_LOCAL_URL as string\nconst API_ONLINE_URL = import.meta.env.VITE_API_ONLINE_URL as string\n\n// dev:\n//  SPA -> /api > dev server proxy > online API\n//  SSR -> server ? online api : /api\nconst DEV_API = isSPA ? API_PROXY_URL : isServer ? API_ONLINE_URL : API_PROXY_URL\n\n// prod:\n//  SPA -> online api\n//  SSR -> server ? localhost : online api\n// MARK: 可能会引发 nginx 带来诸多意外问题\n// const PROD_API = API_ONLINE_URL\nconst PROD_API = isSPA ? API_ONLINE_URL : isServer ? API_LOCAL_URL : API_ONLINE_URL\n\nexport default {\n  FE: import.meta.env.VITE_FE_URL as string,\n  CDN: import.meta.env.VITE_CDN_URL as string,\n  PROXY: import.meta.env.VITE_PROXY_URL as string,\n  GRAVATAR: import.meta.env.VITE_GRAVATAR_URL as string,\n  STATIC: import.meta.env.VITE_STATIC_URL as string,\n  NODEPRESS: isDev ? DEV_API : PROD_API\n}\n","/**\n * @file Error constant\n * @module constant.error\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const BAD_REQUEST = 400\nexport const NOT_FOUND = 404\nexport const INVALID_ERROR = 500\n","/**\n * @file App layout updater\n * @module service.layout\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { RouteMeta } from 'vue-router'\n\nexport enum LayoutColumn {\n  Normal = 0,\n  Wide = 1, // 3 column\n  Full = 2 // full page\n}\n\nexport const getLayoutByRouteMeta = (routeMeta: RouteMeta) => {\n  return routeMeta.layout === LayoutColumn.Wide\n    ? LayoutColumn.Wide\n    : routeMeta.layout === LayoutColumn.Full\n    ? LayoutColumn.Full\n    : LayoutColumn.Normal\n}\n","/**\n * @file Validater\n * @module transformer.validate\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const isValidDateParam = (date: string) => {\n  const dates = date.split('-')\n  // x-x-x\n  if (dates.length !== 3) {\n    return false\n  }\n  // 0-0-0\n  if (!dates.every((d) => Number.isInteger(Number(d)))) {\n    return false\n  }\n  // 0000-00-00\n  const [year, month, day] = dates\n  if (year.length !== 4 || month.length !== 2 || day.length !== 2) {\n    return false\n  }\n  return true\n}\n","/**\n * @file Scroll to anywhere\n * @module util.scroller\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport BezierEasing from 'bezier-easing'\n\nexport const Easing = {\n  ease: [0.25, 0.1, 0.25, 1.0],\n  linear: [0, 0.0, 1, 1.0],\n  easeIn: [0.42, 0.0, 1, 1.0],\n  easeOut: [0, 0.0, 0.58, 1.0],\n  easeInOut: [0.42, 0.0, 0.58, 1.0]\n}\n\nenum ElementEvent {\n  scroll = 'scroll',\n  mousedown = 'mousedown',\n  wheel = 'wheel',\n  DOMMouseScroll = 'DOMMouseScroll',\n  mousewheel = 'mousewheel',\n  keyup = 'keyup',\n  touchmove = 'touchmove'\n}\n\nconst _ = {\n  $(selector: string) {\n    return document.querySelector(selector)\n  },\n  on(element: Element, events: ElementEvent[], handler: $TODO) {\n    if (!Array.isArray(events)) {\n      events = [events]\n    }\n    events.forEach((event) => {\n      element.addEventListener(event, handler, { passive: true })\n    })\n  },\n  off(element: Element, events: ElementEvent[], handler: $TODO) {\n    if (!Array.isArray(events)) {\n      events = [events]\n    }\n    events.forEach((event) => {\n      element.removeEventListener(event, handler)\n    })\n  }\n}\n\nexport const scrollTo = (target: string | number | Element, duration = 500, options: $TODO) => {\n  options = options || {}\n  options.easing = Easing.ease\n\n  const page = _.$('html, body') as Element\n  const events: ElementEvent[] = [\n    ElementEvent.scroll,\n    ElementEvent.mousedown,\n    ElementEvent.wheel,\n    ElementEvent.DOMMouseScroll,\n    ElementEvent.mousewheel,\n    ElementEvent.keyup,\n    ElementEvent.touchmove\n  ]\n\n  let abort = false\n\n  const abortFn = function () {\n    abort = true\n  }\n\n  _.on(page, events, abortFn)\n\n  let elementY = 0\n  const initialY = window.pageYOffset\n\n  if (typeof target === 'number') {\n    elementY = target\n  } else {\n    const element = (typeof target === 'string' ? _.$(target) : target) as Element\n    elementY = initialY + element.getBoundingClientRect().top\n  }\n\n  let targetY =\n    document.body.scrollHeight - elementY < window.innerHeight\n      ? document.body.scrollHeight - window.innerHeight\n      : elementY\n\n  if (options.offset) {\n    targetY += options.offset\n  }\n\n  const diff = targetY - initialY\n  const easing = Reflect.apply(BezierEasing, BezierEasing, options.easing)\n  let start: number\n\n  const done = function () {\n    _.off(page, events, abortFn)\n    if (abort && options.onCancel) {\n      options.onCancel()\n    }\n    if (!abort && options.onDone) {\n      options.onDone()\n    }\n  }\n\n  if (!diff) {\n    return\n  }\n\n  window.requestAnimationFrame(function step(timestamp) {\n    if (abort) {\n      return done()\n    }\n    if (!start) {\n      start = timestamp\n    }\n\n    const time = timestamp - start\n    let progress = Math.min(time / duration, 1)\n    progress = easing(progress)\n\n    window.scrollTo(0, initialY + diff * progress)\n\n    if (time < duration) {\n      window.requestAnimationFrame(step)\n    } else {\n      done()\n    }\n  })\n}\n\n// default offset: header height\nexport const scrollToElementAnchor = (elementID: string, offset = -76) => {\n  const targetElement = document.getElementById(elementID)\n  if (targetElement) {\n    scrollTo(targetElement, 200, { offset })\n  }\n}\n","/**\n * @file Client effects\n * @module util.effects\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { nextTick } from 'vue'\nimport { scrollTo, Easing } from './scroller'\n\nexport const scrollToTop = () => {\n  scrollTo('body', 300, { easing: Easing.easeIn })\n}\n\nexport const nextScreen = () => {\n  nextTick(() => {\n    scrollTo(window.scrollY + window.innerHeight * 0.68, 300, {\n      easing: Easing['ease-in']\n    })\n  })\n}\n","/**\n * @file UA parser\n * @module transformer.ua\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport parser from 'ua-parser-js'\nimport { Language } from '/@/language/data'\n\nexport const uaParser = (userAgent: string) => {\n  const parseResult = (parser as $TODO)(userAgent || '')\n  const browserName = String(parseResult.browser.name).toLowerCase()\n  const isTargetDevice = (browsers: string[]) => {\n    return browsers.some((browser) => browser.toLowerCase() === browserName)\n  }\n\n  return {\n    result: parseResult,\n    isIE: isTargetDevice(['compatible', 'MSIE', 'IE']),\n    isEdge: isTargetDevice(['Edge']),\n    isFirefox: isTargetDevice(['Firefox']),\n    isChrome: isTargetDevice(['Chrome', 'Chromium']),\n    isSafari: isTargetDevice(['Safari']),\n    isWechat: isTargetDevice(['Wechat']),\n    isIos: parseResult.os.name === 'iOS',\n    isAndroid: parseResult.os.name === 'Android',\n    isMobile: parseResult.device.type === 'mobile'\n  }\n}\n\nconst isTargetLanguageUser = (language: UaLanguage, targetLang: string) => {\n  if (typeof language === 'string') {\n    return language.includes(targetLang)\n  }\n  if (Array.isArray(language)) {\n    return language.some((lang) => lang.includes(targetLang))\n  }\n  return false\n}\nexport type UaLanguage = string | string[]\nexport const isEnUser = (language: UaLanguage) => isTargetLanguageUser(language, Language.En)\nexport const isZhUser = (language: UaLanguage) => {\n  return language ? isTargetLanguageUser(language, Language.Zh) : true\n}\n","/**\n * @file App universal ref\n * @module universal.ref\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { Ref, ref, customRef } from 'vue'\nimport { isClient, isSPA } from '/@/app/environment'\nimport { setSSRContext, getSSRContext } from './context'\n\nconst getRefData = (key: string) => getSSRContext('refs')[key]\nconst setRefData = (key: string, value: any) => {\n  setSSRContext('refs', {\n    ...getSSRContext('refs'),\n    [key]: value\n  })\n}\n\nconst getValue = <T>(value: T | (() => T)): T => {\n  return value instanceof Function ? value() : value\n}\n\nconst isProxyable = (value: unknown): value is Record<string, unknown> => {\n  return Boolean(value) && typeof value === 'object'\n}\n\n// server write only | client read only\n// https://github.com/nuxt-community/composition-api/blob/main/src/runtime/composables/ssr-ref.ts\nexport const universalRef = <T>(key: string, sourceValue: T | (() => T)): Ref<T> => {\n  // SPA\n  if (isSPA) {\n    return ref(getValue(sourceValue)) as Ref<T>\n  }\n\n  // SSR\n  let value = isClient ? getRefData(key) ?? getValue(sourceValue) : getValue(sourceValue)\n\n  // Client > return ref value\n  if (isClient) {\n    return ref(value) as Ref<T>\n  }\n\n  // Server > return customRef (sync setRef)\n  if (sourceValue instanceof Function) {\n    setRefData(key, value)\n  }\n\n  const getProxy = <T extends Record<string | number, any>>(\n    track: () => void,\n    trigger: () => void,\n    observable: T\n  ): T => {\n    return new Proxy(observable, {\n      get(target, prop: string) {\n        track()\n        if (isProxyable(target[prop])) {\n          return getProxy(track, trigger, target[prop])\n        }\n\n        const value = Reflect.get(target, prop)\n        return typeof value === 'function' ? value.bind(target) : value\n      },\n      set(object, prop, newValue) {\n        const result = Reflect.set(object, prop, newValue)\n        setRefData(key, value)\n        trigger()\n        return result\n      }\n    })\n  }\n\n  return customRef((track, trigger) => ({\n    get: () => {\n      track()\n      return isProxyable(value) ? getProxy(track, trigger, value) : value\n    },\n    set: (v: T) => {\n      setRefData(key, v)\n      value = v\n      trigger()\n    }\n  }))\n}\n","/**\n * @file App universal prefetch\n * @module universal.prefetch\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { onBeforeMount, onServerPrefetch } from 'vue'\nimport { useGlobalState } from '/@/app/state'\nimport { isServer, isSPA } from '/@/app/environment'\n\n// onServerPrefetch === async setup\n// onServerPreFetch: https://github.com/vuejs/composition-api/pull/198/files\n// https://github.com/vuejs/vue-next/blob/master/packages/server-renderer/src/render.ts#L96\n// https://github.com/nuxt-community/composition-api/blob/main/src/fetch.ts#L226\n// https://github.com/nuxt/framework/blob/main/packages/nuxt3/src/app/composables/asyncData.ts\n// https://github.com/nuxt-community/composition-api/blob/main/src/runtime/composables/async.ts\nexport const useUniversalFetch = (fetcher: () => Promise<any>) => {\n  const globalState = useGlobalState()\n  const doFetchOnBeforeMount = () => {\n    onBeforeMount(() => fetcher())\n  }\n\n  // Client side: SPA\n  if (isSPA) {\n    doFetchOnBeforeMount()\n    return\n  }\n\n  // Server side: SSR\n  if (isServer) {\n    onServerPrefetch(() =>\n      fetcher().catch((error) => {\n        // HACK: 因为 onServerPrefetch 或 async setup 都无法中断 renderToString，所以需要在状态被抛出之前就做一个标记\n        globalState.setRenderError(error)\n        return Promise.reject(error)\n      })\n    )\n    return\n  }\n\n  // Client side: SSR\n  // Navigation: fetch on before mount\n  if (globalState.isHydrated.value) {\n    doFetchOnBeforeMount()\n  } else {\n    // Hydration: no fetch\n    // onServerPreFetch: https://github.com/vuejs/composition-api/pull/198/files\n    // isHydrating: https://github.com/vuejs/vue-next/issues/1723\n    // isHydrating: https://github.com/vuejs/vue-next/pull/2016\n  }\n}\n","/**\n * @file App universal\n * @module universal\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { isServer, isClient } from '/@/app/environment'\nexport * from './context'\nexport * from './ref'\nexport * from './prefetch'\n\n// env only\nexport const onClient = (callback: any) => {\n  isClient && callback()\n}\n\nexport const onServer = (callback: any) => {\n  isServer && callback()\n}\n","/**\n * @file App local global state\n * @module app.state\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { App, inject, ref, computed, reactive, readonly } from 'vue'\nimport { INVALID_ERROR } from '/@/constants/error'\nimport { LayoutColumn } from '/@/services/layout'\nimport { uaParser, isZhUser } from '/@/transforms/ua'\nimport { universalRef, onClient } from '/@/universal'\n\ntype RenderErrorValue = RenderError | null\nexport interface RenderError {\n  code: number\n  message: string\n}\n\nexport enum ImageExt {\n  WebP = 'webp',\n  Jpg = 'jpeg'\n}\n\nexport interface GlobalRawState {\n  renderError: RenderErrorValue\n  userAgent: string\n  language: string\n  layout: LayoutColumn\n}\n\nexport interface GlobalStateConfig {\n  userAgent: string\n  language: string\n  layout: LayoutColumn\n}\n\nconst GlobalStateSymbol = Symbol('globalState')\nexport type GlobalState = ReturnType<typeof createGlobalState>\nexport const createGlobalState = (config: GlobalStateConfig) => {\n  // Render error\n  const renderError = universalRef<RenderErrorValue>('error', () => null)\n  const defaultError = { code: INVALID_ERROR }\n  const setRenderError = (error: any) => {\n    onClient(() => {\n      console.warn('App error:', error)\n    })\n    if (!error) {\n      // clear error\n      renderError.value = null\n    } else if (error instanceof Error) {\n      // new Error\n      renderError.value = {\n        code: (error as any).code ?? defaultError.code,\n        message: error.message\n      }\n    } else if (typeof error === 'string') {\n      // error message\n      renderError.value = {\n        ...defaultError,\n        message: error\n      }\n    } else {\n      // error object -> axios | component\n      renderError.value = {\n        ...error,\n        code: error.status || error.status || defaultError.code\n      }\n    }\n  }\n\n  // Hydrated\n  const isHydrated = ref(false)\n  const setHydrate = () => {\n    isHydrated.value = true\n  }\n\n  // UserAgent & device info\n  const userAgent = reactive({\n    original: config.userAgent,\n    language: config.language,\n    isZhUser: isZhUser(config.language),\n    ...uaParser(config.userAgent)\n  })\n  const setUserAgent = (_userAgent: string) => {\n    userAgent.original = _userAgent\n    Object.assign(userAgent, uaParser(config.userAgent))\n  }\n  const setLanguage = (_language: string) => {\n    userAgent.language = _language\n    userAgent.isZhUser = isZhUser(_language)\n  }\n\n  // UI layout\n  const layoutValue = ref(config.layout)\n  const layoutColumn = computed(() => ({\n    layout: layoutValue.value,\n    isNormal: layoutValue.value === LayoutColumn.Normal,\n    isWide: layoutValue.value === LayoutColumn.Wide,\n    isFull: layoutValue.value === LayoutColumn.Full\n  }))\n  const setLayoutColumn = (layout: LayoutColumn) => {\n    if (layout !== layoutValue.value) {\n      layoutValue.value = layout\n    }\n  }\n\n  // Aliyun OSS: https://oss.console.aliyun.com/bucket/oss-cn-hangzhou/surmon-static/process/img\n  // MARK: 微信/Safari/移动端无法精确判断兼容性，使用 jpg 格式\n  const imageExt = computed(() => {\n    const imageExtValue =\n      userAgent.isMobile || userAgent.isWechat || userAgent.isSafari\n        ? (ImageExt.Jpg as ImageExt)\n        : (ImageExt.WebP as ImageExt)\n    return {\n      ext: imageExtValue,\n      isJpg: imageExtValue === ImageExt.Jpg,\n      isWebP: imageExtValue === ImageExt.WebP\n    }\n  })\n\n  // Switchers\n  const switchBox = reactive({\n    // 移动端侧边栏\n    mobileSidebar: false,\n    // 开启轨迹地图\n    liveMap: false,\n    // 山河入梦\n    wallpaper: false\n  })\n\n  // export state\n  const toRawState = (): GlobalRawState => ({\n    renderError: renderError.value,\n    userAgent: userAgent.original,\n    language: userAgent.language,\n    layout: layoutValue.value\n  })\n\n  const globalState = {\n    toRawState,\n    // Render error state\n    renderError: readonly(renderError),\n    setRenderError,\n    // Hydrate state\n    isHydrated: readonly(isHydrated),\n    setHydrate,\n    // Layout state\n    layoutColumn,\n    setLayoutColumn,\n    // Device state\n    userAgent: readonly(userAgent),\n    imageExt,\n    // switch\n    switchBox: readonly(switchBox),\n    switchTogglers: {\n      liveMap() {\n        switchBox.liveMap = !switchBox.liveMap\n      },\n      wallpaper() {\n        switchBox.wallpaper = !switchBox.wallpaper\n      },\n      mobileSidebar: (open?: boolean) => {\n        switchBox.mobileSidebar = open != null ? !!open : !switchBox.mobileSidebar\n      }\n    }\n  }\n\n  return {\n    ...globalState,\n    install(app: App) {\n      app.provide(GlobalStateSymbol, globalState)\n    }\n  }\n}\n\nexport const useGlobalState = (): GlobalState => {\n  return inject(GlobalStateSymbol) as GlobalState\n}\n","/* eslint-disable vue/multi-word-component-names */\n/**\n * @file i18n service\n * @module service.i18n\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport {\n  App,\n  inject,\n  computed,\n  ref,\n  watch,\n  readonly,\n  defineComponent,\n  WatchStopHandle,\n  ObjectDirective\n} from 'vue'\n\nexport interface I18nLanguage {\n  code: string\n  iso: string\n  name: string\n}\n\nexport type I18nRender = (...args: any[]) => string\nexport type I18nMap<K extends string | number, L extends string> = {\n  [key in K]: {\n    [language in L]: string | I18nRender\n  }\n}\n\ninterface Ii18nConfig {\n  default: string\n  languages: I18nLanguage[]\n  map: I18nMap<string | number, string>\n}\n\nconst I18nSymbol = Symbol('i18n')\nconst createI18nStore = (config: Ii18nConfig) => {\n  const language = ref(config.default)\n  const languageCodes = config.languages.map((lang) => lang.code)\n  const l = computed(() => config.languages.find((l) => l.code === language.value))\n\n  const set = <L extends string = string>(lang: L) => {\n    if (languageCodes.includes(lang) && language.value !== lang) {\n      language.value = lang\n    }\n  }\n  const toggle = () => {\n    const currentIndex = languageCodes.findIndex((langCode) => langCode === language.value)\n    const nextIndex = currentIndex < languageCodes.length - 1 ? currentIndex + 1 : 0\n    if (currentIndex !== nextIndex) {\n      set(languageCodes[nextIndex])\n    }\n  }\n  const translate = <T extends string = string>(key: T, targetLanguage?: string, ...args) => {\n    const content = config.map[key]?.[targetLanguage || language.value]\n    if (!content) {\n      return\n    }\n    return typeof content === 'string' ? content : content(...args)\n  }\n\n  return {\n    language: readonly(language),\n    l,\n    set,\n    toggle,\n    translate,\n    t: translate\n  }\n}\n\n/**\n * @example <span>{{ t(LANGUAGE_KEYS.SOME_KEY) }}</span>\n * @example <span v-i18n=\"LANGUAGE_KEYS.SOME_KEY\"></span>\n * @example <span v-t=\"LANGUAGE_KEYS.SOME_KEY\"></span>\n * @example <span><i18n :lkey=\"LANGUAGE_KEYS.SOME_KEY\" /></span>\n * @example <span><i18n zh=\"你好，世界\" en=\"hello, world!\" /></span>\n * @example (\n *  <i18n>\n *    <template #zh>你好，世界</template>\n *    <template #en>hello, world!</template>\n *  </i18n>\n * )\n */\nexport type I18n = ReturnType<typeof createI18nStore>\nexport const createI18n = (config: Ii18nConfig) => {\n  const i18nStore = createI18nStore(config)\n\n  interface I18nDirectiveElement extends HTMLElement {\n    _i18nDirectiveStopHandler?: WatchStopHandle\n  }\n  const i18nDirective: ObjectDirective<I18nDirectiveElement> = {\n    beforeMount(element, binding) {\n      element._i18nDirectiveStopHandler = watch(\n        () => i18nStore.language.value,\n        () => {\n          element.textContent = i18nStore.t(binding.value) || ''\n        },\n        { immediate: true }\n      )\n    },\n    beforeUnmount(element) {\n      element?._i18nDirectiveStopHandler?.()\n    }\n  }\n\n  const i18nComponent = defineComponent({\n    name: 'I18n',\n    props: {\n      lkey: [String, Number, Symbol]\n    },\n    render() {\n      if (this.$props.lkey) {\n        return i18nStore.t(this.$props.lkey as string)\n      } else {\n        const lang = i18nStore.language.value\n        return this.$attrs[lang] || this.$slots[lang]?.()\n      }\n    }\n  })\n\n  return {\n    ...i18nStore,\n    install(app: App) {\n      app.config.globalProperties.$i18n = i18nStore\n      app.provide(I18nSymbol, i18nStore)\n      app.component(i18nComponent.name, i18nComponent)\n      // MARK: SSR not support\n      app.directive('i18n', i18nDirective)\n      app.directive('t', i18nDirective)\n    }\n  }\n}\n\nexport const useI18n = (): I18n => {\n  return inject(I18nSymbol) as I18n\n}\n","/**\n * @file Meta service\n * @module service.meta\n * @author Surmon <https://github.com/surmon-china>\n * @link https://github.com/vueuse/head\n */\n\nimport { computed, inject } from 'vue'\nimport type { ComputedGetter } from '@vue/reactivity'\nimport { createHead, useHead, HeadObject, HeadAttrs, renderHeadToString } from '@vueuse/head'\nimport { useI18n } from './i18n'\n\nexport interface MetaResult {\n  readonly headTags: string\n  readonly htmlAttrs: string\n  readonly bodyAttrs: string\n}\n\nconst MetaTitlerSymbol = Symbol('meta-titler')\ntype MeatTitler = (title: string) => string\n\nexport interface MetaConfig {\n  titler?: MeatTitler\n}\nexport const createMeta = (metaConfig?: MetaConfig) => {\n  const head = createHead()\n  return {\n    ...head,\n    renderToString(): MetaResult {\n      return renderHeadToString(head)\n    },\n    install(app, ...rest: any[]) {\n      app.provide(MetaTitlerSymbol, metaConfig?.titler || ((title) => title))\n      app.use(head, ...rest)\n      return head\n    }\n  }\n}\n\nexport interface MetaObject extends HeadObject {\n  title?: string\n  pageTitle?: string\n  keywords?: string\n  description?: string\n}\n\nexport function useMeta(source: MetaObject | ComputedGetter<MetaObject>) {\n  const i18n = useI18n()\n  const titler = inject(MetaTitlerSymbol) as MeatTitler\n\n  const meta = computed<HeadObject>(() => {\n    const sourceObject = typeof source === 'function' ? source() : source\n    const { title, pageTitle, keywords, description, ...restSource } = sourceObject\n\n    // title | page title\n    const mTitle = title ? title : pageTitle ? titler(pageTitle) : ''\n\n    // metas\n    const mMeta = (restSource.meta as HeadAttrs[]) || []\n\n    // keywords\n    if (keywords) {\n      mMeta.push({\n        key: 'keywords',\n        name: 'keywords',\n        content: keywords\n      })\n    }\n\n    // description\n    if (description) {\n      mMeta.push({\n        key: 'description',\n        name: 'description',\n        content: description\n      })\n    }\n\n    // html i18n\n    const mHTMLAttrs = {\n      lang: i18n.l.value?.iso,\n      ...restSource.htmlAttrs\n    }\n\n    return {\n      ...restSource,\n      title: mTitle,\n      meta: mMeta,\n      htmlAttrs: mHTMLAttrs\n    }\n  })\n\n  return useHead(meta)\n}\n","/**\n * @file Local storage\n * @module service.storage\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { ref, watchEffect } from 'vue'\n\nexport const get = (key: string) => localStorage.getItem(key)\nexport const set = (key: string, data: string) => localStorage.setItem(key, data)\nexport const remove = (key: string) => localStorage.removeItem(key)\n\nexport const setJSON = (key: string, data: any) => set(key, JSON.stringify(data))\nexport const getJSON = <T = any>(key: string): T | null => {\n  const data = get(key)\n  return typeof data === 'string' ? JSON.parse(data) : null\n}\n\nexport const getAccessor = <S = any>(key: string, initState: S) => {\n  const localState = ref(getJSON<S>(key) || initState)\n  watchEffect(() => setJSON(key, localState.value))\n  return localState\n}\n\nexport default {\n  get,\n  set,\n  remove,\n  setJSON,\n  getJSON,\n  getAccessor\n}\n","/**\n * @file Theme service\n * @module service.theme\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { App, inject, ref, readonly } from 'vue'\nimport cookies from 'js-cookie'\nimport storage from './storage'\n\nconst DARK_THEME_QUERY = '(prefers-color-scheme: dark)'\nconst LIGHT_THEME_QUERY = '(prefers-color-scheme: light)'\nconst NO_PREFERENCE_QUERY = '(prefers-color-scheme: no-preference)'\n\nexport const THEME_STORAGE_KEY = 'theme'\nexport const getClientLocalTheme = () => {\n  // local theme\n  const historyTheme = storage.get(THEME_STORAGE_KEY)\n  if (historyTheme) {\n    return historyTheme === Theme.Dark ? Theme.Dark : Theme.Default\n  }\n  // system theme\n  if (window.matchMedia(DARK_THEME_QUERY).matches) {\n    return Theme.Dark\n  }\n  if (window.matchMedia(LIGHT_THEME_QUERY).matches) {\n    return Theme.Default\n  }\n  // not specified || not support\n  return Theme.Default\n}\n\nexport enum Theme {\n  Default = 'default',\n  Dark = 'dark'\n}\n\nconst themes = Object.values(Theme)\nconst ThemeSymbol = Symbol('theme')\nconst createThemeStore = (defaultTheme: Theme) => {\n  const theme = ref(defaultTheme)\n\n  const set = (newTheme: Theme) => {\n    if (themes.includes(newTheme) && newTheme !== theme.value) {\n      theme.value = newTheme\n      cookies.set(THEME_STORAGE_KEY, newTheme)\n      storage.set(THEME_STORAGE_KEY, newTheme)\n    }\n  }\n\n  const toggle = () => set(theme.value === Theme.Dark ? Theme.Default : Theme.Dark)\n\n  const bindClientSystem = () => {\n    window\n      .matchMedia(DARK_THEME_QUERY)\n      .addEventListener('change', ({ matches }) => matches && set(Theme.Dark))\n    window\n      .matchMedia(LIGHT_THEME_QUERY)\n      .addEventListener('change', ({ matches }) => matches && set(Theme.Default))\n  }\n\n  return {\n    theme: readonly(theme),\n    set,\n    toggle,\n    bindClientSystem\n  }\n}\n\nexport type ThemeService = ReturnType<typeof createThemeStore>\nexport const createTheme = (defaultTheme: Theme) => {\n  const themeStore = createThemeStore(defaultTheme)\n  return {\n    ...themeStore,\n    install(app: App) {\n      app.provide(ThemeSymbol, themeStore)\n    }\n  }\n}\n\nexport const useTheme = (): ThemeService => {\n  return inject(ThemeSymbol) as ThemeService\n}\n","/**\n * @file Client defer task manager\n * @module service.defer\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { App, inject, reactive, Plugin } from 'vue'\n\ndeclare global {\n  interface Window {\n    // @ts-ignore\n    $defer: Defer\n  }\n}\n\n// @ts-ignore\nexport type Defer = ReturnType<typeof createDeferStore>\nexport type DeferTask = () => any\nconst createDeferStore = () => {\n  const state = reactive({\n    loaded: false,\n    tasks: [] as Array<DeferTask>\n  })\n\n  const doTask = (task: DeferTask) => {\n    window.setTimeout(task, 666)\n  }\n\n  const handleLoaded = () => {\n    state.loaded = true\n    state.tasks.forEach((task) => doTask(task))\n  }\n\n  const addTask = (task: DeferTask) => {\n    state.tasks.push(task)\n    if (state.loaded) {\n      doTask(task)\n    }\n  }\n\n  window.addEventListener('load', handleLoaded)\n  return { state, addTask }\n}\n\nconst DeferSymbol = Symbol('defer')\n\nexport interface DeferPluginConfig {\n  exportToGlobal?: boolean\n}\nexport const createDefer = (): Defer & Plugin => {\n  const defer = createDeferStore()\n  return {\n    ...defer,\n    install(app: App, config?: DeferPluginConfig) {\n      app.provide(DeferSymbol, defer)\n\n      if (config?.exportToGlobal) {\n        window.$defer = defer\n      }\n    }\n  }\n}\n\nexport const useDefer = (): Defer => {\n  return inject(DeferSymbol) as Defer\n}\n","\nexport default (sfc, props) => {\n  const target = sfc.__vccOpts || sfc;\n  for (const [key, val] of props) {\n    target[key] = val;\n  }\n  return target;\n}\n","<template>\n  <div id=\"progress-bar\">\n    <div\n      class=\"progress\"\n      :class=\"{\n        show: loading.state.show,\n        notransition: loading.state.skipTimerCount > 0,\n        failed: !loading.state.canSucceed\n      }\"\n      :style=\"{ width: loading.state.percent + '%' }\"\n    />\n    <desktop-only>\n      <div\n        class=\"spin\"\n        :class=\"{\n          show: loading.state.show,\n          failed: !loading.state.canSucceed\n        }\"\n      >\n        <div class=\"lds-ring\">\n          <div></div>\n          <div></div>\n          <div></div>\n          <div></div>\n        </div>\n      </div>\n    </desktop-only>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { useLoading } from './'\n  export default defineComponent({\n    name: 'ProgressBar',\n    setup() {\n      const loading = useLoading()\n      return { loading }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  #progress-bar {\n    $size: 3px;\n    $failed: $red;\n    position: fixed;\n    top: 0;\n    left: 0;\n    height: $size;\n    width: 100%;\n    z-index: $z-index-progress-bar;\n\n    .progress {\n      position: absolute;\n      top: 0;\n      left: 0;\n      height: $size;\n      width: 0%;\n      @include hidden();\n      transition: width $transition-time-normal, opacity $transition-time-normal,\n        visibility $transition-time-normal;\n      background-color: $primary;\n      &.show {\n        @include visible();\n        transition: width 0s, opacity $transition-time-fast, visibility $transition-time-fast;\n      }\n\n      &.notransition {\n        transition: none;\n      }\n      &.failed {\n        background-color: $failed;\n      }\n    }\n\n    .spin {\n      position: absolute;\n      top: $lg-gap;\n      right: $lg-gap;\n      @include hidden();\n      @include visibility-transition($transition-time-normal);\n      &.show {\n        @include visible();\n      }\n\n      &.failed {\n        .lds-ring {\n          div {\n            border-top-color: $failed;\n          }\n        }\n      }\n\n      .lds-ring {\n        $size: 3rem;\n        display: inline-block;\n        position: relative;\n        width: $size;\n        height: $size;\n\n        @keyframes lds-ring {\n          0% {\n            transform: rotate(0deg);\n          }\n          100% {\n            transform: rotate(360deg);\n          }\n        }\n\n        div {\n          $size: 2rem;\n          $border: 3px;\n          box-sizing: border-box;\n          display: block;\n          position: absolute;\n          width: $size;\n          height: $size;\n          margin: $border;\n          border: $border solid transparent;\n          border-top-color: $primary;\n          border-radius: 50%;\n          animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n          &:nth-child(1) {\n            animation-delay: -0.45s;\n          }\n          &:nth-child(2) {\n            animation-delay: -0.3s;\n          }\n          &:nth-child(3) {\n            animation-delay: -0.15s;\n          }\n        }\n      }\n    }\n  }\n</style>\n","/**\n * @file Global loading state\n * @module service.loading\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { App, reactive, readonly, inject, nextTick, DeepReadonly } from 'vue'\nimport ProgressComponent from './progress.vue'\n\ndeclare global {\n  interface Window {\n    $loading: Loading\n  }\n}\n\nexport interface LoadingState {\n  percent: number\n  show: boolean\n  error: null\n  canSucceed: boolean\n  skipTimerCount: number\n  throttle: number\n  duration: number\n}\n\nexport interface Loading {\n  state: DeepReadonly<LoadingState>\n  start(): void\n  pause(): void\n  resume(): void\n  finish(): void\n  fail(error: any): void\n  increase(percent: number): void\n  decrease(percent: number): void\n  set(percent: number): void\n}\n\nexport interface LoadingOptions {\n  throttle?: number\n  duration?: number\n}\nconst LoadingSymbol = Symbol('loading')\nconst createLoadingStore = (options: LoadingOptions = {}) => {\n  let _cut: number\n  let _timer: number\n  let _throttle: number\n  const state = reactive({\n    percent: 0,\n    show: false,\n    error: null,\n    canSucceed: true,\n    skipTimerCount: 0,\n    throttle: options.throttle || 200,\n    duration: options.duration || 3000\n  })\n\n  const clear = () => {\n    window.clearInterval(_timer)\n    window.clearTimeout(_throttle)\n    _timer = 0\n  }\n\n  const increase = (percent: number) => {\n    state.percent = Math.min(100, Math.floor(state.percent + percent))\n  }\n\n  const decrease = (percent: number) => {\n    state.percent = Math.max(0, Math.floor(state.percent - percent))\n  }\n\n  const startTimer = () => {\n    if (!state.show) {\n      state.show = true\n    }\n    if (typeof _cut === 'undefined') {\n      _cut = 10000 / Math.floor(state.duration)\n    }\n\n    _timer = window.setInterval(() => {\n      /**\n       * When reversing direction skip one timers\n       * so 0, 100 are displayed for two iterations\n       * also disable css width transitioning\n       * which otherwise interferes and shows\n       * a jojo effect\n       */\n      if (state.skipTimerCount > 0) {\n        state.skipTimerCount--\n        return\n      }\n\n      decrease(_cut)\n    }, 100)\n  }\n\n  const start = () => {\n    clear()\n    state.percent = 0\n    state.skipTimerCount = 0\n    state.canSucceed = true\n    state.show = true\n\n    if (state.throttle) {\n      _throttle = window.setTimeout(() => startTimer(), state.throttle)\n    } else {\n      startTimer()\n    }\n  }\n\n  const hide = () => {\n    clear()\n    window.setTimeout(() => {\n      state.show = false\n      nextTick(() => {\n        state.percent = 0\n      })\n    }, 500)\n  }\n\n  const set = (percent: number) => {\n    state.show = true\n    state.canSucceed = true\n    state.percent = Math.min(100, Math.max(0, Math.floor(percent)))\n  }\n\n  const pause = () => {\n    window.clearInterval(_timer)\n  }\n\n  const resume = () => {\n    startTimer()\n  }\n\n  const finish = () => {\n    state.error = null\n    state.percent = 100\n    hide()\n  }\n\n  const fail = (error?: any) => {\n    state.error = error\n    state.canSucceed = false\n  }\n\n  return {\n    state: readonly(state),\n    start,\n    pause,\n    resume,\n    finish,\n    fail,\n    increase,\n    decrease,\n    set\n  }\n}\n\nexport const createLoading = (options?: LoadingOptions) => {\n  const loading = createLoadingStore(options)\n  return {\n    ...loading,\n    install(app: App, config?: { exportToGlobal?: boolean }) {\n      app.provide(LoadingSymbol, loading)\n      app.component(ProgressComponent.name as string, ProgressComponent)\n      app.config.globalProperties.$loading = loading\n      if (config?.exportToGlobal) {\n        window.$loading = loading\n      }\n    }\n  }\n}\n\nexport const useLoading = (): Loading => {\n  return inject(LoadingSymbol) as Loading\n}\n","/**\n * @file Outside\n * @module service.outside\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const getGAScriptUrl = (gaMeasurementID: string) => {\n  return `https://www.googletagmanager.com/gtag/js?id=${gaMeasurementID}`\n}\n","/**\n * @file Script loader\n * @module util.script-loader\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport interface ILoaderOption extends Partial<HTMLScriptElement> {\n  domain?: string\n}\n\nexport default (source: string, options: ILoaderOption = {} as ILoaderOption) => {\n  return new Promise((resolve, reject) => {\n    const head = document.head || document.getElementsByTagName('head')[0]\n    const script = document.createElement('script')\n    const {\n      src,\n      domain,\n      type = 'text/javascript',\n      charset = 'utf-8',\n      defer = false,\n      async = false,\n      ...restAttrs\n    } = options\n    script.type = type\n    script.defer = defer\n    script.async = async\n    script.src = src || source\n\n    Object.keys(restAttrs).forEach((key) => {\n      script[key] = restAttrs[key]\n    })\n\n    if (domain) {\n      const link = document.createElement('link')\n      link.href = domain\n      link.rel = 'preconnect'\n      head.appendChild(link)\n    }\n\n    head.appendChild(script)\n    script.onload = resolve\n    script.onerror = reject\n  })\n}\n","/**\n * @file GA 统计服务\n * @module service.gtag\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { App, reactive, readonly, inject, Plugin } from 'vue'\nimport { Router } from 'vue-router'\nimport { getGAScriptUrl } from '/@/transforms/outside'\nimport loadScript from '/@/utils/script-loader'\n// MARK: https://zh.nuxtjs.org/faq/ga\n// MARK: https://github.com/nuxt-community/google-gtag/blob/master/lib/plugin.js\n// DOC: https://developers.google.com/analytics/devguides/collection/gtagjs/pages?hl=zh-cn\n\ndeclare global {\n  interface Window {\n    gtag(...args: any[]): any\n    dataLayer: any[]\n  }\n}\n\nexport interface GtagConfig {\n  [key: string]: any\n}\n\nexport interface GtagPluginConfig {\n  id: string\n  router: Router\n  customResourceURL?: string\n  config?: GtagConfig\n}\n\nconst GtagSymbol = Symbol('gtag')\nexport type Gtag = ReturnType<typeof createGtag>\nexport const createGtag = (options: GtagPluginConfig) => {\n  if (window.gtag == null) {\n    window.dataLayer = window.dataLayer || []\n    window.gtag = (...args) => window.dataLayer.push(...args)\n    window.gtag('js', new Date())\n    window.gtag('config', options.id, options.config)\n  }\n\n  if (!options.id || !options.router) {\n    return\n  }\n\n  const push = (...args) => {\n    if (state.readied && !state.disabled) {\n      window.gtag(...args)\n    }\n  }\n\n  const resourceURL = options.customResourceURL || getGAScriptUrl(options.id)\n\n  const state = reactive({\n    readied: false,\n    disabled: false\n  })\n\n  loadScript(resourceURL, { async: true }).then(() => {\n    state.readied = true\n    options.router.afterEach((to) => {\n      const location = window.location.origin + to.fullPath\n      push('config', options.id, {\n        page_title: document.title,\n        page_path: to.fullPath,\n        page_location: location\n      })\n    })\n  })\n\n  const gtag = {\n    state: readonly(state),\n    enable: () => {\n      state.disabled = false\n    },\n    disable: () => {\n      state.disabled = true\n    },\n    set(config: GtagConfig) {\n      push('set', config)\n    },\n    config(config: GtagConfig) {\n      push('config', options.id, config)\n    },\n    // https://developers.google.com/analytics/devguides/collection/gtagjs/events?hl=zh-cn\n    event(\n      eventName: string,\n      config?: GtagConfig & {\n        event_action?: string\n        event_category?: string\n        event_label?: string\n        value?: number\n      }\n    ) {\n      push('event', eventName, config)\n    }\n  }\n\n  return gtag\n}\n\nexport const useGtag = (): Gtag => {\n  return inject(GtagSymbol) as Gtag\n}\n\ntype PluginInstallFunction = Plugin & {\n  installed?: boolean\n}\n\nconst install: PluginInstallFunction = (app: App, config: GtagPluginConfig) => {\n  if (install.installed) {\n    return\n  }\n  const gtag = createGtag(config)\n  app.provide(GtagSymbol, gtag)\n  app.config.globalProperties.$gtag = gtag\n  install.installed = true\n}\nexport default { install }\n","export const PopupSymbol = Symbol('popup')\n","/**\n * @file popup hook\n * @module service.popup.hook\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { inject, onMounted } from 'vue'\nimport { PopupSymbol } from './constant'\nimport type { Popup } from '.'\n\nexport const usePopup = (): Popup => {\n  return inject(PopupSymbol) as Popup\n}\n\nexport const usePopupWithRoot = (fn: () => HTMLElement): Popup => {\n  const popup = usePopup()\n  onMounted(() => popup.$setRoot(fn()))\n  return popup\n}\n","/**\n * @file HTTP requester service\n * @module service.http\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport axios, { AxiosInstance } from 'axios'\nimport { BAD_REQUEST } from '/@/constants/error'\nimport API_CONFIG from '/@/config/api.config'\nimport { isClient } from '/@/app/environment'\n\nexport enum HTTPStatus {\n  Error = 'error',\n  Success = 'success'\n}\n\ntype HTTPResult<T = any> = {\n  status: HTTPStatus.Success\n  message: string\n  result: T\n}\n\nconst nodepress = axios.create({\n  baseURL: API_CONFIG.NODEPRESS\n})\n\nnodepress.interceptors.response.use(\n  (response) =>\n    response.data.status === HTTPStatus.Success ? response.data : Promise.reject(response.data),\n  (error) => {\n    const errorJSON = error.toJSON()\n    const messageText = error.response?.data?.message || 'Error'\n    const errorText = error.response?.data?.error || error.response?.statusText || errorJSON.message\n    const errorInfo = {\n      ...errorJSON,\n      config: error.config,\n      request: error.request,\n      response: error.response,\n      code: error.code || error.response?.status || BAD_REQUEST,\n      message: messageText + ': ' + errorText\n    }\n    console.debug('axios error:', isClient ? errorInfo : errorJSON)\n    return Promise.reject(errorJSON)\n  }\n)\n\nconst service = {\n  $: nodepress,\n  request: <T = any>(...args: Parameters<AxiosInstance['request']>): Promise<HTTPResult<T>> =>\n    nodepress.request(...args),\n  get: <T = any>(...args: Parameters<AxiosInstance['get']>): Promise<HTTPResult<T>> =>\n    nodepress.get(...args),\n  delete: <T = any>(...args: Parameters<AxiosInstance['delete']>): Promise<HTTPResult<T>> =>\n    nodepress.delete(...args),\n  head: <T = any>(...args: Parameters<AxiosInstance['head']>): Promise<HTTPResult<T>> =>\n    nodepress.head(...args),\n  options: <T = any>(...args: Parameters<AxiosInstance['options']>): Promise<HTTPResult<T>> =>\n    nodepress.options(...args),\n  post: <T = any>(...args: Parameters<AxiosInstance['post']>): Promise<HTTPResult<T>> =>\n    nodepress.post(...args),\n  put: <T = any>(...args: Parameters<AxiosInstance['put']>): Promise<HTTPResult<T>> =>\n    nodepress.put(...args),\n  patch: <T = any>(...args: Parameters<AxiosInstance['patch']>): Promise<HTTPResult<T>> =>\n    nodepress.patch(...args)\n}\n\nexport default service\n","/**\n * @file App meta options state\n * @module store.meta\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineStore } from 'pinia'\nimport nodepress from '/@/services/nodepress'\n\nexport interface MerchItemConfig {\n  name: string\n  description: string\n  detail: string\n  src: string\n  url: string\n}\n\nexport interface AD_CONFIG {\n  PC_CARROUSEL:\n    | false\n    | {\n        disabled?: boolean\n        index: number\n        url: string\n        src: string\n        title: string\n      }\n  PC_NAV: Array<{\n    disabled?: boolean\n    icon: string\n    color: string\n    url: string\n    text?: string\n    i18n: {\n      en: string\n      zh: string\n    }\n  }>\n  PC_ASIDE_SWIPER: Array<{\n    disabled?: boolean\n    url: string\n    src: string\n  }>\n  PC_MERCH_PRODUCTS: Array<MerchItemConfig>\n  PC_MERCH_BROKERS: Array<MerchItemConfig>\n}\n\nconst defaultAdConfig: AD_CONFIG = {\n  PC_CARROUSEL: false,\n  PC_NAV: [],\n  PC_ASIDE_SWIPER: [],\n  PC_MERCH_PRODUCTS: [],\n  PC_MERCH_BROKERS: []\n}\n\nexport const useMetaStore = defineStore('meta', {\n  state: () => ({\n    adminInfo: {\n      fetching: false,\n      data: null as null | any\n    },\n    appOptions: {\n      fetching: false,\n      data: null as null | {\n        [key: string]: any\n        ad_config: string\n      }\n    }\n  }),\n  getters: {\n    adConfig: (state) => {\n      const optionAdConfig = state.appOptions.data?.ad_config\n      const adConfig: AD_CONFIG = {\n        ...defaultAdConfig,\n        ...(optionAdConfig ? JSON.parse(optionAdConfig) : {})\n      }\n      // filter disabled ad itmes\n      adConfig.PC_NAV = adConfig.PC_NAV.filter((ad) => !ad.disabled)\n      adConfig.PC_ASIDE_SWIPER = adConfig.PC_ASIDE_SWIPER.filter((ad) => !ad.disabled)\n      return adConfig\n    }\n  },\n  actions: {\n    fetchAdminInfo() {\n      this.adminInfo.fetching = true\n      return nodepress\n        .get('/auth/admin')\n        .then((response) => {\n          this.adminInfo.data = response.result\n        })\n        .finally(() => {\n          this.adminInfo.fetching = false\n        })\n    },\n\n    fetchAppOptions(force = false) {\n      if (!force && this.appOptions.data) {\n        return Promise.resolve()\n      }\n\n      this.appOptions.fetching = true\n      return nodepress\n        .get('/option')\n        .then((response) => {\n          this.appOptions.data = response.result\n        })\n        .finally(() => {\n          this.appOptions.fetching = false\n        })\n    },\n\n    postSiteLike() {\n      return nodepress.patch('/like/site').then((response) => {\n        if (this.appOptions.data) {\n          this.appOptions.data.meta.likes++\n        }\n      })\n    }\n  }\n})\n","/**\n * @file App enhancers\n * @module app.enhancer\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { computed } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { useGlobalState } from '/@/app/state'\nimport { isClient } from '/@/app/environment'\nimport { useI18n } from '/@/services/i18n'\nimport { useMeta } from '/@/services/meta'\nimport { useTheme, Theme } from '/@/services/theme'\nimport { useDefer, Defer } from '/@/services/defer'\nimport { useLoading, Loading } from '/@/services/loading'\nimport { useGtag, Gtag } from '/@/services/gtag'\nimport type { Popup } from '/@/services/popup'\nimport { usePopup } from '/@/services/popup/hook'\nimport { Language } from '/@/language/data'\nimport { useMetaStore } from '/@/store/meta'\n\nexport const useEnhancer = () => {\n  const route = useRoute()\n  const router = useRouter()\n  const i18n = useI18n()\n  const theme = useTheme()\n  const globalState = useGlobalState()\n  const metaStore = useMetaStore()\n\n  const adConfig = computed(() => metaStore.adConfig)\n  const isMobile = computed(() => globalState.userAgent.isMobile)\n  const isDarkTheme = computed(() => theme.theme.value === Theme.Dark)\n  const isZhLang = computed(() => i18n.language.value === Language.Zh)\n\n  return {\n    route,\n    router,\n    globalState,\n    i18n,\n    meta: useMeta,\n    theme,\n\n    adConfig,\n    isMobile,\n    isDarkTheme,\n    isZhLang,\n\n    defer: (isClient && useDefer()) as Defer,\n    popup: (isClient && usePopup()) as Popup,\n    gtag: (isClient && useGtag()) as Gtag,\n    loading: (isClient && useLoading()) as Loading\n  }\n}\n","/**\n * @file State constant\n * @module constant.state\n * @author Surmon <https://github.com/surmon-china>\n */\n\n// 转载状态\nexport enum OriginState {\n  Original = 0, // 原创\n  Reprint = 1, // 转载\n  Hybrid = 2 // 混合\n}\n\n// 评论宿主页面的 POST_ID 类型\nexport enum CommentPostType {\n  Guestbook = 0 // 留言板\n}\n\n// 评论本身的类型\nexport enum CommentParentType {\n  Self = 0 // 自身一级评论\n}\n\n// 排序状态\nexport enum SortType {\n  Asc = 1, // 升序\n  Desc = -1, // 降序\n  Hot = 2 // 热序\n}\n","/**\n * @file Anchor constant\n * @module constant.anchor\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const HEADER_ELEMENT_ID = 'A_header'\nexport const NAV_ELEMENT_ID = 'A_nav'\nexport const MAIN_ELEMENT_ID = 'A_main'\nexport const MAIN_CONTENT_ELEMENT_ID = 'A_main'\nexport const ASIDE_ELEMENT_ID = 'A_aside'\nexport const FOOTER_ELEMENT_ID = 'A_footer'\n\nexport const ARTICLE_SHARE_ELEMENT_ID = 'A_article_share'\nexport const ARTICLE_META_ELEMENT_ID = 'A_article_meta'\nexport const ARTICLE_RELETED_ELEMENT_ID = 'A_article_releted'\nexport const ARTICLE_CONTENT_ELEMENT_ID = 'A_article_content'\n\nexport const ARTICLE_CONTENT_HEADING_ELEMENT_ID_PREFIX = 'A_article_content_heading'\nexport const getArticleContentHeadingElementID = (level: number, heading: string) => {\n  return `${ARTICLE_CONTENT_HEADING_ELEMENT_ID_PREFIX}_${level}_${heading}`\n}\n\nexport const COMMENT_ELEMENT_ID = 'A_comment_warpper'\nexport const COMMENT_PUBLISHER_ELEMENT_ID = 'A_comment_publisher'\nexport const COMMENT_ITEM_ELEMENT_ID_PREFIX = 'A_comment_content_item'\nexport const getCommentItemElementID = (commentID: string | number) => {\n  return `${COMMENT_ITEM_ELEMENT_ID_PREFIX}_${commentID}`\n}\n","/**\n * @file lazy load\n * @module service.lozad\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport lozad from 'lozad'\n\nexport type LozadSelector = lozad.Selector\nexport type LozadObserver = lozad.Observer\n\ndeclare global {\n  interface Window {\n    $lozad: typeof lozad\n  }\n}\n\nexport const LOZAD_CLASS_NAME = 'lozad'\nexport const LOADED_CLASS_NAME = 'loaded'\n\nexport const exportLozadToGlobal = () => {\n  window.$lozad = lozad as any\n}\n","/**\n * @file highlight.js\n * @module service.highlight\n * @author Surmon <https://github.com/surmon-china>\n */\n\n// MARK: vite.config.js\nimport hljs from 'highlight.js/lib/core'\nimport go from 'highlight.js/lib/languages/go'\nimport css from 'highlight.js/lib/languages/css'\nimport sql from 'highlight.js/lib/languages/sql'\nimport php from 'highlight.js/lib/languages/php'\nimport xml from 'highlight.js/lib/languages/xml'\nimport yaml from 'highlight.js/lib/languages/yaml'\nimport json from 'highlight.js/lib/languages/json'\nimport bash from 'highlight.js/lib/languages/bash'\nimport less from 'highlight.js/lib/languages/less'\nimport scss from 'highlight.js/lib/languages/scss'\nimport rust from 'highlight.js/lib/languages/rust'\nimport java from 'highlight.js/lib/languages/java'\nimport shell from 'highlight.js/lib/languages/shell'\nimport nginx from 'highlight.js/lib/languages/nginx'\nimport stylus from 'highlight.js/lib/languages/stylus'\nimport python from 'highlight.js/lib/languages/python'\nimport javascript from 'highlight.js/lib/languages/javascript'\nimport typescript from 'highlight.js/lib/languages/typescript'\n\nimport 'highlight.js/styles/github-dark-dimmed.css'\n\nconst languages = {\n  go,\n  css,\n  sql,\n  php,\n  xml,\n  yaml,\n  json,\n  bash,\n  less,\n  scss,\n  rust,\n  java,\n  shell,\n  nginx,\n  stylus,\n  python,\n  javascript,\n  typescript\n}\n\nObject.keys(languages).forEach((name) => hljs.registerLanguage(name, languages[name]))\n\nexport default hljs\n","/**\n * @file Site inner link transformer\n * @module transformer.relink\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { TagMap } from '/@/store/tag'\nimport { getTagArchiveRoute } from './route'\n\nexport default (text: string, tagMap: TagMap) => {\n  // 构造正则\n  const tagNames = Object.keys(tagMap).sort((prev, next) => next.length - prev.length)\n  const tagRegexp = eval(`/${tagNames.join('|')}/ig`)\n\n  // 如果是 URL 则不处理\n  try {\n    new URL(text)\n    return text\n  } catch (error) {\n    return text.replace(tagRegexp, (tagText) => {\n      // 从 map 中匹配自身\n      const foundTag = tagMap.get(tagText)\n\n      // 找不到，或找到匹配的，但 text 字首为 #，则证明是外站连接，则不解析\n      if (!foundTag || text[0] === '#') return tagText\n\n      const slug = foundTag.slug\n      const path = getTagArchiveRoute(slug)\n      const command = `window.$app.config.globalProperties.$router.push({ path: \\'${path}\\' });return false`\n      return `<a href=\\\"${path}\\\" title=\\\"${foundTag.description}\\\" onclick=\\\"${command}\\\">${tagText}</a>`\n    })\n  }\n}\n","/**\n * @file Markdown parser\n * @module transformer.markdown\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport escapeHTML from 'escape-html'\nimport sanitizeHTML from 'sanitize-html'\nimport { marked, Renderer } from 'marked'\nimport { TagMap } from '/@/store/tag'\nimport { LOZAD_CLASS_NAME } from '/@/services/lozad'\nimport highlight from '/@/services/highlight'\nimport relink from '/@/transforms/relink'\nimport { META } from '/@/config/app.config'\nimport API_CONFIG from '/@/config/api.config'\n\nconst trimHTML = (html: string) => html.replace(/\\s+/g, ' ').replace(/\\n/g, ' ')\ninterface RendererGetterOption {\n  sanitize: boolean\n  text: (text: string) => string\n  headingID: (text: string, level: number, raw: string) => string\n}\nconst getRenderer = (options?: Partial<RendererGetterOption>) => {\n  const renderer = new Renderer()\n\n  // text\n  renderer.text = (text) => {\n    return options?.text ? options.text(text) : text\n  }\n\n  // html: escape > sanitize\n  renderer.html = (html) => {\n    // https://github.com/apostrophecms/sanitize-html#default-options\n    return options?.sanitize ? sanitizeHTML(escapeHTML(html)) : html\n  }\n\n  // heading\n  renderer.heading = (text, level, raw) => {\n    const idText = options?.headingID ? `id=${options.headingID(text, level, raw)}` : ''\n    return `<h${level} ${idText} alt=${text} title=${text}>${text}</h${level}>`\n  }\n\n  // paragraph\n  renderer.paragraph = (text) => `<p>${text}</p>`\n\n  // checkbox\n  renderer.checkbox = (checked) => {\n    return checked\n      ? `<i class=\"checkbox checked iconfont icon-checkbox-selected\"></i>`\n      : `<i class=\"checkbox iconfont icon-checkbox-unselected\"></i>`\n  }\n\n  // link: sanitize\n  renderer.link = (href, title, text) => {\n    const isSelf = href?.includes(META.domain)\n    const textIsImage = text.includes('<img')\n    const linkHTML = trimHTML(`\n      <a\n        href=\"${href}\"\n        target=\"_blank\"\n        class=\"${textIsImage ? 'image-link' : 'link'}\"\n        title=\"${title || (textIsImage ? href : text)}\"\n        ${isSelf ? '' : 'rel=\"external nofollow noopener\"'}\n      >\n        ${text}\n      </a>\n    `)\n\n    return !options?.sanitize\n      ? linkHTML\n      : sanitizeHTML(linkHTML, {\n          allowedTags: ['a'],\n          allowedAttributes: {\n            a: ['href', 'target', 'class', 'title', 'rel', 'data-*']\n          }\n        })\n  }\n\n  // image: sanitize > popup\n  renderer.image = (src, title, alt) => {\n    // HTTP > proxy\n    const source = src?.replace(/^http:\\/\\//gi, `${API_CONFIG.PROXY}/`)\n    const imageHTML = trimHTML(`\n      <img\n        class=\"${LOZAD_CLASS_NAME}\"\n        data-src=\"${source}\"\n        title=\"${title || alt || META.domain}\"\n        alt=\"${alt || title || source}\"\n        onclick=\"window.$popup?.vImage('${source}')\"\n      />\n    `)\n\n    return !options?.sanitize\n      ? imageHTML\n      : sanitizeHTML(imageHTML, {\n          allowedTags: ['img'],\n          allowedAttributes: {\n            img: ['alt', 'onclick', 'class', 'title', 'data-*']\n          }\n        })\n  }\n\n  // code: line number\n  renderer.code = function (code, lang, escaped) {\n    if (renderer.options.highlight) {\n      const output = renderer.options.highlight(code, lang || '')\n      if (output != null && output !== code) {\n        escaped = true\n        code = output\n      }\n    }\n\n    const lineNumbers = code\n      .split('\\n')\n      .map((_, i) => `<li class=\"code-line-number\">${i + 1}</li>`.replace(/\\s+/g, ' '))\n      .join('')\n\n    const readOnlyAttrs = `\n      contenteditable=\"true\"\n      oncut=\"return false\"\n      onpaste=\"return false\"\n      onkeydown=\"if(event.metaKey) return true; return false;\"\n    `\n\n    return lang\n      ? `\n        <pre data-lang=\"${lang}\">\n          <ul class=\"code-lines\">${lineNumbers}</ul>\n          <code\n            ${readOnlyAttrs}\n            class=\"${renderer.options.langPrefix}${escape(lang)}\"\n          >${escaped ? code : escape(code)}\\n</code>\n        </pre>\\n\n      `\n      : `\n        <pre>\n          <ul class=\"code-lines\">${lineNumbers}</ul>\n          <code ${readOnlyAttrs}>${escaped ? code : escape(code)}\\n</code>\n        </pre>\n      `\n  }\n\n  return renderer\n}\n\nmarked.setOptions({\n  gfm: true,\n  breaks: false,\n  pedantic: false,\n  smartLists: true,\n  smartypants: false,\n  langPrefix: 'hljs language-',\n  highlight(code, language) {\n    return highlight.getLanguage(language)\n      ? highlight.highlight(code, { language }).value\n      : highlight.highlightAuto(code).value\n  }\n})\n\nexport interface MarkdownRenderOption {\n  sanitize?: boolean\n  relink?: boolean\n  tagMap?: TagMap\n  headingIDRenderer?: RendererGetterOption['headingID']\n}\nexport const markdownToHTML = (markdown: string, options?: MarkdownRenderOption) => {\n  if (!markdown || typeof markdown !== 'string') {\n    return ''\n  }\n\n  const parseOptions: marked.MarkedOptions = {\n    renderer: getRenderer({ headingID: options?.headingIDRenderer })\n  }\n\n  // relink\n  if (options?.relink) {\n    parseOptions.renderer = getRenderer({\n      text: (text) => relink(text, options.tagMap as TagMap),\n      headingID: options?.headingIDRenderer\n    })\n  }\n\n  // sanitize\n  if (options?.sanitize) {\n    parseOptions.renderer = getRenderer({ sanitize: true, headingID: options?.headingIDRenderer })\n  }\n\n  return marked.parse(markdown, parseOptions)\n}\n","/**\n * @file 模拟延时器\n * @module util.fetch-delay\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { DEFAULT_FETCH_DELAY } from '/@/config/app.config'\n\nexport const fetchDelay = (delay: number = DEFAULT_FETCH_DELAY) => {\n  // 一个卑鄙的手段\n  const start = new Date().getTime()\n  return (action: $TODO) => {\n    // 卑鄙手段\n    const end = new Date().getTime()\n    const time = end - start\n    const timeout = delay - time\n    const isDelay = timeout > 0\n    isDelay ? window.setTimeout(action, timeout) : action()\n  }\n}\n","/**\n * @file Article state\n * @module store.article\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineStore } from 'pinia'\nimport { SortType, OriginState } from '/@/constants/state'\nimport { getArticleContentHeadingElementID } from '/@/constants/anchor'\nimport { markdownToHTML } from '/@/transforms/markdown'\nimport { fetchDelay } from '/@/utils/fetch-delay'\nimport { Category } from './category'\nimport { Tag } from './tag'\nimport nodepress from '/@/services/nodepress'\n\nexport const ARTICLE_API_PATH = '/article'\nexport const LIKE_ARTICLE_API_PATH = '/like/article'\n\nexport interface Article {\n  id: number\n  _id: string\n  title: string\n  description: string\n  content: string\n  keywords: string[]\n  thumb: string\n  meta: {\n    likes: number\n    views: number\n    comments: number\n  }\n  origin: OriginState\n  update_at: string\n  create_at: string\n  tag: Tag[]\n  category: Category[]\n  related: Article[]\n}\n\nexport const useArticleStore = defineStore('article', {\n  state: () => ({\n    hotList: {\n      fetched: false,\n      fetching: false,\n      data: [] as Array<Article>\n    },\n    list: {\n      fetching: false,\n      data: [] as Array<Article>,\n      pagination: null as null | $TODO\n    }\n  }),\n  actions: {\n    // 获取文章列表\n    fetchList(params: any = {}) {\n      const isRestart = !params.page || params.page === 1\n      const isLoadMore = !isRestart && params.page > 1\n\n      // 清空已有数据\n      if (isRestart) {\n        this.list.data = []\n        this.list.pagination = null\n      }\n\n      this.list.fetching = true\n      return nodepress\n        .get<any>(ARTICLE_API_PATH, { params })\n        .then((response) => {\n          if (isLoadMore) {\n            this.list.data.push(...response.result.data)\n            this.list.pagination = response.result.pagination\n          } else {\n            this.list.data = response.result.data\n            this.list.pagination = response.result.pagination\n          }\n        })\n        .finally(() => {\n          this.list.fetching = false\n        })\n    },\n\n    // 获取最热文章列表\n    fetchHotList() {\n      if (this.hotList.fetched) {\n        return Promise.resolve()\n      }\n\n      this.hotList.fetching = true\n      return nodepress\n        .get(ARTICLE_API_PATH, { params: { cache: 1, sort: SortType.Hot } })\n        .then((response) => {\n          this.hotList.data = response.result.data\n          this.hotList.fetched = true\n        })\n        .finally(() => {\n          this.hotList.fetching = false\n        })\n    }\n  }\n})\n\nexport interface ArticleHeading {\n  text: string\n  level: number\n  id: string\n}\nconst renderArticleMarkdown = (markdown: string): { html: string; headings: ArticleHeading[] } => {\n  const headings: Array<ArticleHeading> = []\n  const html = markdownToHTML(markdown, {\n    sanitize: false,\n    relink: false,\n    headingIDRenderer: (text, level, raw) => {\n      const id = getArticleContentHeadingElementID(\n        level,\n        raw.toLowerCase().replace(/[^a-zA-Z0-9\\u4E00-\\u9FA5]+/g, '-')\n      )\n      headings.push({ text, level, id })\n      return id\n    }\n  })\n\n  return { html, headings }\n}\n\nexport const useArticleDetailStore = defineStore('articleDetail', {\n  state: () => ({\n    fetching: false,\n    article: null as null | Article,\n    renderedFullContent: true\n  }),\n  getters: {\n    isLongContent(): boolean {\n      return Boolean(this.article && this.article.content.length > 16688)\n    },\n    splitIndex(): number | null {\n      if (this.article && this.isLongContent) {\n        const content = this.article.content\n        // 坐标优先级：H4 -> H3 -> Code -> \\n\\n\n        const shortContent = content.substring(0, 13688)\n        const lastH4Index = shortContent.lastIndexOf('\\n####')\n        const lastH3Index = shortContent.lastIndexOf('\\n###')\n        const lastCodeIndex = shortContent.lastIndexOf('\\n```')\n        const lastLineIndex = shortContent.lastIndexOf('\\n\\n**')\n        return Math.max(lastH4Index, lastH3Index, lastCodeIndex, lastLineIndex)\n      }\n      return null\n    },\n    defaultContent(): null | { markdown: string; html: string; headings: ArticleHeading[] } {\n      if (!this.article) {\n        return null\n      }\n      const markdown = this.isLongContent\n        ? this.article.content.substring(0, this.splitIndex!)\n        : this.article.content\n      const { html, headings } = renderArticleMarkdown(markdown)\n      return {\n        markdown,\n        html,\n        headings\n      }\n    },\n    moreContent(): null | { markdown: string; html: string; headings: ArticleHeading[] } {\n      if (this.article && this.isLongContent) {\n        const markdown = this.article.content.substring(this.splitIndex!)\n        const { html, headings } = renderArticleMarkdown(markdown)\n        return {\n          markdown,\n          html,\n          headings\n        }\n      }\n      return null\n    }\n  },\n  actions: {\n    // 阅读全文\n    renderFullContent() {\n      this.renderedFullContent = true\n    },\n\n    // 获取文章详情\n    fetchDetail(params: { delay?: number; articleID: number }) {\n      this.fetching = true\n      this.article = null\n      return nodepress\n        .get(`${ARTICLE_API_PATH}/${params.articleID}`)\n        .then((response) => {\n          return new Promise((resolve) => {\n            fetchDelay(params.delay || 0)(() => {\n              this.article = response.result\n              this.renderedFullContent = !this.isLongContent\n              resolve(void 0)\n            })\n          })\n        })\n        .finally(() => {\n          this.fetching = false\n        })\n    },\n\n    // 喜欢文章\n    postArticleLike(articleID: number) {\n      return nodepress.patch(LIKE_ARTICLE_API_PATH, { article_id: articleID }).then(() => {\n        if (this.article) {\n          this.article.meta.likes++\n        }\n      })\n    }\n  }\n})\n","/**\n * @file Announcement state\n * @module store.announcement\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineStore } from 'pinia'\nimport nodepress from '/@/services/nodepress'\n\nexport const useAnnouncementStore = defineStore('announcement', {\n  state: () => ({\n    fetching: false,\n    announcements: [] as Array<$TODO>\n  }),\n  actions: {\n    fetchList(params?: any) {\n      this.announcements = []\n      this.fetching = true\n      return nodepress\n        .get('/announcement', { params })\n        .then((response) => {\n          this.announcements = response.result.data\n        })\n        .finally(() => {\n          this.fetching = false\n        })\n    }\n  }\n})\n","/**\n * @file Swiper for vue\n * @module service.swiper\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { Swiper as SwiperClass, Pagination, Navigation, Mousewheel, Autoplay, A11y } from 'swiper'\nexport { Swiper, SwiperSlide } from 'swiper/vue'\n\nSwiperClass.use([Pagination, Navigation, Mousewheel, Autoplay, A11y])\n\nexport default SwiperClass\n","/**\n * @file Thumbnail transformer\n * @module transformer.thumbnail\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport gravatar from 'gravatar'\nimport API_CONFIG from '/@/config/api.config'\nimport { getFileCDNUrl } from '/@/transforms/url'\n\nexport const getBannerArticleThumbnailUrl = (\n  thumb: string,\n  isMobile: boolean,\n  isWebPImage: boolean\n) => {\n  if (!thumb) {\n    return getFileCDNUrl(\n      isMobile ? `/images/thumbnail/mobile-carrousel.jpg` : `/images/thumbnail/pc-carrousel.jpg`\n    )\n  }\n  if (isMobile) {\n    return `${thumb}?x-oss-process=style/blog.list.banner.mobile`\n  }\n\n  return `${thumb}?x-oss-process=${\n    isWebPImage\n      ? 'style/blog.list.banner.pc'\n      : 'image/auto-orient,1/resize,m_fill,w_1190,h_420/quality,q_90/format,jpg/watermark,text_U3VybW9uLm1l,type_ZHJvaWRzYW5zZmFsbGJhY2s,color_ffffff,size_32,g_sw,t_26,x_30,y_25'\n  }`\n}\n\nexport const getArchiveArticleThumbnailUrl = (thumb: string, isWebPImage: boolean) => {\n  if (!thumb) {\n    return getFileCDNUrl('/images/thumbnail/pc-article-list.jpg')\n  }\n\n  return `${thumb}?x-oss-process=${\n    isWebPImage\n      ? 'style/blog.list.item.pc'\n      : 'image/auto-orient,1/resize,m_fill,w_350,h_238/quality,q_80/format,jpg/watermark,text_U3VybW9uLm1l,type_ZHJvaWRzYW5zZmFsbGJhY2s,color_ffffff,size_20,g_sw,t_24,x_16,y_14'\n  }`\n}\n\nexport const getGravatarByEmail = (email: string) => {\n  const avatar = gravatar\n    .url(email, { protocol: 'https', s: '240' })\n    .replace('https://s.gravatar.com/avatar', API_CONFIG.GRAVATAR)\n  // avatar += `?x-oss-process=style/gravatar`\n  return avatar\n}\n","<template>\n  <div\n    class=\"carrousel\"\n    :class=\"{\n      mobile: isMobile,\n      dark: isDarkTheme\n    }\"\n  >\n    <placeholder :data=\"articleList.length\" :loading=\"fetching\">\n      <template #placeholder>\n        <empty class=\"article-empty\" key=\"empty\">\n          <i18n :lkey=\"LANGUAGE_KEYS.ARTICLE_PLACEHOLDER\" />\n        </empty>\n      </template>\n      <template #loading>\n        <div class=\"article-skeleton\" key=\"skeleton\">\n          <div class=\"title\">\n            <skeleton-line />\n          </div>\n          <div class=\"content\">\n            <div class=\"first\">\n              <skeleton-line />\n            </div>\n            <responsive desktop>\n              <skeleton-paragraph :lines=\"5\" />\n            </responsive>\n          </div>\n        </div>\n      </template>\n      <template #default>\n        <swiper\n          class=\"swiper\"\n          :autoplay=\"{ delay: 3500, disableOnInteraction: false }\"\n          :set-wrapper-size=\"true\"\n          :mousewheel=\"true\"\n          :observe-parents=\"true\"\n          :grab-cursor=\"false\"\n          :simulate-touch=\"false\"\n          :preload-images=\"false\"\n          :lazy=\"false\"\n          :pagination=\"{ clickable: true }\"\n        >\n          <swiper-slide v-for=\"(article, index) in articleList.slice(0, 9)\" :key=\"index\">\n            <div class=\"content\">\n              <template v-if=\"article.ad\">\n                <ulink class=\"link\" :href=\"article.url\">\n                  <img :src=\"article.src\" :alt=\"article.title\" />\n                  <div class=\"title\">\n                    <div class=\"background\"></div>\n                    <div class=\"prospect\">\n                      <span\n                        class=\"text\"\n                        :style=\"{\n                          backgroundImage: `url('${getThumbURL(article.src)}')`\n                        }\"\n                        >{{ article.title }}</span\n                      >\n                    </div>\n                  </div>\n                  <span class=\"ad-symbol\">\n                    <i18n :lkey=\"LANGUAGE_KEYS.AD\" />\n                  </span>\n                </ulink>\n              </template>\n              <template v-else>\n                <router-link :to=\"getArticleDetailRoute(article.id)\" class=\"link\">\n                  <img :src=\"getThumbURL(article.thumb)\" :alt=\"article.title\" draggable=\"false\" />\n                  <div class=\"title\">\n                    <div class=\"background\"></div>\n                    <div class=\"prospect\">\n                      <span\n                        class=\"text\"\n                        :style=\"{\n                          backgroundImage: `url('${getThumbURL(article.thumb)}')`\n                        }\"\n                        >{{ article.title }}</span\n                      >\n                    </div>\n                  </div>\n                </router-link>\n              </template>\n            </div>\n          </swiper-slide>\n        </swiper>\n      </template>\n    </placeholder>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, PropType } from 'vue'\n  import { Swiper, SwiperSlide } from '/@/services/swiper'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { getArticleDetailRoute } from '/@/transforms/route'\n  import { getBannerArticleThumbnailUrl } from '/@/transforms/thumbnail'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { Article } from '/@/store/article'\n\n  export default defineComponent({\n    name: 'ArchiveCarrousel',\n    components: {\n      Swiper,\n      SwiperSlide\n    },\n    props: {\n      articles: {\n        type: Array as PropType<Article[]>,\n        required: true\n      },\n      fetching: {\n        type: Boolean,\n        required: true\n      }\n    },\n    setup(props) {\n      const { globalState, adConfig, isMobile, isDarkTheme } = useEnhancer()\n      const articleList = computed(() => {\n        const articles: Array<Article | any> = [...props.articles].slice(0, 9)\n        if (adConfig.value.PC_CARROUSEL) {\n          const { index, ...otherConfig } = adConfig.value.PC_CARROUSEL\n          articles.length &&\n            articles.splice(index, 0, {\n              ad: true,\n              ...otherConfig\n            } as any)\n        }\n        return articles\n      })\n\n      const getThumbURL = (thumb: string): string => {\n        return getBannerArticleThumbnailUrl(\n          thumb,\n          isMobile.value,\n          globalState.imageExt.value.isWebP\n        )\n      }\n\n      return {\n        LANGUAGE_KEYS,\n        isMobile,\n        isDarkTheme,\n        articleList,\n        getArticleDetailRoute,\n        getThumbURL\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  $pc-carrousel-height: 210px;\n  $mobile-carrousel-height: calc((100vw - 2rem) * 0.34);\n\n  .carrousel {\n    height: $pc-carrousel-height;\n    margin-bottom: $lg-gap;\n    position: relative;\n    @include common-bg-module();\n    @include radius-box($lg-radius);\n\n    .article-empty {\n      font-size: $font-size-h1;\n      font-weight: bold;\n    }\n\n    .article-skeleton {\n      position: relative;\n      width: 100%;\n      height: 100%;\n      padding: 2rem;\n\n      .content {\n        width: 50%;\n        margin-top: 2.6rem;\n        margin-left: 1rem;\n\n        .first {\n          width: 8rem;\n          height: $gap * 2;\n          margin-bottom: $gap;\n        }\n      }\n\n      .title {\n        position: absolute;\n        top: 2rem;\n        right: 2rem;\n        height: 2.6rem;\n        width: 18rem;\n      }\n    }\n\n    &.dark {\n      .swiper-slide {\n        .title {\n          .prospect {\n            .text {\n              -webkit-text-fill-color: $text !important;\n            }\n          }\n        }\n      }\n    }\n\n    .swiper {\n      width: 595px;\n      height: $pc-carrousel-height;\n\n      // filter for slide when transitioning\n      ::v-deep(.swiper-wrapper[style*='300ms']) {\n        .swiper-slide-active {\n          .content {\n            @include blur-filter('horizontal');\n          }\n        }\n      }\n\n      ::v-deep(.swiper-pagination) {\n        .swiper-pagination-bullet-active {\n          width: 2rem;\n        }\n      }\n\n      .content {\n        width: 100%;\n        height: $pc-carrousel-height;\n        position: relative;\n        overflow: hidden;\n\n        > .link {\n          display: block;\n          width: 100%;\n          height: 100%;\n        }\n\n        img {\n          width: 100%;\n          transform: scale(1);\n          transition: transform $transition-time-normal;\n\n          &:hover {\n            transform: scale(1.06);\n          }\n        }\n\n        .ad-symbol {\n          display: block;\n          position: absolute;\n          top: 5.6rem;\n          right: 2.6rem;\n          font-size: $font-size-small;\n          color: $module-bg;\n          border-radius: $mini-radius;\n          padding: 0.1em 0.3em;\n          border: 1px solid;\n        }\n\n        .title {\n          $offset: 3px;\n          display: block;\n          position: absolute;\n          top: 2rem;\n          right: 2.6rem;\n          opacity: 0.8;\n          transition: opacity $transition-time-normal;\n\n          .background {\n            content: '';\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            z-index: -1;\n            top: 0;\n            left: 0;\n            background-color: $module-bg;\n            transform: translate3d($offset, -$offset, 0);\n            transition: transform $transition-time-fast;\n          }\n\n          .prospect {\n            padding: 0 1em;\n            height: 2em;\n            line-height: 2em;\n            @include text-overflow;\n            background-color: $module-bg-opaque;\n            background-position: top right;\n            transform: translate3d(-$offset, $offset, 0);\n            transition: transform $transition-time-fast;\n\n            .text {\n              letter-spacing: 0.3px;\n              font-weight: bold;\n              color: $text;\n              background-clip: text;\n              -webkit-background-clip: text;\n              -webkit-text-fill-color: transparent;\n            }\n          }\n\n          &:hover {\n            opacity: 1;\n            .background {\n              transform: translate3d(0, 0, 0);\n            }\n            .prospect {\n              transform: translate3d(0, 0, 0);\n            }\n          }\n        }\n      }\n    }\n\n    &.mobile {\n      margin-bottom: $gap;\n      height: $mobile-carrousel-height;\n\n      > .swiper {\n        width: 100%;\n        height: $mobile-carrousel-height;\n\n        .swiper-slide {\n          > .content {\n            height: $mobile-carrousel-height;\n\n            > .title {\n              right: 1.7rem;\n              max-width: 70%;\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","/**\n * @file Time transformer\n * @module transformer.moment\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { Language } from '/@/language/data'\n\nexport const TEXT_MAP = {\n  AM: {\n    [Language.En]: 'am',\n    [Language.Zh]: '上午'\n  },\n  PM: {\n    [Language.En]: 'pm',\n    [Language.Zh]: '下午'\n  },\n  AGO: {\n    [Language.En]: ' ago',\n    [Language.Zh]: '前'\n  },\n  JUST_NOW: {\n    [Language.En]: 'Just now',\n    [Language.Zh]: '刚刚'\n  },\n  MINUTES: {\n    [Language.En]: 'minutes',\n    [Language.Zh]: '分钟'\n  },\n  HOURS: {\n    [Language.En]: 'hours',\n    [Language.Zh]: '小时'\n  },\n  WEEKS: {\n    [Language.En]: 'weeks',\n    [Language.Zh]: '周'\n  },\n  DAYS: {\n    [Language.En]: 'days',\n    [Language.Zh]: '天'\n  },\n  MONTHS: {\n    [Language.En]: 'months',\n    [Language.Zh]: '个月'\n  },\n  YEARS: {\n    [Language.En]: 'years',\n    [Language.Zh]: '年'\n  },\n  WEEKDAYS: {\n    [Language.En]: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],\n    [Language.Zh]: ['一', '二', '三', '四', '五', '六', '日']\n  }\n}\n\nexport const textHumanizer = (language: Language) => {\n  return (langData: any) => langData[language]\n}\n\nexport const cloneDate = (date: Date) => {\n  return new Date(date.getTime())\n}\n\n// Deconstruction date\nexport type HumanDate = ReturnType<typeof dateToHuman>\nexport const dateToHuman = (date: Date) => {\n  const week = date.getDay()\n  return {\n    day: date.getDate(),\n    week: week === 0 ? 7 : week,\n    month: date.getMonth() + 1,\n    year: date.getFullYear()\n  }\n}\n\n// HumanData -> date\nexport const humanToDate = (humanDate: Omit<HumanDate, 'week'>) => {\n  const date = new Date()\n  date.setDate(humanDate.day)\n  date.setFullYear(humanDate.year)\n  date.setMonth(humanDate.month - 1)\n  return date\n}\n\n// HumanData -> like: 2016-01-02\nexport const humanDateToYMD = (\n  { year, month, day }: Partial<Omit<HumanDate, 'week'>>,\n  separator = '-'\n) => {\n  const _month = month ? separator + String(month).padStart(2, '0') : ''\n  const _day = day ? separator + String(day).padStart(2, '0') : ''\n  return `${year}${_month}${_day}`\n}\n\nexport const isSameHumanDay = (target: HumanDate, target2: HumanDate) => {\n  return (\n    target.day === target2.day && target.month === target2.month && target.year === target2.year\n  )\n}\n\n// Date -> like: 2016-01-02\nexport const dateToYMD = (date: Date) => {\n  return humanDateToYMD(dateToHuman(date))\n}\n\n// YMD (2016-01-02) -> Date\nexport const ymdToDate = (date: string) => {\n  const [year, month, day] = date.split('-').map(Number)\n  return humanToDate({ year, month, day })\n}\n\n// Date -> local date string\nexport const toLocalString = (date: string) => {\n  return date ? new Date(date).toLocaleString() : date\n}\n\n// 相对时间过滤器，传入时间，返回距离今天有多久\nexport const timeAgo = (_time: string | number | Date, language: Language) => {\n  const time = _time instanceof Date ? _time : new Date(_time)\n  const between = Date.now() / 1000 - Number(time) / 1000\n  const hourS = 3600\n  const dayS = hourS * 24\n  const weekS = dayS * 7\n  const monthS = dayS * 30\n  const yearS = monthS * 12\n\n  const humanText = textHumanizer(language)\n  const pluralize = (time: number, label: string) => {\n    return `${time} ${label}${humanText(TEXT_MAP.AGO)}`\n  }\n\n  if (between < hourS) {\n    return ~~(between / 60) === 0\n      ? humanText(TEXT_MAP.JUST_NOW)\n      : pluralize(~~(between / 60), humanText(TEXT_MAP.MINUTES))\n  }\n  if (between < dayS) {\n    return pluralize(~~(between / hourS), humanText(TEXT_MAP.HOURS))\n  }\n  if (between < weekS) {\n    return pluralize(~~(between / dayS), humanText(TEXT_MAP.DAYS))\n  }\n  if (between < monthS) {\n    return pluralize(~~(between / weekS), humanText(TEXT_MAP.WEEKS))\n  }\n  if (between < yearS) {\n    return pluralize(~~(between / monthS), humanText(TEXT_MAP.MONTHS))\n  }\n  return pluralize(~~(between / yearS), humanText(TEXT_MAP.YEARS))\n}\n\n// Date to YMD am/pm\nexport const humanizeYMD = (date: string, language: Language) => {\n  if (!date) {\n    return date\n  }\n  const newDate = new Date(date)\n  const year = newDate.getFullYear()\n  const month = newDate.getMonth() + 1\n  const day = newDate.getDate()\n  const hour =\n    newDate.getHours() > 11\n      ? textHumanizer(language)(TEXT_MAP.PM)\n      : textHumanizer(language)(TEXT_MAP.AM)\n  return `${year}/${month}/${day} ${hour}`\n}\n","<template>\n  <div\n    class=\"announcement\"\n    :class=\"{\n      mobile: isMobile,\n      dark: isDarkTheme\n    }\"\n  >\n    <placeholder :data=\"announcements.length\" :loading=\"fetching\">\n      <template #placeholder>\n        <empty class=\"announcement-empty\" key=\"empty\">\n          <i18n :lkey=\"LANGUAGE_KEYS.ARTICLE_PLACEHOLDER\" />\n        </empty>\n      </template>\n      <template #loading>\n        <div class=\"announcement-skeleton\" key=\"skeleton\">\n          <div class=\"left\">\n            <skeleton-line />\n          </div>\n          <div class=\"right\">\n            <skeleton-line />\n          </div>\n        </div>\n      </template>\n      <template #default>\n        <div class=\"warpper\" key=\"warpper\">\n          <desktop-only>\n            <div\n              class=\"background\"\n              :data-content=\"parseContent(announcements[activeIndex]?.content)\"\n            />\n          </desktop-only>\n          <div class=\"title\">\n            <span class=\"icon-box\" :style=\"{ transform: `rotate(-${activeIndex * 135}deg)` }\">\n              <i class=\"iconfont icon-windmill\" />\n            </span>\n          </div>\n          <div class=\"swiper-box\">\n            <swiper\n              class=\"swiper\"\n              direction=\"vertical\"\n              :height=\"42\"\n              :allow-touch-move=\"false\"\n              :slides-per-view=\"1\"\n              :set-wrapper-size=\"true\"\n              :autoplay=\"{ delay: 3500, disableOnInteraction: false }\"\n              @transition-start=\"handleSwiperTransitionStart\"\n              @swiper=\"onSwiper\"\n            >\n              <swiper-slide v-for=\"(ann, index) in announcements\" :key=\"index\">\n                <div class=\"content\" v-html=\"parseContent(ann.content)\" />\n                <desktop-only>\n                  <div class=\"date\">{{ humanlizeDate(ann.create_at) }}</div>\n                </desktop-only>\n              </swiper-slide>\n            </swiper>\n            <div class=\"navigation\">\n              <div class=\"button prev\" :class=\"{ disabled: activeIndex === 0 }\" @click=\"prevSlide\">\n                <i class=\"iconfont icon-announcement-prev\" />\n              </div>\n              <div\n                class=\"button next\"\n                :class=\"{ disabled: activeIndex === announcements.length - 1 }\"\n                @click=\"nextSlide\"\n              >\n                <i class=\"iconfont icon-announcement-next\" />\n              </div>\n            </div>\n          </div>\n        </div>\n      </template>\n    </placeholder>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, PropType } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import SwiperClass, { Swiper, SwiperSlide } from '/@/services/swiper'\n  import { markdownToHTML } from '/@/transforms/markdown'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { timeAgo } from '/@/transforms/moment'\n\n  export default defineComponent({\n    name: 'ArchiveAnnouncement',\n    components: {\n      Swiper,\n      SwiperSlide\n    },\n    props: {\n      announcements: {\n        type: Array as PropType<Array<$TODO>>,\n        required: true\n      },\n      fetching: {\n        type: Boolean,\n        required: true\n      }\n    },\n    setup() {\n      const { i18n, isMobile, isDarkTheme } = useEnhancer()\n      const activeIndex = ref(0)\n      const swiper = ref<SwiperClass>()\n      const onSwiper = (_swiper: SwiperClass) => {\n        swiper.value = _swiper\n      }\n\n      const humanlizeDate = (date: string) => {\n        return timeAgo(date, i18n.language.value as any)\n      }\n\n      const parseContent = (content: string) => {\n        return markdownToHTML(content)\n      }\n\n      const prevSlide = () => swiper.value?.slidePrev()\n      const nextSlide = () => swiper.value?.slideNext()\n      const handleSwiperTransitionStart = () => {\n        activeIndex.value = swiper.value?.activeIndex || 0\n      }\n\n      return {\n        LANGUAGE_KEYS,\n        isMobile,\n        isDarkTheme,\n        activeIndex,\n        humanlizeDate,\n        parseContent,\n        prevSlide,\n        nextSlide,\n        onSwiper,\n        handleSwiperTransitionStart\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @use 'sass:math';\n  @import 'src/styles/init.scss';\n\n  $announcement-height: 42px;\n  $title-width: 10%;\n  $content-width: 100% - $title-width;\n  $demarcation-width: 74%;\n\n  .announcement {\n    position: relative;\n    margin-bottom: $lg-gap;\n    height: $announcement-height;\n    line-height: $announcement-height;\n    font-size: $font-size-h6;\n    color: $text-secondary;\n    @include common-bg-module();\n    @include radius-box($xs-radius);\n\n    .announcement-empty {\n      height: 100%;\n      min-height: auto;\n    }\n\n    .announcement-skeleton {\n      display: flex;\n      width: 100%;\n      height: 100%;\n      padding: $sm-gap;\n\n      .left {\n        width: 68%;\n        margin-right: $gap;\n      }\n      .right {\n        flex: 1;\n      }\n    }\n\n    &.mobile {\n      margin-bottom: $gap;\n      .swiper-box {\n        .swiper {\n          .swiper-slide {\n            .content {\n              max-width: 100%;\n            }\n          }\n        }\n      }\n    }\n\n    &.dark {\n      .background {\n        &::after {\n          background: $module-bg-darker-1;\n        }\n      }\n    }\n\n    .background {\n      position: absolute;\n      width: $demarcation-width;\n      height: 100%;\n      background: linear-gradient(66deg, $module-bg-opaque, $module-bg-lighter 66%);\n\n      &::before {\n        content: attr(data-content);\n        display: block;\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        font-size: 6em;\n        font-weight: bold;\n        direction: rtl;\n        opacity: 0.2;\n        z-index: -1;\n        @include text-overflow(clip);\n      }\n\n      &::after {\n        $size: 1rem;\n        content: '';\n        display: block;\n        position: absolute;\n        width: $size;\n        height: 200%;\n        top: -50%;\n        right: -#{math.div($size, 2)};\n        background: $body-bg;\n        transform: rotate(18deg);\n      }\n    }\n\n    .title {\n      float: left;\n      width: $title-width;\n      text-align: center;\n      font-size: $font-size-base;\n\n      .icon-box {\n        display: inline-block;\n        transform: rotate(0deg);\n        transition: transform 0.3s;\n      }\n    }\n\n    .swiper-box {\n      float: right;\n      display: flex;\n      width: $content-width;\n\n      .swiper {\n        flex: 1;\n        height: $announcement-height;\n\n        ::v-deep(.swiper-wrapper) {\n          flex-direction: column;\n          // Filter for slide when transitioning\n          &[style*='300ms'] {\n            .swiper-slide-active {\n              .content {\n                @include blur-filter('vertical-small');\n              }\n            }\n          }\n        }\n\n        .swiper-slide {\n          width: auto;\n          display: flex;\n          justify-content: space-between;\n          height: $announcement-height;\n\n          .content {\n            max-width: 76%;\n            position: relative;\n            font-weight: bold;\n            @include text-overflow();\n\n            ::v-deep(p) {\n              margin: 0;\n              max-width: 100%;\n              @include text-overflow();\n            }\n\n            a {\n              border-bottom: 1px solid;\n            }\n          }\n\n          .date {\n            color: $text-dividers;\n            margin-right: $xs-gap;\n          }\n        }\n      }\n\n      .navigation {\n        display: flex;\n        flex-direction: column;\n        width: 3rem;\n        height: $announcement-height;\n\n        .button {\n          height: 50%;\n          text-align: center;\n          color: $text-dividers;\n          cursor: pointer;\n          @include color-transition();\n\n          &:hover {\n            color: $text;\n          }\n\n          &.disabled {\n            opacity: 0.8;\n            color: $text-dividers;\n            cursor: no-drop;\n          }\n\n          &.prev {\n            line-height: 2;\n          }\n\n          &.next {\n            line-height: 1.4;\n          }\n        }\n      }\n    }\n  }\n</style>\n","/**\n * @file Storage constant\n * @module constant.storage\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const THEME = 'theme'\nexport const USER = 'user'\nexport const USER_LIKE_HISTORY = 'user_like_history'\n","/**\n * @file App state transformer\n * @module transformer.state\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { ref, onMounted, watchEffect } from 'vue'\nimport { getAccessor } from '/@/services/storage'\nimport { OriginState } from '/@/constants/state'\nimport { USER_LIKE_HISTORY } from '/@/constants/storage'\n\nexport const isOriginalType = (originState?: OriginState) => {\n  return originState == null || originState === OriginState.Original\n}\nexport const isHybridType = (originState: OriginState) => originState === OriginState.Hybrid\nexport const isReprintType = (originState: OriginState) => originState === OriginState.Reprint\n\nexport const getExtendsValue = (target: any, key: string) => {\n  if (!target?.extends?.length) {\n    return null\n  }\n  const targetExtend = target.extends.find((t) => t.name === key)\n  return targetExtend ? targetExtend.value : null\n}\n\nconst defaultUserLikeHistory = {\n  pages: [] as number[],\n  comments: [] as number[]\n}\n\nconst getUserLikeHistory = () => {\n  return getAccessor(USER_LIKE_HISTORY, defaultUserLikeHistory)\n}\n\nexport const usePageLike = (postId: number) => {\n  const isLiked = ref(false)\n  let likeHistory = null as any\n\n  onMounted(() => {\n    likeHistory = getUserLikeHistory()\n    watchEffect(() => {\n      isLiked.value = likeHistory.value.pages.includes(postId)\n    })\n  })\n\n  return {\n    isLiked,\n    like: () => likeHistory.value.pages.push(postId)\n  }\n}\n\nexport const useCommentsLike = () => {\n  const userLikeHistory = ref({ ...defaultUserLikeHistory })\n\n  onMounted(() => {\n    const liveHistory = getUserLikeHistory()\n    watchEffect(() => {\n      userLikeHistory.value = liveHistory.value\n    })\n  })\n\n  return {\n    isLiked: (commentId: number) => userLikeHistory.value.comments.includes(commentId),\n    like: (commentId: number) => userLikeHistory.value.comments.push(commentId)\n  }\n}\n","<template>\n  <div class=\"article-list-item\" :class=\"{ mobile: isMobile }\" @click=\"handleClick\">\n    <desktop-only>\n      <div\n        class=\"item-background\"\n        :style=\"{\n          backgroundImage: `url(${getThumbUrl(article.thumb)})`\n        }\"\n      />\n    </desktop-only>\n    <div class=\"item-content\">\n      <desktop-only>\n        <div class=\"item-thumb\">\n          <router-link :to=\"getArticleDetailRoute(article.id)\">\n            <span\n              class=\"item-oirigin\"\n              :class=\"{\n                self: isOriginal,\n                other: isReprint,\n                hybrid: isHybrid\n              }\"\n            >\n              <i18n :lkey=\"LANGUAGE_KEYS.ORIGIN_ORIGINAL\" v-if=\"isOriginal\" />\n              <i18n :lkey=\"LANGUAGE_KEYS.ORIGIN_REPRINT\" v-else-if=\"isReprint\" />\n              <i18n :lkey=\"LANGUAGE_KEYS.ORIGIN_HYBRID\" v-else-if=\"isHybrid\" />\n            </span>\n            <img\n              class=\"item-thumb-img\"\n              :src=\"getThumbUrl(article.thumb)\"\n              :alt=\"article.title\"\n              :title=\"article.title\"\n            />\n          </router-link>\n        </div>\n      </desktop-only>\n      <div class=\"item-body\">\n        <h5 class=\"item-title\">\n          <router-link :to=\"getArticleDetailRoute(article.id)\" :title=\"article.title\">\n            {{ article.title }}\n          </router-link>\n        </h5>\n        <p\n          class=\"item-description\"\n          style=\"-webkit-box-orient: vertical\"\n          v-html=\"article.description\"\n        ></p>\n        <div class=\"item-meta\">\n          <span class=\"date\">\n            <i class=\"iconfont icon-clock\"></i>\n            <span>{{ humanlizeDate(article.create_at) }}</span>\n          </span>\n          <span class=\"views\">\n            <i class=\"iconfont icon-eye\"></i>\n            <span>{{ article.meta.views || 0 }}</span>\n          </span>\n          <span class=\"comments\">\n            <i class=\"iconfont icon-comment\"></i>\n            <span>{{ article.meta.comments || 0 }}</span>\n          </span>\n          <span class=\"likes\">\n            <i class=\"iconfont icon-heart\" :class=\"{ liked: isLiked }\"></i>\n            <span>{{ article.meta.likes || 0 }}</span>\n          </span>\n          <span class=\"tags\">\n            <i class=\"iconfont icon-tag\"></i>\n            <span>{{ article.tag.length || 0 }}</span>\n          </span>\n          <desktop-only>\n            <span class=\"categories\">\n              <i class=\"iconfont icon-category\"></i>\n              <placeholder :transition=\"false\" :data=\"article.category.length\">\n                <template #placeholder>\n                  <i18n :lkey=\"LANGUAGE_KEYS.CATEGORY_PLACEHOLDER\" />\n                </template>\n                <template #default>\n                  <router-link\n                    v-for=\"(category, index) in article.category.slice(0, 1)\"\n                    :key=\"index\"\n                    :to=\"getCategoryArchiveRoute(category.slug)\"\n                  >\n                    <i18n :zh=\"category.name\" :en=\"category.slug\" />\n                  </router-link>\n                </template>\n              </placeholder>\n            </span>\n          </desktop-only>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, computed, onMounted } from 'vue'\n  import { useGlobalState } from '/@/app/state'\n  import { useI18n } from '/@/services/i18n'\n  import { getJSON } from '/@/services/storage'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { USER_LIKE_HISTORY } from '/@/constants/storage'\n  import {\n    getArticleDetailRoute,\n    getTagArchiveRoute,\n    getCategoryArchiveRoute\n  } from '/@/transforms/route'\n  import { getArchiveArticleThumbnailUrl } from '/@/transforms/thumbnail'\n  import { isOriginalType, isHybridType, isReprintType } from '/@/transforms/state'\n  import { timeAgo } from '/@/transforms/moment'\n\n  export enum Events {\n    Click = 'click'\n  }\n  export default defineComponent({\n    name: 'ArticleListItem',\n    props: {\n      article: {\n        type: Object as any,\n        required: true\n      }\n    },\n    emits: [Events.Click],\n    setup(props, context) {\n      const i18n = useI18n()\n      const globalState = useGlobalState()\n\n      // eslint-disable-next-line vue/no-setup-props-destructure\n      const { origin } = props.article\n      const isLiked = ref(false)\n      const isMobile = computed(() => globalState.userAgent.isMobile)\n      const isHybrid = isHybridType(origin)\n      const isReprint = isReprintType(origin)\n      const isOriginal = isOriginalType(origin)\n\n      const handleClick = (event: MouseEvent) => {\n        context.emit(Events.Click, event)\n      }\n\n      const humanlizeDate = (date: string) => {\n        return timeAgo(date, i18n.language.value as any)\n      }\n\n      const getThumbUrl = (thumbUrl: string) => {\n        return getArchiveArticleThumbnailUrl(thumbUrl, globalState.imageExt.value.isWebP)\n      }\n\n      onMounted(() => {\n        const localHistoryLikes = getJSON(USER_LIKE_HISTORY)\n        isLiked.value = !!localHistoryLikes?.pages?.includes(props.article.id)\n      })\n\n      return {\n        LANGUAGE_KEYS,\n        isLiked,\n        isMobile,\n        isHybrid,\n        isReprint,\n        isOriginal,\n        handleClick,\n        getThumbUrl,\n        getArticleDetailRoute,\n        getCategoryArchiveRoute,\n        getTagArchiveRoute,\n        humanlizeDate\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .article-list-item {\n    position: relative;\n    margin-bottom: $lg-gap;\n    @include radius-box($sm-radius);\n\n    &:last-child {\n      margin: 0;\n    }\n\n    .item-background {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      z-index: -1;\n      background-size: 120%;\n      background-position: 0% 50%;\n      opacity: 0.06;\n    }\n\n    > .item-content {\n      $height: $gap * 11;\n      $padding: $sm-gap;\n      $content-height: $height - ($padding * 2);\n      display: block;\n      height: $height;\n      padding: $padding;\n      overflow: hidden;\n      @include common-bg-module($transition-time-fast);\n\n      &:hover {\n        .item-thumb {\n          .item-oirigin {\n            opacity: 1;\n          }\n\n          .item-thumb-img {\n            opacity: 0.95;\n            transform: translateX(-3px);\n          }\n        }\n      }\n\n      > .item-thumb {\n        float: left;\n        width: 15rem;\n        height: $content-height;\n        overflow: hidden;\n        position: relative;\n\n        .item-oirigin {\n          $height: 2.1rem;\n          $opacity: 0.8;\n          position: absolute;\n          left: 0;\n          top: 0;\n          height: $height;\n          line-height: $height;\n          z-index: $z-index-normal + 1;\n          padding: 0 $sm-gap;\n          opacity: 0.4;\n          font-size: $font-size-small;\n          color: $white;\n          text-align: center;\n          text-transform: uppercase;\n          @include visibility-transition();\n\n          &.self {\n            background-color: rgba($accent, $opacity);\n          }\n          &.other {\n            background-color: rgba($red, $opacity);\n          }\n          &.hybrid {\n            background-color: rgba($primary, $opacity);\n          }\n        }\n\n        .item-thumb-img {\n          min-width: 100%;\n          width: calc(100% + 3px);\n          max-width: calc(100% + 3px);\n          height: auto;\n          min-height: $content-height;\n          border-color: transparent;\n          background-color: $module-bg-hover;\n          opacity: 1;\n          transform: translateX(0);\n          transition: transform $transition-time-normal, opacity $transition-time-normal;\n        }\n      }\n\n      > .item-body {\n        float: right;\n        width: 32rem;\n        height: $content-height;\n\n        > .item-title {\n          margin-top: 3px;\n          margin-bottom: $sm-gap;\n          font-weight: bold;\n          color: $link-color-hover;\n          @include text-overflow();\n\n          > a {\n            margin-left: 0;\n            transition: margin $transition-time-normal;\n            border-bottom: 1px solid transparent;\n            text-decoration: none;\n            &:hover {\n              border-color: initial;\n              margin-left: $xs-gap;\n            }\n          }\n        }\n\n        > .item-description {\n          height: 5rem;\n          margin: 0;\n          margin-bottom: $xs-gap;\n          line-height: 1.8em;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          font-size: $font-size-h6;\n          @include clamp(3);\n        }\n\n        > .item-meta {\n          height: 2em;\n          line-height: 2em;\n          display: flex;\n          justify-content: space-between;\n          align-items: baseline;\n          overflow: hidden;\n          font-size: $font-size-small;\n          white-space: nowrap;\n          text-overflow: ellipsis;\n          word-wrap: normal;\n\n          > .views {\n            min-width: 4rem;\n          }\n\n          > .likes {\n            > .liked {\n              color: $red;\n            }\n          }\n\n          > .likes,\n          > .comments {\n            min-width: 3em;\n          }\n\n          > .date,\n          > .views,\n          > .comments,\n          > .likes,\n          > .tags,\n          > .categories {\n            > .iconfont {\n              margin-right: $xs-gap;\n            }\n          }\n\n          > .categories {\n            a {\n              text-transform: capitalize;\n              margin-right: $sm-gap;\n            }\n          }\n\n          > .tags {\n            margin-right: 0;\n          }\n        }\n      }\n    }\n\n    &.mobile {\n      margin-bottom: $gap;\n      &:last-child {\n        margin: 0;\n      }\n\n      > .item-content {\n        height: auto;\n        padding: $sm-gap $gap;\n\n        > .item-body {\n          width: 100%;\n          height: auto;\n\n          > .item-description {\n            height: auto;\n            margin-bottom: 0.5em;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div\n    class=\"articles\"\n    :class=\"{\n      mobile: isMobile,\n      dark: isDarkTheme\n    }\"\n  >\n    <!-- mammon -->\n    <template v-if=\"isMammonEnabled\">\n      <client-only transition>\n        <Adsense\n          ins-class=\"mammon-ins\"\n          data-ad-format=\"fluid\"\n          data-ad-layout-key=\"-hw-7+2w-11-86\"\n          data-ad-slot=\"6538975194\"\n          class=\"article-list-mammon\"\n          v-if=\"isMobile\"\n        />\n        <Adsense\n          ins-class=\"mammon-ins\"\n          data-ad-format=\"fluid\"\n          data-ad-layout-key=\"-hj-9+3a-97+6s\"\n          data-ad-slot=\"1148538406\"\n          class=\"article-list-mammon\"\n          v-else\n        />\n      </client-only>\n    </template>\n\n    <!-- list -->\n    <div class=\"article-list\">\n      <placeholder :data=\"articles.length\" :loading=\"!articles.length && fetching\">\n        <template #loading>\n          <ul class=\"article-list-skeleton\" key=\"skeleton\">\n            <li v-for=\"item in 6\" :key=\"item\" class=\"item\">\n              <div class=\"thumb\">\n                <skeleton-base />\n              </div>\n              <div class=\"content\">\n                <div class=\"title\">\n                  <skeleton-line />\n                </div>\n                <div class=\"description\">\n                  <skeleton-paragraph :lines=\"4\" />\n                </div>\n              </div>\n            </li>\n          </ul>\n        </template>\n        <template #placeholder>\n          <empty class=\"empty\" :i18n-key=\"LANGUAGE_KEYS.ARTICLE_PLACEHOLDER\" />\n        </template>\n        <template #default>\n          <div key=\"list\">\n            <transition-group name=\"list-fade\">\n              <list-item\n                v-for=\"articleItem in articles\"\n                :key=\"articleItem.id\"\n                :article=\"articleItem\"\n                @click=\"handleArticleClick(articleItem)\"\n              />\n            </transition-group>\n          </div>\n        </template>\n      </placeholder>\n    </div>\n\n    <!-- loadmore -->\n    <div class=\"article-load\">\n      <button\n        class=\"loadmore-button\"\n        :disabled=\"fetching || !isLoadMoreEnabled\"\n        @click=\"handleLoadmore\"\n      >\n        <span class=\"icon\">\n          <i class=\"iconfont icon-peachblossom\"></i>\n        </span>\n        <div class=\"text\">\n          <i18n v-if=\"fetching\" :lkey=\"LANGUAGE_KEYS.ARTICLE_LIST_LOADING\" />\n          <i18n v-else-if=\"isLoadMoreEnabled\" :lkey=\"LANGUAGE_KEYS.ARTICLE_LIST_LOADMORE\" />\n          <i18n v-else :lkey=\"LANGUAGE_KEYS.ARTICLE_LIST_NO_MORE\" />\n        </div>\n      </button>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, computed, onMounted, PropType } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { getArticleDetailRoute } from '/@/transforms/route'\n  import { Article } from '/@/store/article'\n  import ListItem from './item.vue'\n\n  export enum Events {\n    Loadmore = 'loadmore'\n  }\n\n  export default defineComponent({\n    name: 'ArticleList',\n    components: {\n      ListItem\n    },\n    props: {\n      articles: {\n        type: Array as PropType<Article[]>,\n        required: true\n      },\n      pagination: Object,\n      fetching: {\n        type: Boolean,\n        required: true\n      },\n      mammon: {\n        type: Boolean,\n        default: true\n      }\n    },\n    emits: [Events.Loadmore],\n    setup(props, context) {\n      const { router, defer, isMobile, isDarkTheme } = useEnhancer()\n      const mammonEnabled = ref(false)\n      const isMammonEnabled = computed(() => props.mammon && mammonEnabled)\n      const isLoadMoreEnabled = computed(() => {\n        return props.pagination\n          ? props.pagination.current_page < props.pagination.total_page\n          : false\n      })\n\n      const handleLoadmore = () => {\n        context.emit(Events.Loadmore)\n      }\n\n      const handleArticleClick = (article: $TODO) => {\n        if (isMobile.value) {\n          router.push(getArticleDetailRoute(article.id))\n        }\n      }\n\n      onMounted(() => {\n        defer.addTask(() => {\n          mammonEnabled.value = true\n        })\n      })\n\n      return {\n        LANGUAGE_KEYS,\n        isMobile,\n        isDarkTheme,\n        isMammonEnabled,\n        isLoadMoreEnabled,\n        handleLoadmore,\n        handleArticleClick\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @use 'sass:math';\n  @import 'src/styles/init.scss';\n\n  .articles {\n    .article-list-mammon {\n      width: 100%;\n      padding: $sm-gap;\n      margin-bottom: $lg-gap;\n      @include common-bg-module();\n      @include radius-box($sm-radius);\n\n      &::v-deep(.mammon-ins) {\n        margin: $xs-gap 0;\n        height: 100px;\n      }\n    }\n\n    .article-list-skeleton {\n      padding: 0;\n      margin: 0;\n      list-style: none;\n      overflow: hidden;\n\n      .item {\n        display: flex;\n        height: 10rem;\n        padding: $sm-gap;\n        margin-bottom: $lg-gap;\n        @include common-bg-module();\n        @include radius-box($sm-radius);\n        &:last-child {\n          margin-bottom: 0;\n        }\n\n        .thumb {\n          height: 100%;\n          width: 15rem;\n        }\n\n        .content {\n          margin-left: $lg-gap;\n          flex-grow: 1;\n\n          .title {\n            height: 1.4em;\n            width: 36%;\n          }\n          .description {\n            margin-top: $sm-gap;\n          }\n        }\n      }\n    }\n\n    .article-list {\n      margin-bottom: $lg-gap;\n      min-height: $lg-gap;\n      overflow: hidden;\n\n      .empty {\n        height: $gap * 10;\n        font-size: $font-size-h4;\n        @include common-bg-module();\n        @include radius-box($sm-radius);\n      }\n    }\n\n    .article-load {\n      overflow: hidden;\n      z-index: $z-index-normal;\n      @include radius-box($sm-radius);\n\n      .loadmore-button {\n        display: flex;\n        justify-content: space-between;\n        width: 100%;\n        height: $button-block-height;\n        line-height: $button-block-height;\n        padding-left: $gap * 2;\n        color: $text-reversal;\n        @include common-bg-module($transition-time-fast);\n\n        &[disabled] {\n          opacity: 0.6;\n        }\n\n        .iconfont {\n          color: $text;\n          @include color-transition();\n        }\n\n        &:hover {\n          .iconfont {\n            color: rgba($red, 0.6);\n          }\n        }\n\n        > .text {\n          position: relative;\n          height: $button-block-height;\n          padding: 0 ($gap * 2) 0 ($gap * 3);\n          font-family: 'webfont-bolder', DINRegular;\n          text-transform: uppercase;\n          color: $white;\n          background: rgba($red, 0.6);\n\n          &::before {\n            $size: 1rem;\n            content: '';\n            display: block;\n            position: absolute;\n            width: $size;\n            height: 200%;\n            top: -50%;\n            left: -#{math.div($size, 2)};\n            background: $body-bg;\n            transform: rotate(18deg);\n          }\n        }\n      }\n    }\n\n    &.dark {\n      .article-load {\n        .loadmore-button {\n          .text {\n            &::before {\n              background: $module-bg-darker-1 !important;\n            }\n          }\n        }\n      }\n    }\n\n    &.mobile {\n      > .article-list,\n      > .article-list-mammon {\n        margin-bottom: $gap;\n      }\n\n      > .article-list-mammon {\n        padding: $sm-gap;\n\n        &::v-deep(.mammon-ins) {\n          margin: 0;\n          height: 81px;\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"index-page\">\n    <carrousel :articles=\"articleStore.list.data\" :fetching=\"articleStore.list.fetching\" />\n    <announcement\n      :announcements=\"announcementStore.announcements\"\n      :fetching=\"announcementStore.fetching || articleStore.list.fetching\"\n    />\n    <article-list\n      :mammon=\"false\"\n      :fetching=\"articleStore.list.fetching\"\n      :articles=\"articleStore.list.data\"\n      :pagination=\"articleStore.list.pagination\"\n      @loadmore=\"loadmoreArticles\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useUniversalFetch, onClient } from '/@/universal'\n  import { useArticleStore } from '/@/store/article'\n  import { useAnnouncementStore } from '/@/store/announcement'\n  import { nextScreen } from '/@/utils/effects'\n  import Carrousel from '/@/components/archive/carrousel.vue'\n  import Announcement from '/@/components/archive/announcement.vue'\n  import ArticleList from '/@/components/archive/list.vue'\n  import { META } from '/@/config/app.config'\n\n  export default defineComponent({\n    name: 'IndexPage',\n    components: {\n      Carrousel,\n      Announcement,\n      ArticleList\n    },\n    setup() {\n      const { meta } = useEnhancer()\n      const articleStore = useArticleStore()\n      const announcementStore = useAnnouncementStore()\n\n      meta({\n        title: `${META.title} - ${META.description}`,\n        keywords: META.keywords,\n        description: META.description\n      })\n\n      const loadmoreArticles = async () => {\n        const targetPage = articleStore.list.pagination?.current_page + 1\n        await articleStore.fetchList({ page: targetPage })\n        if (targetPage > 1) {\n          onClient(nextScreen)\n        }\n      }\n\n      useUniversalFetch(() =>\n        Promise.all([articleStore.fetchList(), announcementStore.fetchList()])\n      )\n\n      return {\n        articleStore,\n        announcementStore,\n        loadmoreArticles\n      }\n    }\n  })\n</script>\n","/**\n * @file Archive state\n * @module store.archive\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineStore } from 'pinia'\nimport { Article } from './article'\nimport { Category } from './category'\nimport { Tag } from './tag'\nimport nodepress from '/@/services/nodepress'\n\nexport interface ArchiveState {\n  meta: any\n  articles: Article[]\n  categories: Category[]\n  tags: Tag[]\n}\n\nexport const useArchiveStore = defineStore('archive', {\n  state: () => ({\n    fetching: false,\n    data: null as null | ArchiveState\n  }),\n  getters: {\n    hydrated: (state) => {\n      if (!state.data) {\n        return null\n      }\n\n      const { articles, tags, categories } = state.data\n      const tagMap = new Map(tags.map((tag) => [tag._id, { ...tag, count: 0 }]))\n      const categoryMap = new Map(categories.map((cate) => [cate._id, { ...cate, count: 0 }]))\n      articles.forEach((article) => {\n        ;(article.tag as any as string[]).forEach((t) => {\n          if (tagMap.has(t)) {\n            tagMap.get(t)!.count++\n          }\n        })\n        ;(article.category as any as string[]).forEach((c) => {\n          if (categoryMap.has(c)) {\n            categoryMap.get(c)!.count++\n          }\n        })\n      })\n\n      return {\n        tags: Array.from(tagMap.values()),\n        categories: Array.from(categoryMap.values())\n      }\n    }\n  },\n  actions: {\n    fetchArchive() {\n      if (this.data) {\n        return Promise.resolve()\n      }\n      this.fetching = true\n      return nodepress\n        .get<ArchiveState>('/archive')\n        .then((response) => {\n          this.data = response.result\n        })\n        .finally(() => {\n          this.fetching = false\n        })\n    }\n  }\n})\n","/**\n * @file Text transformer\n * @module transformer.text\n * @author Surmon <https://github.com/surmon-china>\n */\n\n// 文字溢出过滤器\nexport const textOverflow = (text: string, customLength?: number) => {\n  const length = customLength || text.length\n  const cansub = length && text?.length > length\n  return cansub ? text.substr(0, length) + '...' : text\n}\n\n// 首字母大写\nexport const firstUpperCase = (text: string) => {\n  return text?.toLowerCase().replace(/( |^)[a-z]/g, (L) => L.toUpperCase())\n}\n\nexport const CHINESE_NUMBER_TEXT = '〇一二三四五六七八九十'.split('')\nexport const CHINESE_NUMBER_CAPITAL_TEXT = '零壹贰叁肆伍陆柒捌玖拾'.split('')\nexport const replaceToChineseNumber = (text: string | number, capital = false) => {\n  const targetText = capital ? CHINESE_NUMBER_CAPITAL_TEXT : CHINESE_NUMBER_TEXT\n  return String(text)\n    .split('')\n    .map((number) => targetText[Number(number)])\n    .join('')\n}\n\nexport const CHINESE_MONTH_TEXT = [\n  '首阳',\n  '绀香',\n  '莺时',\n  '槐序',\n  '鸣蜩',\n  '季夏',\n  '兰秋',\n  '南宫',\n  '菊月',\n  '子春',\n  '葭月',\n  '季冬'\n]\nexport const toChineseMonth = (number: number) => {\n  return CHINESE_MONTH_TEXT[number - 1]\n}\n\nexport const ENG_MONTH_TEXT = [\n  'January',\n  'February',\n  'March',\n  'April',\n  'May',\n  'June',\n  'July',\n  'August',\n  'September',\n  'October',\n  'November',\n  'December'\n]\nexport const toEngMonth = (number: number) => {\n  return ENG_MONTH_TEXT[number - 1]\n}\n","<template>\n  <div\n    class=\"banner\"\n    :class=\"{ dark: isDarkTheme }\"\n    :style=\"{ backgroundImage: `url(${imageUrl})`, backgroundPositionY: `${position}%` }\"\n  >\n    <div class=\"content\" :class=\"className\">\n      <h2 class=\"title\">\n        <slot name=\"title\"></slot>\n      </h2>\n      <div class=\"description\">\n        <slot name=\"description\"></slot>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { getFileCDNUrl } from '/@/transforms/url'\n  import { useEnhancer } from '/@/app/enhancer'\n  export default defineComponent({\n    name: 'FullPageBanner',\n    props: {\n      class: String,\n      position: {\n        type: Number,\n        default: 20\n      },\n      image: {\n        type: String,\n        required: true\n      }\n    },\n    setup(props) {\n      const { isDarkTheme } = useEnhancer()\n      return {\n        isDarkTheme,\n        className: props.class,\n        imageUrl: getFileCDNUrl(props.image)\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .banner {\n    height: $full-column-page-banner-height;\n    background-color: $module-bg-darker-1;\n    background-size: cover;\n    background-position-x: center;\n\n    &.dark {\n      /* background-blend-mode: lighten; */\n    }\n\n    .content {\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      text-align: center;\n      color: $white;\n\n      .title {\n        font-size: 3em;\n        margin-top: 0;\n        margin-bottom: $lg-gap * 2;\n      }\n\n      .description {\n        font-size: $font-size-h4;\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"archive-page\">\n    <page-banner :position=\"75\" image=\"/images/page-archive/banner.jpg\">\n      <template #title>\n        <i18n zh=\"万物之中，希望至美\" en=\"Hope is a good thing\" />\n      </template>\n      <template #description>\n        <i18n zh=\"至美之物，永不凋零\" en=\"Maybe the best of things and no good thing ever dies\" />\n      </template>\n    </page-banner>\n    <div class=\"container\">\n      <div class=\"archive-content\">\n        <placeholder\n          :data=\"archiveStore.data?.articles.length && archiveStore.data?.tags.length\"\n          :loading=\"isFetching\"\n        >\n          <template #placeholder>\n            <empty class=\"archive-empty\" key=\"empty\">\n              <i18n :lkey=\"LANGUAGE_KEYS.ARTICLE_PLACEHOLDER\" />\n            </empty>\n          </template>\n          <template #loading>\n            <ul class=\"archive-skeleton\" key=\"skeleton\">\n              <li v-for=\"item in 4\" :key=\"item\" class=\"item\">\n                <div class=\"content\">\n                  <div class=\"title\">\n                    <skeleton-line />\n                  </div>\n                  <div class=\"description\">\n                    <skeleton-paragraph :lines=\"6\" />\n                  </div>\n                </div>\n              </li>\n            </ul>\n          </template>\n          <template #default>\n            <div class=\"content-warpper\" key=\"content\">\n              <ul class=\"year-list\">\n                <li v-for=\"yes in articleTree\" :key=\"yes.year\" class=\"year-item\">\n                  <h3 class=\"title root\">\n                    <i class=\"iconfont icon-peachblossom\" />\n                    <span class=\"text\">\n                      <i18n :zh=\"replaceToChineseNumber(yes.year)\" :en=\"yes.year\" />\n                    </span>\n                  </h3>\n                  <ul class=\"month-list\">\n                    <li v-for=\"mos in yes.months\" :key=\"mos.month\" class=\"month\">\n                      <h4 class=\"title\">\n                        <span class=\"argyle\">\n                          <i18n :zh=\"toChineseMonth(mos.month)\" :en=\"toEngMonth(mos.month)\" />\n                        </span>\n                      </h4>\n                      <ul class=\"article-list\">\n                        <li v-for=\"(article, index) in mos.articles\" :key=\"index\" class=\"article\">\n                          <div class=\"left\">\n                            <h4 class=\"title\">\n                              <span class=\"date\"> D{{ article.createAt.day }} </span>\n                              <a\n                                class=\"link\"\n                                target=\"_blank\"\n                                :title=\"article.title\"\n                                :href=\"getArticleDetailRoute(article.id)\"\n                              >\n                                {{ article.title }}\n                              </a>\n                            </h4>\n                            <p class=\"description\" v-html=\"article.description\" />\n                          </div>\n                          <div class=\"metas\">\n                            <span class=\"item views\">\n                              <i class=\"iconfont icon-eye\"></i>\n                              <span>{{ article.meta.views }}</span>\n                            </span>\n                            <span class=\"separator\">|</span>\n                            <span class=\"item likes\">\n                              <i class=\"like-icon iconfont icon-heart\"></i>\n                              <span>{{ article.meta.likes }}</span>\n                            </span>\n                            <span class=\"separator\">|</span>\n                            <span class=\"item comments\">\n                              <i class=\"iconfont icon-comment\"></i>\n                              <span>{{ article.meta.comments }}</span>\n                            </span>\n                          </div>\n                        </li>\n                      </ul>\n                    </li>\n                  </ul>\n                </li>\n              </ul>\n            </div>\n          </template>\n        </placeholder>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed } from 'vue'\n  import { META } from '/@/config/app.config'\n  import { Article } from '/@/store/article'\n  import { useArchiveStore } from '/@/store/archive'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useUniversalFetch } from '/@/universal'\n  import { Language } from '/@/language/data'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { dateToHuman, HumanDate } from '/@/transforms/moment'\n  import { getArticleDetailRoute } from '/@/transforms/route'\n  import {\n    replaceToChineseNumber,\n    toChineseMonth,\n    toEngMonth,\n    firstUpperCase\n  } from '/@/transforms/text'\n  import PageBanner from '/@/components/common/banner.vue'\n\n  export default defineComponent({\n    name: 'ArchivePage',\n    components: {\n      PageBanner\n    },\n    setup() {\n      const { i18n, meta, isZhLang } = useEnhancer()\n      const archiveStore = useArchiveStore()\n      const isFetching = computed(() => archiveStore.fetching)\n\n      meta(() => {\n        const enTitle = firstUpperCase(i18n.t(LANGUAGE_KEYS.PAGE_ARCHIVE, Language.En)!)\n        const titles = isZhLang.value ? [i18n.t(LANGUAGE_KEYS.PAGE_ARCHIVE), enTitle] : [enTitle]\n        return { pageTitle: titles.join(' | '), description: `${META.title} 数据归档` }\n      })\n\n      const articleTree = computed(() => {\n        const rootTree = [] as Array<{\n          year: number\n          months: Array<{\n            month: number\n            articles: Array<Article & { createAt: HumanDate }>\n          }>\n        }>\n\n        archiveStore.data?.articles\n          .map((article) => ({\n            ...article,\n            createAt: dateToHuman(new Date(article.create_at))\n          }))\n          .sort(({ create_at: a }, { create_at: b }) => {\n            return Date.parse(b) - Date.parse(a)\n          })\n          .forEach((article) => {\n            const { createAt } = article\n            // year\n            const yearTree = rootTree.find((ye) => ye.year === createAt.year)\n            let targetYear = yearTree\n            if (!targetYear) {\n              targetYear = { year: createAt.year, months: [] }\n              rootTree.push(targetYear)\n            }\n            // month\n            const monthTree = targetYear.months.find((mo) => mo.month === createAt.month)\n            let targetMonth = monthTree\n            if (!targetMonth) {\n              targetMonth = { month: createAt.month, articles: [] }\n              targetYear.months.push(targetMonth)\n            }\n            // article\n            targetMonth.articles.push(article)\n          })\n        return rootTree\n      })\n\n      useUniversalFetch(() => archiveStore.fetchArchive())\n\n      return {\n        LANGUAGE_KEYS,\n        getArticleDetailRoute,\n        replaceToChineseNumber,\n        toChineseMonth,\n        toEngMonth,\n        archiveStore,\n        articleTree,\n        isFetching\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .archive-page {\n    .archive-content {\n      margin-top: $gap * 2;\n      min-height: $normal-page-active-content-height / 2;\n\n      .archive-empty {\n        @include radius-box($lg-radius);\n        height: $normal-page-active-content-height / 2;\n        font-size: $font-size-h1;\n        font-weight: bold;\n      }\n\n      .archive-skeleton {\n        @include radius-box($lg-radius);\n        list-style: none;\n        padding: 3rem;\n\n        .item {\n          width: 100%;\n          margin-bottom: 2rem;\n          &:last-child {\n            margin-bottom: 0;\n          }\n\n          .content {\n            .title {\n              width: 8rem;\n              height: 2rem;\n              margin-bottom: $gap;\n            }\n          }\n        }\n      }\n\n      .content-warpper {\n        text-transform: capitalize;\n        font-size: 1em;\n\n        .year-item {\n          margin-top: 0;\n          margin-bottom: $gap * 2;\n          overflow: hidden;\n        }\n\n        .link {\n          border-bottom: 1px solid;\n          font-weight: bold;\n        }\n\n        .title {\n          color: $text-secondary;\n\n          &.root {\n            font-weight: bold;\n            margin-bottom: $lg-gap * 3;\n          }\n\n          > .text {\n            margin-left: $xs-gap;\n            padding-bottom: $xs-gap;\n            border-bottom: 1px solid;\n          }\n        }\n\n        .year-list {\n          list-style: none;\n          padding: 0;\n          margin: 0;\n        }\n\n        .month-list {\n          list-style: tibetan;\n        }\n\n        .article-list {\n          list-style: none;\n          padding-left: $gap;\n\n          .article {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            padding: $gap;\n            padding-left: $gap * 2;\n            @include radius-box($sm-radius);\n            &:hover {\n              background-color: $module-bg;\n            }\n\n            .left {\n              .title {\n                margin: $gap 0;\n\n                .date {\n                  display: inline-block;\n                  font-size: $font-size-h5;\n                  width: 2rem;\n                  margin-right: $sm-gap;\n                }\n              }\n\n              .description {\n                margin-bottom: $gap;\n                padding-left: 2.2em;\n              }\n            }\n\n            .metas {\n              z-index: 1;\n              margin-left: 2rem;\n              display: inline-flex;\n              flex-shrink: 0;\n              align-items: center;\n              font-size: $font-size-h4;\n              color: $text-secondary;\n\n              .separator {\n                margin: 0 $gap;\n              }\n\n              .item {\n                width: 6rem;\n                text-align: center;\n\n                .iconfont {\n                  margin-right: $sm-gap;\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","/**\n * @file Comment state\n * @module store.comment\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport * as _ from 'lodash'\nimport { defineStore } from 'pinia'\nimport { SortType } from '/@/constants/state'\nimport { fetchDelay } from '/@/utils/fetch-delay'\nimport nodepress from '/@/services/nodepress'\n\nexport const COMMENT_API_PATH = '/comment'\nexport const LIKE_COMMENT_API_PATH = '/like/comment'\nexport const COMMENT_EMPTY_PID = 0\nexport interface Author {\n  name: string\n  email: string\n  site: string\n}\n\nexport interface Comment {\n  post_id: number\n  id: number\n  pid: number | typeof COMMENT_EMPTY_PID\n  content: string\n  agent?: string\n  author: Author\n  likes: number\n  ip?: string\n  ip_location?: {\n    city: string\n    country: string\n  }\n  create_at: string\n  update_at: string\n}\nexport interface CommentFetchParams {\n  page?: number\n  per_page?: number\n  sort?: SortType\n  delay?: number\n  loadmore?: boolean\n  [key: string]: any\n}\n\nexport interface CommentTreeItem {\n  comment: Comment\n  children: Array<Comment>\n}\n\nexport const useCommentStore = defineStore('comment', {\n  state: () => ({\n    fetching: false,\n    posting: false,\n    comments: [] as Array<Comment>,\n    pagination: null as null | $TODO\n  }),\n  getters: {\n    commentTreeList: (state): Array<CommentTreeItem> => {\n      // only keep 2 level tree\n      const ids = state.comments.map((comment) => comment.id)\n      const roots = state.comments.filter(\n        (comment) => comment.pid === COMMENT_EMPTY_PID || !ids.includes(comment.pid)\n      )\n      const children = state.comments.filter(\n        (comment) => comment.pid !== COMMENT_EMPTY_PID && ids.includes(comment.pid)\n      )\n      const fullMap = new Map<number, Comment>(\n        state.comments.map((comment) => [comment.id, comment])\n      )\n      const treeMap = new Map<number, { comment: Comment; children: Array<Comment> }>(\n        roots.map((comment) => [comment.id, { comment, children: [] }])\n      )\n\n      const findRootParentID = (pid: number): number | void => {\n        const target = fullMap.get(pid)\n        if (!target) {\n          return void 0\n        }\n        return target.pid === COMMENT_EMPTY_PID ? target.id : findRootParentID(target.pid)\n      }\n\n      children.forEach((comment) => {\n        const rootPID = findRootParentID(comment.pid)\n        if (rootPID) {\n          if (treeMap.has(rootPID)) {\n            const target = treeMap.get(rootPID)!\n            treeMap.set(rootPID, {\n              ...target,\n              children: [...target.children, comment]\n            })\n          }\n        }\n      })\n      return Array.from(treeMap.values())\n    }\n  },\n  actions: {\n    clearList() {\n      this.comments = []\n      this.pagination = null\n    },\n\n    fetchList(params: CommentFetchParams = {}) {\n      // 修正参数\n      params = {\n        page: 1,\n        per_page: 50,\n        sort: SortType.Desc,\n        delay: 0,\n        loadmore: false,\n        ...params\n      }\n\n      const isRestart = params.page === 1\n      const isDescSort = params.sort === SortType.Desc\n\n      // 清空数据\n      if (isRestart) {\n        this.clearList()\n      }\n      this.fetching = true\n      return nodepress\n        .get(COMMENT_API_PATH, { params })\n        .then((response) => {\n          return new Promise((resolve) => {\n            fetchDelay(params.delay)(() => {\n              if (isDescSort) {\n                response.result.data.reverse()\n              }\n              if (params.loadmore) {\n                isDescSort\n                  ? this.comments.unshift(...response.result.data)\n                  : this.comments.push(...response.result.data)\n              } else {\n                this.comments = response.result.data\n              }\n              this.pagination = response.result.pagination\n              resolve(void 0)\n            })\n          })\n        })\n        .finally(() => {\n          this.fetching = false\n        })\n    },\n\n    // 发布评论\n    postComment(comment: Partial<Comment>) {\n      this.posting = true\n      return nodepress\n        .post(COMMENT_API_PATH, comment)\n        .then((response) => {\n          this.comments.push(response.result)\n          if (this.pagination) {\n            this.pagination.total++\n          }\n        })\n        .finally(() => {\n          this.posting = false\n        })\n    },\n\n    // 喜欢评论\n    postCommentLike(commentID: number) {\n      return nodepress.patch(LIKE_COMMENT_API_PATH, { comment_id: commentID }).then(() => {\n        const comment = this.comments.find((comment) => comment.id === commentID)\n        if (comment) {\n          comment.likes++\n        }\n      })\n    }\n  }\n})\n","<template>\n  <div ref=\"element\" class=\"detail\" :class=\"{ mobile: isMobile }\">\n    <transition name=\"module\">\n      <div\n        v-if=\"!fetching\"\n        class=\"oirigin\"\n        :class=\"{\n          self: isOriginal,\n          other: isReprint,\n          hybrid: isHybrid\n        }\"\n      >\n        <i18n :lkey=\"LANGUAGE_KEYS.ORIGIN_ORIGINAL\" v-if=\"isOriginal\" />\n        <i18n :lkey=\"LANGUAGE_KEYS.ORIGIN_REPRINT\" v-else-if=\"isReprint\" />\n        <i18n :lkey=\"LANGUAGE_KEYS.ORIGIN_HYBRID\" v-else-if=\"isHybrid\" />\n      </div>\n    </transition>\n    <placeholder :loading=\"fetching\" @after-enter=\"handleContentAnimateDone\">\n      <template #loading>\n        <div class=\"skeleton\" key=\"skeleton\">\n          <skeleton-line class=\"title\" />\n          <skeleton-paragraph class=\"content\" :lines=\"9\" line-height=\"1.2em\" />\n        </div>\n      </template>\n      <template #default>\n        <div class=\"knowledge\" key=\"knowledge\">\n          <h2 class=\"title\">{{ article?.title }}</h2>\n          <div\n            class=\"markdown-html\"\n            :id=\"ARTICLE_CONTENT_ELEMENT_IDS.default\"\n            v-html=\"articleDetailStore.defaultContent?.html\"\n          />\n          <transition name=\"module\" mode=\"out-in\" @after-enter=\"handleRenderMoreAnimateDone\">\n            <div v-if=\"isRenderMoreEnabled\" class=\"readmore\">\n              <button\n                class=\"readmore-btn\"\n                :disabled=\"isRenderMoreContent\"\n                @click=\"handleRenderMore\"\n              >\n                <i18n\n                  :lkey=\"\n                    isRenderMoreContent\n                      ? LANGUAGE_KEYS.ARTICLE_RENDERING\n                      : LANGUAGE_KEYS.ARTICLE_READ_ALL\n                  \"\n                />\n                <i class=\"iconfont icon-loadmore\"></i>\n              </button>\n            </div>\n            <div\n              class=\"markdown-html\"\n              :id=\"ARTICLE_CONTENT_ELEMENT_IDS.more\"\n              v-else-if=\"articleDetailStore.renderedFullContent\"\n              v-html=\"articleDetailStore.moreContent?.html\"\n            />\n          </transition>\n        </div>\n      </template>\n    </placeholder>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, computed, nextTick, onMounted, PropType } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { Article, useArticleDetailStore } from '/@/store/article'\n  import { LOZAD_CLASS_NAME, LOADED_CLASS_NAME } from '/@/services/lozad'\n  import { isOriginalType, isHybridType, isReprintType } from '/@/transforms/state'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n\n  const ARTICLE_CONTENT_ELEMENT_IDS = {\n    default: 'article_content_default',\n    more: 'article_content_more'\n  }\n\n  export default defineComponent({\n    name: 'ArticleContent',\n    props: {\n      article: {\n        type: Object as PropType<Article>,\n        required: false\n      },\n      fetching: {\n        type: Boolean,\n        required: true\n      }\n    },\n    setup(props) {\n      const { isMobile } = useEnhancer()\n      const articleDetailStore = useArticleDetailStore()\n      const isHybrid = computed(() => isHybridType(props.article?.origin!))\n      const isReprint = computed(() => isReprintType(props.article?.origin!))\n      const isOriginal = computed(() => isOriginalType(props.article?.origin!))\n\n      const element = ref<HTMLElement>()\n      const isRenderMoreContent = ref(false)\n      const isRenderMoreEnabled = computed(() => {\n        return articleDetailStore.isLongContent && !articleDetailStore.renderedFullContent\n      })\n\n      const handleRenderMore = () => {\n        isRenderMoreContent.value = true\n        nextTick(() => {\n          setTimeout(() => {\n            articleDetailStore.renderFullContent()\n            isRenderMoreContent.value = false\n          }, 0)\n        })\n      }\n\n      const observeLozad = (elementID: string) => {\n        const contentElement = element.value?.querySelector(`#${elementID}`)\n        const lozadElements =\n          contentElement && contentElement.querySelectorAll(`.${LOZAD_CLASS_NAME}`)\n        if (lozadElements?.length) {\n          const lozadObserver = window.$lozad(lozadElements, {\n            loaded: (element) => element.classList.add(LOADED_CLASS_NAME)\n          })\n          lozadObserver.observe()\n        }\n      }\n\n      const handleContentAnimateDone = () => observeLozad(ARTICLE_CONTENT_ELEMENT_IDS.default)\n      const handleRenderMoreAnimateDone = () => observeLozad(ARTICLE_CONTENT_ELEMENT_IDS.more)\n\n      onMounted(() => {\n        handleContentAnimateDone()\n      })\n\n      return {\n        LANGUAGE_KEYS,\n        element,\n        isHybrid,\n        isReprint,\n        isOriginal,\n        isMobile,\n        articleDetailStore,\n        isRenderMoreEnabled,\n        isRenderMoreContent,\n        ARTICLE_CONTENT_ELEMENT_IDS,\n        handleRenderMore,\n        handleContentAnimateDone,\n        handleRenderMoreAnimateDone\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .detail {\n    padding: 1rem 2rem;\n    position: relative;\n    overflow: hidden;\n    height: auto;\n    transition: height $transition-time-normal;\n\n    .skeleton {\n      .title {\n        width: 60%;\n        height: 26px;\n        margin: 2rem auto;\n      }\n\n      .content {\n        margin-top: 3rem;\n        margin-bottom: 1rem;\n      }\n    }\n\n    .oirigin {\n      position: absolute;\n      top: -11px;\n      left: -29px;\n      transform: rotate(-45deg);\n      width: 7rem;\n      height: 4rem;\n      line-height: 5.8rem;\n      text-align: center;\n      text-transform: uppercase;\n      transform-origin: center;\n      color: $text-reversal;\n      font-weight: bold;\n      font-size: $font-size-small;\n\n      &.self {\n        background-color: rgba($accent, 0.8);\n      }\n      &.other {\n        background-color: rgba($red, 0.8);\n      }\n      &.hybrid {\n        background-color: rgba($primary, 0.8);\n      }\n    }\n\n    .knowledge {\n      user-select: text;\n      position: relative;\n\n      .title {\n        margin: 1em 0 1.5em 0;\n        text-align: center;\n        font-weight: 700;\n        font-size: $font-size-h2 * 0.95;\n      }\n\n      .markdown-html {\n        .google-auto-placed {\n          margin-bottom: $sm-gap;\n        }\n      }\n\n      .readmore {\n        position: absolute;\n        bottom: 0;\n        width: 100%;\n        height: 16rem;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        background: linear-gradient(to top, $module-bg-hover, transparent);\n\n        .readmore-btn {\n          width: 80%;\n          height: 3rem;\n          margin-top: 2rem;\n          line-height: 3rem;\n          text-align: center;\n          color: $text-reversal;\n          background-color: $primary-lighter;\n          @include background-transition();\n          @include radius-box($xs-radius);\n\n          &[disabled] {\n            cursor: no-drop;\n          }\n\n          &:hover {\n            background-color: $primary;\n            color: $text-reversal;\n          }\n\n          .iconfont {\n            margin-left: $sm-gap;\n          }\n        }\n      }\n    }\n\n    &.mobile {\n      padding: $gap $lg-gap;\n\n      > .oirigin {\n        font-size: $font-size-base;\n      }\n\n      > .knowledge {\n        > .content {\n          pre {\n            padding-left: 0;\n\n            > .code-lines {\n              display: none;\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <Adsense\n    :ins-class=\"insClass || ''\"\n    :ins-style=\"insStyle\"\n    data-ad-format=\"auto\"\n    data-ad-slot=\"7405264495\"\n    data-full-width-responsive=\"true\"\n  />\n</template>\n\n<script lang=\"ts\">\n  /**唯一一个通用矩形广告模块 */\n  import { defineComponent } from 'vue'\n  export default defineComponent({\n    name: 'UAdsense',\n    props: {\n      insClass: String,\n      insStyle: String\n    }\n  })\n</script>\n","<template>\n  <div class=\"mammon\">\n    <placeholder :loading=\"fetching\">\n      <template #loading>\n        <skeleton-paragraph key=\"skeleton\" class=\"skeleton\" line-height=\"1em\" :lines=\"4\" />\n      </template>\n      <template #default>\n        <u-adsense key=\"adsense\" class=\"mammon-box\" ins-class=\"mammon-ins\" />\n      </template>\n    </placeholder>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import UAdsense from '/@/components/common/uadsense.vue'\n  export default defineComponent({\n    name: 'ArticleMammon',\n    components: {\n      UAdsense\n    },\n    props: {\n      fetching: {\n        type: Boolean,\n        required: true\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .mammon {\n    padding: $gap;\n    height: auto;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    overflow: hidden;\n\n    .mammon-box,\n    ::v-deep(.mammon-ins) {\n      width: 100%;\n      height: 16rem;\n      min-height: 16rem;\n    }\n\n    .skeleton {\n      width: 100%;\n    }\n  }\n</style>\n","/**\n * @file GTag constant\n * @module constant.gtag\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport enum GAEventActions {\n  Click = '点击',\n  View = '触及',\n  Toggle = '切换'\n}\n\nexport enum GAEventTags {\n  Comment = '评论',\n  Share = '分享',\n  Tool = '部件',\n  AppPage = 'page-App',\n  AboutPage = 'page-About',\n  FreelancerPage = 'page-freelancer'\n}\n","/**\n * @file Clipboard util\n * @module util.clipboard\n * @author Surmon <https://github.com/surmon-china>\n */\n\ndeclare global {\n  interface Window {\n    $isCopyFromApp: boolean\n  }\n}\n\nexport const read = () => navigator.clipboard.readText()\nexport const copy = (text: string) => {\n  window.$isCopyFromApp = true\n  navigator.clipboard.writeText(text).finally(() => {\n    window.$isCopyFromApp = false\n  })\n}\n\nexport default { copy, read }\n","<template>\n  <div class=\"share\">\n    <button\n      class=\"share-ejector\"\n      v-for=\"(social, index) in enabledSocials\"\n      :key=\"index\"\n      :title=\"'Share to: ' + social.name\"\n      :class=\"social.class\"\n      @click=\"openShareWindow(social)\"\n    >\n      <i class=\"iconfont\" :class=\"`icon-${social.class}`\" />\n    </button>\n    <button class=\"share-ejector link\" @click=\"copyPageUrl\">\n      <i class=\"iconfont icon-link\"></i>\n    </button>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import qs from 'qs'\n  import { defineComponent, PropType, computed } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { GAEventActions, GAEventTags } from '/@/constants/gtag'\n  import { getPageUrl } from '/@/transforms/url'\n  import { copy } from '/@/utils/clipboard'\n  import { META } from '/@/config/app.config'\n\n  export enum SocialMedia {\n    Wechat = 'wechat',\n    Weibo = 'weibo',\n    Twitter = 'twitter',\n    douban = 'douban',\n    Evernote = 'evernote',\n    Facebook = 'facebook',\n    LinkedIn = 'linkedin'\n  }\n\n  interface SocialItem {\n    id: SocialMedia\n    name: string\n    class: string\n    url(share: { url: string; title: string; description: string }): string\n  }\n  const socials: SocialItem[] = [\n    {\n      id: SocialMedia.Wechat,\n      name: '微信',\n      class: 'wechat',\n      url: (share) => `/partials/qrcode.html?url=${share.url}`\n    },\n    {\n      id: SocialMedia.Weibo,\n      name: '微博',\n      class: 'weibo',\n      url: (share) => {\n        return (\n          `https://service.weibo.com/share/share.php?` +\n          qs.stringify({\n            url: share.url,\n            source: share.url,\n            sourceUrl: share.url,\n            title: share.title,\n            content: share.description\n          })\n        )\n      }\n    },\n    {\n      id: SocialMedia.Twitter,\n      name: 'Twitter',\n      class: 'twitter',\n      url: (share) => {\n        return (\n          `https://twitter.com/share?` +\n          qs.stringify({\n            url: share.url,\n            text: share.title\n          })\n        )\n      }\n    },\n    {\n      id: SocialMedia.Facebook,\n      name: 'Facebook',\n      class: 'facebook',\n      url: (share) => {\n        return (\n          `https://www.facebook.com/sharer/sharer.php?` +\n          qs.stringify({\n            u: encodeURI(share.url)\n          })\n        )\n      }\n    },\n    {\n      id: SocialMedia.LinkedIn,\n      name: 'LinkedIn',\n      class: 'linkedin',\n      url: (share) => {\n        return (\n          `https://www.linkedin.com/sharing/share-offsite/?` +\n          qs.stringify({\n            url: share.url\n          })\n        )\n      }\n    },\n    {\n      id: SocialMedia.douban,\n      name: '豆瓣',\n      class: 'douban',\n      url: (share) => {\n        return (\n          // https://www.douban.com/service/sharebutton\n          `https://www.douban.com/recommend/?` +\n          qs.stringify({\n            url: share.url,\n            title: share.title,\n            v: 1\n          })\n        )\n      }\n    },\n    {\n      id: SocialMedia.Evernote,\n      name: '印象笔记',\n      class: 'evernote',\n      url: (share) => {\n        return (\n          `https://www.evernote.com/clip.action?` +\n          qs.stringify({\n            url: share.url,\n            title: share.title\n          })\n        )\n      }\n    }\n  ]\n\n  export default defineComponent({\n    name: 'Share',\n    props: {\n      socials: {\n        type: Array as PropType<Array<SocialMedia>>,\n        required: false\n      }\n    },\n    setup(props) {\n      const { route, gtag } = useEnhancer()\n      const enabledSocials = computed(() => {\n        return props.socials?.length\n          ? socials.filter((s) => props.socials?.includes(s.id))\n          : socials\n      })\n\n      const getURL = () => getPageUrl(route.fullPath)\n      const getTitle = () => document.title || META.title\n      const getDescription = () => {\n        return (\n          document.getElementsByName('description')?.[0]?.getAttribute('content') ||\n          META.description\n        )\n      }\n\n      const copyPageUrl = () => {\n        copy(`${getTitle()} - ${getURL()}`)\n        gtag?.event('复制当页链接', {\n          event_category: GAEventActions.Click,\n          event_label: GAEventTags.Share\n        })\n      }\n\n      const openShareWindow = (social: SocialItem) => {\n        const targetURL = social.url({\n          url: getURL(),\n          title: getTitle(),\n          description: getDescription()\n        })\n        // screen.availWidth 获得屏幕宽度\n        // screen.availHeight 获得屏幕高度\n        // 居中的算法是：\n        // 左右居中： (屏幕宽度 - 窗口宽度)/2\n        // 上下居中： (屏幕高度 - 窗口高度)/2\n        // 给打开的窗口命名\n        const windowName = `Share: ${META.title}`\n        // 窗口宽度，需要设置\n        const awidth = (screen.availWidth / 6) * 2\n        // 窗口高度，需要设置\n        const aheight = (screen.availHeight / 5) * 2\n        // 窗口顶部位置，一般不需要改\n        const atop = (screen.availHeight - aheight) / 2\n        // 窗口放中央，一般不需要改\n        const aleft = (screen.availWidth - awidth) / 2\n        // 新窗口的参数\n        const baseParam = 'scrollbars=0,status=0,menubar=0,resizable=2,location=0'\n        // 新窗口的左部位置，顶部位置，宽度，高度\n        const params = `top=${atop},left=${aleft},width=${awidth},height=${aheight},${baseParam}`\n        // 打开新窗口\n        const _window = window.open(targetURL, windowName, params)\n        // 新窗口获得焦点\n        _window?.focus()\n\n        gtag?.event('当页分享', {\n          event_category: GAEventActions.Click,\n          event_label: GAEventTags.Share\n        })\n      }\n\n      return {\n        enabledSocials,\n        copyPageUrl,\n        openShareWindow\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .share {\n    @include visibility-transition();\n\n    > .share-ejector {\n      cursor: pointer;\n      display: inline-block;\n      text-align: center;\n      @include background-transition();\n\n      &.wechat:hover {\n        background-color: $wechat-primary;\n      }\n      &.weibo:hover {\n        background-color: $weibo-primary;\n      }\n      &.douban:hover {\n        background-color: $douban-primary;\n      }\n      &.evernote:hover {\n        background-color: $evernote-primary;\n      }\n      &.twitter:hover {\n        background-color: $twitter-primary-hover;\n      }\n      &.facebook:hover {\n        background-color: $facebook-primary;\n      }\n      &.linkedin:hover {\n        background-color: $linkedin-primary;\n      }\n      &.link:hover {\n        background-color: $primary;\n      }\n\n      &:hover {\n        > .iconfont {\n          color: $white;\n        }\n      }\n\n      > .iconfont {\n        display: block;\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"share-module\">\n    <placeholder :loading=\"fetching\">\n      <template #loading>\n        <div class=\"skeleton\">\n          <skeleton-base\n            v-for=\"item in skeletonCount\"\n            :key=\"item\"\n            :radius=\"0\"\n            :style=\"{\n              width: `calc((100% - (1em * ${skeletonCount - 1})) / ${skeletonCount})`\n            }\"\n          />\n        </div>\n      </template>\n      <template #default>\n        <base-share class=\"article-share\" :class=\"{ mobile: isMobile }\" />\n      </template>\n    </placeholder>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import BaseShare from '/@/components/widget/share.vue'\n\n  export default defineComponent({\n    name: 'ArticleShare',\n    components: {\n      BaseShare\n    },\n    props: {\n      fetching: {\n        type: Boolean,\n        required: true\n      }\n    },\n    setup() {\n      const { isMobile } = useEnhancer()\n      const skeletonCount = isMobile.value ? 3 : 10\n      return {\n        isMobile,\n        skeletonCount\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .share-module {\n    padding: $gap;\n\n    > .skeleton {\n      display: flex;\n      justify-content: space-between;\n      height: 3rem;\n    }\n\n    > .article-share {\n      width: 100%;\n      opacity: 0.6;\n      display: flex;\n      justify-content: space-between;\n\n      &:hover {\n        opacity: 1;\n      }\n\n      ::v-deep(.share-ejector) {\n        flex-grow: 1;\n        width: auto;\n        height: 3rem;\n        line-height: 3rem;\n        margin-right: $gap;\n        font-size: $font-size-h4;\n        border-radius: $xs-radius;\n        background-color: $module-bg-darker-1;\n\n        &:last-child {\n          margin-right: 0;\n        }\n      }\n\n      &.mobile {\n        ::v-deep(.share-ejector) {\n          width: auto;\n          display: none;\n          flex-grow: 0;\n\n          &[class*='wechat'],\n          &[class*='weibo'],\n          &[class*='twitter'] {\n            display: inline-block;\n            flex-grow: 1;\n          }\n          &[class*='twitter'] {\n            margin-right: 0;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <placeholder :loading=\"fetching\">\n    <template #loading>\n      <div class=\"metas-skeleton\" key=\"skeleton\" :class=\"{ mobile: isMobile }\">\n        <skeleton-paragraph :align=\"true\" :lines=\"4\" line-height=\"1.2em\" />\n      </div>\n    </template>\n    <template #default>\n      <div class=\"metas\" key=\"content\" :class=\"{ mobile: isMobile }\" v-if=\"article\">\n        <p class=\"item\">\n          <i18n zh=\"本文于 \" en=\"Article created at \" />\n          <router-link\n            class=\"date-link\"\n            :title=\"getDateTitle(article.create_at)\"\n            :to=\"getDateLink(article.create_at)\"\n          >\n            {{ getDateTitle(article.create_at) }}\n          </router-link>\n          <i18n zh=\"发布在 \" en=\"in category \" />\n          <span class=\"category-link\" v-for=\"(category, index) in article.category\" :key=\"index\">\n            <router-link\n              :to=\"getCategoryArchiveRoute(category.slug)\"\n              :title=\"category.description || category.name\"\n            >\n              <i18n :zh=\"category.name\" :en=\"category.slug\" />\n            </router-link>\n            <span v-if=\"article.category[index + 1]\">\n              <i18n zh=\"、\" en=\",\" />\n            </span>\n          </span>\n          <span v-if=\"!article.category.length\">\n            <i18n zh=\"未知分类下\" en=\"(no catgory)\" />\n          </span>\n          <span class=\"separator\">|</span>\n          <responsive>\n            <template #desktop>\n              <i18n>\n                <template #zh>当前已被围观 {{ article.meta.views }} 次</template>\n                <template #en>{{ article.meta.views }} views.</template>\n              </i18n>\n            </template>\n            <template #mobile>{{ article.meta.views }} views.</template>\n          </responsive>\n        </p>\n        <p class=\"item\">\n          <span class=\"title\">\n            <i18n zh=\"相关标签：\" en=\"Related tags:\" />\n          </span>\n          <span class=\"tag-link\" v-for=\"(tag, index) in article.tag\" :key=\"index\">\n            <router-link :to=\"getTagArchiveRoute(tag.slug)\" :title=\"tag.description || tag.name\">\n              <i18n :zh=\"tag.name\" :en=\"tag.slug\" />\n            </router-link>\n            <span v-if=\"article.tag[index + 1]\">\n              <i18n zh=\"、\" en=\",\" />\n            </span>\n          </span>\n        </p>\n        <p class=\"item\">\n          <span class=\"title\">\n            <i18n zh=\"永久地址：\" en=\"Article address:\" />\n          </span>\n          <span class=\"site-url\" @click=\"copyArticleUrl\">\n            {{ articleUrl }}\n          </span>\n        </p>\n        <div class=\"item\">\n          <i18n>\n            <template #zh>\n              <span class=\"title\">版权声明：</span>\n              <ulink href=\"https://creativecommons.org/licenses/by-nc/3.0/cn/deed.zh\">\n                自由转载 - 署名 - 非商业性使用\n              </ulink>\n            </template>\n            <template #en>\n              <span class=\"title\">Copyright clarify:</span>\n              <ulink href=\"https://creativecommons.org/licenses/by-nc/3.0/cn/deed.en\">\n                Creative Commons BY-NC 3.0 CN\n              </ulink>\n            </template>\n          </i18n>\n        </div>\n      </div>\n    </template>\n  </placeholder>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, PropType } from 'vue'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { Article } from '/@/store/article'\n  import { Language } from '/@/language/data'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { copy } from '/@/utils/clipboard'\n  import { humanizeYMD, dateToYMD } from '/@/transforms/moment'\n  import { getPageUrl } from '/@/transforms/url'\n  import {\n    getArticleDetailRoute,\n    getTagArchiveRoute,\n    getCategoryArchiveRoute,\n    getDateArchiveRoute\n  } from '/@/transforms/route'\n\n  export default defineComponent({\n    name: 'ArticleMeta',\n    props: {\n      article: {\n        type: Object as PropType<Article>,\n        required: false\n      },\n      fetching: {\n        type: Boolean,\n        required: true\n      }\n    },\n    setup(props) {\n      const { i18n, isMobile } = useEnhancer()\n      const articleUrl = computed(() => getPageUrl(getArticleDetailRoute(props.article?.id!)))\n\n      const getDateTitle = (date: string) => {\n        return humanizeYMD(date, i18n.language.value as Language)\n      }\n\n      const getDateLink = (date: string) => {\n        return getDateArchiveRoute(dateToYMD(new Date(date)))\n      }\n\n      const copyArticleUrl = () => {\n        if (articleUrl.value) {\n          copy(articleUrl.value)\n        }\n      }\n\n      return {\n        VALUABLE_LINKS,\n        LANGUAGE_KEYS,\n        isMobile,\n        articleUrl,\n        copyArticleUrl,\n        getDateTitle,\n        getDateLink,\n        getTagArchiveRoute,\n        getCategoryArchiveRoute\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @use 'sass:math';\n  @import 'src/styles/init.scss';\n\n  .metas,\n  .metas-skeleton {\n    padding: $gap;\n  }\n\n  .metas {\n    .item {\n      margin-bottom: $lg-gap;\n      line-height: 1.4em;\n      word-break: break-all;\n      padding-left: $gap;\n      border-left: 6px solid $module-bg-darker-1;\n\n      &:last-child {\n        margin: 0;\n      }\n\n      a {\n        border-bottom: 1px solid transparent;\n        &:hover {\n          text-decoration: none;\n          border-color: initial;\n        }\n      }\n\n      .date-link,\n      .tag-link {\n        margin-right: math.div($sm-gap, 2);\n      }\n\n      .separator {\n        margin: 0 $sm-gap;\n      }\n\n      .date-link {\n        text-transform: uppercase;\n      }\n\n      .category-link,\n      .tag-link {\n        text-transform: capitalize;\n      }\n\n      .title {\n        margin-right: $sm-gap;\n      }\n\n      .site-url {\n        border-bottom: 1px solid;\n        cursor: pointer;\n        color: $link-color;\n        &:hover {\n          color: $link-color-hover;\n        }\n      }\n    }\n\n    &.mobile {\n      .item {\n        line-height: 2.3em;\n        margin: 0;\n        padding: 0;\n        border: none;\n\n        > .title.en {\n          width: auto;\n          margin-right: $gap;\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"related\" :class=\"{ mobile: isMobile }\">\n    <placeholder :loading=\"fetching\" :data=\"!!articles.length\">\n      <template #loading>\n        <skeleton-paragraph v-if=\"isMobile\" class=\"skeleton\" line-height=\"1em\" :lines=\"4\" />\n        <ul class=\"skeleton-list\" v-else>\n          <skeleton-base class=\"article\" v-for=\"item in 4\" :key=\"item\" />\n        </ul>\n      </template>\n      <template #default>\n        <ul class=\"articles\" key=\"articles\">\n          <li\n            v-for=\"(article, index) in articles.slice(0, isMobile ? 4 : 6)\"\n            :class=\"{ disabled: article.disabled }\"\n            :key=\"index\"\n            class=\"item\"\n          >\n            <router-link\n              class=\"item-article\"\n              :title=\"article.title\"\n              :to=\"getArticleDetailRoute(article.id)\"\n            >\n              <div\n                class=\"thumb\"\n                :style=\"{\n                  backgroundImage: `url(${getRelatedArticleThumb(article.thumb)})`\n                }\"\n              />\n              <div class=\"title\">{{ article.title }}</div>\n            </router-link>\n          </li>\n        </ul>\n      </template>\n    </placeholder>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, PropType } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { getArticleDetailRoute } from '/@/transforms/route'\n  import { getArchiveArticleThumbnailUrl } from '/@/transforms/thumbnail'\n\n  export default defineComponent({\n    name: 'ArticleRelated',\n    props: {\n      articles: {\n        type: Array as PropType<$TODO[]>,\n        required: true\n      },\n      fetching: {\n        type: Boolean,\n        required: true\n      }\n    },\n    setup() {\n      const { globalState, isMobile } = useEnhancer()\n      const getRelatedArticleThumb = (thumb: string) => {\n        return getArchiveArticleThumbnailUrl(thumb, globalState.imageExt.value.isWebP)\n      }\n\n      return {\n        isMobile,\n        getArticleDetailRoute,\n        getRelatedArticleThumb\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .related {\n    overflow: hidden;\n\n    .skeleton-list {\n      padding: 0;\n      margin: 0;\n      height: 7rem;\n      overflow: hidden;\n      display: flex;\n\n      .article {\n        width: 12rem;\n        margin-right: 1rem;\n\n        &:last-child {\n          margin-right: 0;\n        }\n      }\n    }\n\n    .articles {\n      list-style: none;\n      padding: 0;\n      margin: 0;\n      width: 100%;\n      overflow: hidden;\n      margin-bottom: -$gap;\n\n      .item {\n        float: left;\n        width: calc((100% - #{$gap * 2}) / 3);\n        margin-right: $gap;\n        margin-bottom: $gap;\n        @include radius-box($sm-radius);\n        @include common-bg-module();\n\n        &.disabled {\n          pointer-events: none;\n          opacity: 0.8;\n        }\n\n        &:nth-child(3n) {\n          margin-right: 0;\n          margin-bottom: 0;\n        }\n\n        .item-article {\n          display: block;\n          position: relative;\n          overflow: hidden;\n          opacity: 0.8;\n          transition: opacity $transition-time-normal;\n\n          .thumb {\n            width: 100%;\n            height: 7.4rem;\n            background-color: $module-bg-darker-2;\n            background-size: cover;\n            background-position: 50% 40%;\n            transition: background-position $transition-time-fast * 2;\n          }\n\n          .title {\n            display: block;\n            width: 100%;\n            padding: 0 1em;\n            line-height: 2.4;\n            text-align: center;\n            font-size: $font-size-h6;\n            color: $text-secondary;\n            transition: color $transition-time-fast;\n            @include text-overflow();\n          }\n\n          &:hover {\n            opacity: 1;\n\n            .thumb {\n              background-position: 50% 50%;\n            }\n\n            .title {\n              color: $link-color;\n            }\n          }\n        }\n      }\n    }\n\n    &.mobile {\n      .articles {\n        .item {\n          width: calc((100% - #{$gap}) / 2);\n          margin-right: $gap;\n          margin-bottom: $gap;\n          &:nth-child(2n) {\n            margin-right: 0;\n            margin-bottom: 0;\n          }\n\n          .thumb {\n            height: 6rem;\n          }\n        }\n      }\n    }\n  }\n</style>\n","/**\n * @file Regex constant\n * @module constant.regex\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const email = /\\w[-\\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\\.)+[A-Za-z]{2,14}/\nexport const url =\n  /^((https|http):\\/\\/)+[A-Za-z0-9]+\\.[A-Za-z0-9]+[\\/=\\?%\\-&_~`@[\\]\\':+!]*([^<>\\\"\\\"])*$/\n","/**\n * @file Editable element util\n * @module util.editable\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const focusPosition = (element: HTMLElement, position: number = 0) => {\n  if (!element) {\n    return\n  }\n\n  // 1. focus\n  element.focus()\n  // 2. position\n  // first text position\n  if (!position) {\n    const range = window.getSelection()?.getRangeAt(0) as Range\n    const clone = range.cloneRange()\n    clone.selectNodeContents(element)\n    clone.setEnd(range.endContainer, range.endOffset)\n    return clone.toString().length\n  }\n  // position\n  let length = 0\n  let abort = false\n\n  const visit = (parentNode: any) => {\n    const nodes = parentNode.childNodes\n    for (let i = 0; i < nodes.length; ++i) {\n      const node = nodes[i]\n      const isNewLine = node.nodeType === 1 && node.tagName === 'BR'\n      // 文本节点且不是换行\n      if (node.nodeType !== 3 && !isNewLine) {\n        visit(node)\n        return\n      }\n\n      length += isNewLine ? 1 : node.textContent.length\n      if (length >= position) {\n        if (abort) {\n          visit(node)\n          return\n        }\n\n        abort = true\n        const selection = document.getSelection() as Selection\n        const range = document.createRange()\n        const sub = length - node.textContent.length\n        range.setStart(node, position - sub)\n        range.setEnd(node, position - sub)\n        selection.removeAllRanges()\n        selection.addRange(range)\n        break\n      }\n    }\n  }\n  visit(element)\n}\n\nexport interface IncertOption {\n  element: HTMLElement | void\n  content: string | [string, string]\n}\nexport const insertContent = (option: IncertOption) => {\n  const { element, content } = option\n  const [before, after] = Array.isArray(content) ? content : [content]\n\n  if (!element || (!before && !after)) {\n    return false\n  }\n\n  // 如果选中了内容，则把选中的内容替换，\n  const currentText = element.innerText\n  const selection = (window.getSelection || document.getSelection)() as Selection\n  const selectedText = selection?.toString()\n  if (selectedText) {\n    // TODO: 正则可能会匹配到重复的前面的字符，故不可靠\n    // 替换所有选中文本 -> 然后定位到所替换文本的最后一个字符\n    // 对于选中逻辑来说，既定的任何单个字符都理解为替换\n    const isInsertReplace = !!before && !after\n    const newSelectedText = isInsertReplace ? before : before + selectedText + after\n    const newText = currentText.replace(selectedText, newSelectedText)\n    // console.log('选中插入', newText)\n    element.innerText = newText\n    focusPosition(element, newText.indexOf(newSelectedText) + newSelectedText.length - 1)\n  } else {\n    // 否则追加新内容\n    const newInsertText = before + after\n    const selectedRange = (() => {\n      // eslint-disable-next-line no-empty\n      try {\n        return selection.getRangeAt(0)\n      } catch (error) {}\n    })() as Range\n    const startPoint = selectedRange?.startOffset\n    const endPoint = selectedRange?.endOffset\n\n    // 若拿到了光标，则在光标位置插入新内容 -> 然后定位到新内容的最后一个字符\n    if (selectedRange && startPoint === endPoint && startPoint > 0) {\n      const newTexts = [\n        currentText.slice(0, startPoint),\n        newInsertText,\n        currentText.slice(startPoint)\n      ]\n      // console.log('光标插入', startPoint, newTexts)\n      element.innerText = newTexts.join('')\n      focusPosition(element, newTexts[0].length + newTexts[1].length - 1)\n    } else {\n      // 否则末端追加内容，并定位到最后一个字符\n      const newText = currentText + newInsertText\n      // console.log('尾部插入', newText)\n      element.innerText = newText\n      focusPosition(element, newText.length - 1)\n      // TODO:????\n      // element.scrollIntoView()\n      // element?.scrollTop = element?.scrollHeight\n    }\n  }\n}\n","/**\n * @file comment helper\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { email as emailRegex } from '/@/constants/regex'\nimport { getGravatarByEmail } from '/@/transforms/thumbnail'\nimport { getFileCDNUrl } from '/@/transforms/url'\n\nexport const EMOJIS = [\n  ...['😃', '😂', '😅', '😉', '😌', '😔', '😓', '😢', '😍', '😘', '😜', '😡'],\n  ...['😤', '😭', '😱', '😳', '😵', '🌚'],\n  ...['🙏', '👆', '👇', '👌', '🤘', '👍', '👎', '💪', '👏'],\n  ...['🌻', '🌹', '💊', '🐶', '❤️', '💔', '💩', '👻'],\n  ...['🇨🇳', '🇺🇸', '🇯🇵 ', '🚩']\n]\n\nexport enum CommentEvent {\n  Reply = 'reply',\n  Like = 'like',\n  Sort = 'sort',\n  Page = 'page',\n  CancelReply = 'cancel-reply',\n  SyncProfile = 'update:profile',\n  SaveProfile = 'save-profile',\n  EditProfile = 'edit-profile',\n  ClearProfile = 'clear-profile',\n  CancelProfile = 'cancel-profile',\n  TogglePreview = 'toggle-preview',\n  Submit = 'submit'\n}\n\nexport const humanizeGravatarUrlByEmail = (email: string) => {\n  return emailRegex.test(email) ? getGravatarByEmail(email) : getFileCDNUrl('/images/gravatar.png')\n}\n\nexport const luanchEmojiRain = (content: string) => {\n  const luanchRain = (window as any).$luanchEmojiRain\n  if (content.includes('2333') || content.includes('哈哈')) {\n    luanchRain({\n      speed: 12,\n      staggered: true,\n      increaseSpeed: 0.4,\n      emoji: getFileCDNUrl('/images/emojis/haha.png')\n    })\n  } else if (content.includes('666') || content.includes('赞')) {\n    luanchRain({\n      speed: 12,\n      staggered: true,\n      increaseSpeed: 0.4,\n      emoji: getFileCDNUrl('/images/emojis/666.png')\n    })\n  } else if (content.includes('呵呵')) {\n    luanchRain({\n      staggered: false,\n      speed: 8,\n      increaseSpeed: 0.04,\n      emoji: getFileCDNUrl('/images/emojis/hehe.png')\n    })\n  } else if (Math.random() <= 0.6) {\n    // 否则以 60% 的概率随机出现\n    luanchRain({\n      scale: 0.6,\n      staggered: true,\n      speed: 8,\n      increaseSpeed: 0.04,\n      emoji: getFileCDNUrl('/images/emojis/funny.png')\n    })\n  }\n}\n","<template>\n  <placeholder :loading=\"fetching\">\n    <template #loading>\n      <div class=\"topbar-skeleton\" key=\"skeleton\">\n        <div class=\"statistics-skeleton\">\n          <skeleton-line class=\"count-skeleton\" />\n          <skeleton-line class=\"like-skeleton\" />\n        </div>\n        <div class=\"sort-skeleton\">\n          <skeleton-line />\n        </div>\n      </div>\n    </template>\n    <template #default>\n      <div class=\"topbar\" key=\"element\">\n        <div class=\"statistics\">\n          <div class=\"total\">\n            <strong class=\"count\">{{ total || 0 }}</strong>\n            <i18n :lkey=\"LANGUAGE_KEYS.COMMENT_LIST_COUNT\" />\n          </div>\n          <button class=\"like\" :class=\"{ liked: isPageLiked }\" @click=\"handleLikePage\">\n            <i class=\"iconfont icon-heart\" />\n            <strong class=\"count\">{{ likes || 0 }}</strong>\n            <template v-if=\"isZhLang && isMobile\">赞</template>\n            <template v-else>\n              <i18n :lkey=\"LANGUAGE_KEYS.COMMENT_LIKE_COUNT\" />\n            </template>\n          </button>\n          <desktop-only>\n            <button class=\"sponsor\" @click=\"handleSponsor\">\n              <i class=\"iconfont icon-dollar\" />\n            </button>\n            <client-only>\n              <popup v-model:visible=\"isVisibleSponsor\" :border=\"false\">\n                <iframe class=\"sponsor-modal\" :src=\"VALUABLE_LINKS.SPONSOR\" />\n              </popup>\n            </client-only>\n          </desktop-only>\n        </div>\n        <div class=\"sort\">\n          <button\n            class=\"button\"\n            :class=\"{ actived: sort === SortType.Desc }\"\n            @click=\"handleSortList(SortType.Desc)\"\n          >\n            <i18n :lkey=\"LANGUAGE_KEYS.COMMENT_PAGINATION_NEW\" />\n          </button>\n          <button\n            class=\"button\"\n            :class=\"{ actived: sort === SortType.Hot }\"\n            @click=\"handleSortList(SortType.Hot)\"\n          >\n            <i18n :lkey=\"LANGUAGE_KEYS.COMMENT_PAGINATION_HOT\" />\n          </button>\n        </div>\n      </div>\n    </template>\n  </placeholder>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, PropType } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useArticleDetailStore } from '/@/store/article'\n  import { useMetaStore } from '/@/store/meta'\n  import { SortType, CommentPostType } from '/@/constants/state'\n  import { GAEventTags, GAEventActions } from '/@/constants/gtag'\n  import { usePageLike } from '/@/transforms/state'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n\n  export enum Events {\n    Sort = 'sort'\n  }\n  export default defineComponent({\n    name: 'CommentTopbar',\n    props: {\n      fetching: {\n        type: Boolean,\n        required: true\n      },\n      total: {\n        type: Number\n      },\n      sort: {\n        type: Number as PropType<SortType>,\n        required: true\n      },\n      likes: {\n        type: Number,\n        required: true\n      },\n      postId: {\n        type: Number,\n        required: true\n      }\n    },\n    emits: [Events.Sort],\n    setup(props, context) {\n      const { i18n, gtag, isMobile, isZhLang } = useEnhancer()\n      const articleDetailStore = useArticleDetailStore()\n      const metaStore = useMetaStore()\n\n      const { isLiked: isPageLiked, like: likePage } = usePageLike(props.postId)\n      const isVisibleSponsor = ref(false)\n\n      const handleSortList = (sort: SortType) => {\n        if (sort !== props.sort) {\n          context.emit(Events.Sort, sort)\n        }\n      }\n\n      const handleLikePage = async () => {\n        if (isPageLiked.value) {\n          return false\n        }\n        gtag?.event('喜欢当页', {\n          event_category: GAEventActions.Click,\n          event_label: GAEventTags.Comment\n        })\n        try {\n          if (props.postId === CommentPostType.Guestbook) {\n            await metaStore.postSiteLike()\n          } else {\n            await articleDetailStore.postArticleLike(props.postId)\n          }\n          likePage()\n        } catch (error) {\n          const message = i18n.t(LANGUAGE_KEYS.COMMENT_POST_ERROR_ACTION)\n          console.warn(message, error)\n          alert(message)\n        }\n      }\n\n      const handleSponsor = () => {\n        isVisibleSponsor.value = true\n        gtag?.event('评论赞赏弹窗', {\n          event_category: GAEventActions.Click,\n          event_label: GAEventTags.Comment\n        })\n      }\n\n      return {\n        VALUABLE_LINKS,\n        LANGUAGE_KEYS,\n        SortType,\n        isMobile,\n        isZhLang,\n        isVisibleSponsor,\n        isPageLiked,\n        handleSponsor,\n        handleLikePage,\n        handleSortList\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n  $topbar-size: 2em;\n\n  .sponsor-modal {\n    width: 600px;\n    height: 200px;\n    border-radius: $sm-radius !important;\n  }\n\n  .topbar,\n  .topbar-skeleton {\n    display: flex;\n    padding-bottom: $gap;\n    margin-bottom: $lg-gap;\n    align-items: center;\n    justify-content: space-between;\n    border-bottom: 1px solid $module-bg-darker-1;\n  }\n\n  .topbar-skeleton {\n    .statistics-skeleton {\n      display: flex;\n      width: 70%;\n\n      .count-skeleton {\n        width: 20%;\n        height: $topbar-size;\n        margin-right: 1rem;\n      }\n      .like-skeleton {\n        height: $topbar-size;\n        width: 40%;\n      }\n    }\n\n    .sort-skeleton {\n      width: 20%;\n      height: $topbar-size;\n    }\n  }\n\n  .topbar {\n    .statistics {\n      display: flex;\n\n      .like,\n      .sponsor,\n      .total {\n        height: $topbar-size;\n        line-height: $topbar-size;\n        padding: 0 0.6em;\n        margin-right: $sm-gap;\n        background-color: $module-bg-darker-1;\n        @include radius-box($mini-radius);\n\n        .count {\n          margin-right: $xs-gap;\n        }\n      }\n\n      .like {\n        padding-left: 0;\n        @include background-transition();\n\n        .iconfont {\n          display: inline-block;\n          width: $topbar-size;\n          text-align: center;\n          margin-right: $sm-gap;\n          background-color: $module-bg-darker-2;\n          @include background-transition();\n        }\n\n        &:hover {\n          background-color: $module-bg-hover;\n          .iconfont {\n            background-color: $module-bg-darker-3;\n          }\n        }\n\n        &.liked {\n          cursor: no-drop;\n          .iconfont {\n            color: $red;\n          }\n        }\n      }\n\n      .sponsor {\n        color: $text-reversal;\n        background-color: $primary-lighter;\n        @include background-transition();\n        &:hover {\n          background-color: $primary;\n        }\n      }\n    }\n\n    .sort {\n      .button {\n        margin-left: $gap;\n\n        &.actived {\n          color: $link-color-hover;\n          font-weight: bold;\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <placeholder :loading=\"fetching\" :data=\"hasData\">\n    <template #loading>\n      <ul class=\"main-skeleton\">\n        <li v-for=\"item in isMobile ? 3 : 5\" :key=\"item\" class=\"item\">\n          <div class=\"gravatar\">\n            <skeleton-base />\n          </div>\n          <div class=\"content\">\n            <skeleton-paragraph :lines=\"4\" />\n          </div>\n        </li>\n      </ul>\n    </template>\n    <template #placeholder>\n      <div class=\"list-empty\">\n        <i18n :lkey=\"LANGUAGE_KEYS.COMMENT_LIST_PLACEHOLDER\" />\n      </div>\n    </template>\n    <template #default>\n      <div class=\"main\">\n        <slot name=\"list\"></slot>\n        <slot name=\"pagination\"></slot>\n      </div>\n    </template>\n  </placeholder>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n\n  export default defineComponent({\n    name: 'CommentMain',\n    props: {\n      fetching: {\n        type: Boolean,\n        default: false\n      },\n      hasData: {\n        type: Boolean,\n        required: true\n      }\n    },\n    setup() {\n      const { isMobile } = useEnhancer()\n      return {\n        LANGUAGE_KEYS,\n        isMobile\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .main-skeleton {\n    padding: 0;\n\n    .item {\n      display: flex;\n      justify-content: space-around;\n      align-items: center;\n      margin-bottom: $lg-gap;\n\n      .gravatar {\n        width: 5rem;\n        height: 5rem;\n      }\n\n      .content {\n        width: calc((100% - 5rem) * 0.9);\n      }\n    }\n  }\n\n  .list-empty {\n    color: $text-secondary;\n    font-weight: bold;\n    text-align: center;\n    line-height: 8rem;\n  }\n</style>\n","<template>\n  <a v-if=\"href\" target=\"_blank\" rel=\"external nofollow noopener\" :href=\"href\" v-bind=\"$attrs\">\n    <slot></slot>\n  </a>\n  <span v-else v-bind=\"$attrs\">\n    <slot></slot>\n  </span>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  export default defineComponent({\n    name: 'CommentLink',\n    props: {\n      href: String\n    }\n  })\n</script>\n","<template>\n  <span class=\"ua\">\n    <span class=\"os\">\n      <i v-if=\"osIconName\" class=\"iconfont\" :class=\"`icon-${osIconName}`\" />\n      <span>{{ uaResult.result.os.name }}</span>\n      <span>{{ uaResult.result.os.version }}</span>\n    </span>\n    <span class=\"browser\">\n      <i class=\"iconfont\" :class=\"`icon-${browserIconName}`\" />\n      <span>{{ uaResult.result.browser.name }}</span>\n      <span>{{ uaResult.result.browser.major }}</span>\n    </span>\n  </span>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed } from 'vue'\n  import { uaParser } from '/@/transforms/ua'\n\n  // https://github.com/faisalman/ua-parser-js#methods\n  const osIconsNameMap = {\n    'Mac OS': 'apple',\n    Windows: 'windows',\n    Android: 'android',\n    Ubuntu: 'ubuntu',\n    Linux: 'linux',\n    iOS: 'apple',\n    Unix: 'unix'\n  }\n\n  const browersIconsNameMap = {\n    Chrome: 'chrome',\n    Chromium: 'chrome',\n    WeChat: 'wechat',\n    Safari: 'safari',\n    'Mobile Safari': 'safari',\n    UCBrowser: 'uc',\n    Maxthon: 'maxthon',\n    Firefox: 'firefox',\n    IE: 'ie',\n    Opera: 'opera',\n    Edge: 'edge'\n  }\n\n  export default defineComponent({\n    name: 'CommentUA',\n    props: {\n      ua: {\n        type: String,\n        required: true\n      }\n    },\n    setup(props) {\n      const uaResult = computed(() => uaParser(props.ua))\n      const osIconName = computed(() => {\n        const osName = uaResult.value.result.os.name\n        return osName && osIconsNameMap[osName]\n      })\n      const browserIconName = computed(() => {\n        const browserName = uaResult.value.result.browser.name\n        return browersIconsNameMap[browserName || 'internet']\n      })\n\n      return {\n        uaResult,\n        osIconName,\n        browserIconName\n      }\n    }\n  })\n</script>\n","<template>\n  <li\n    :key=\"comment.id\"\n    :id=\"getCommentItemElementID(comment.id)\"\n    :class=\"{ mobile: isMobile, child: isChild }\"\n    class=\"comment-item\"\n  >\n    <desktop-only>\n      <div class=\"cm-avatar\">\n        <comment-link class=\"link\" :href=\"comment.author.site\">\n          <img\n            :alt=\"comment.author.name || t(LANGUAGE_KEYS.COMMENT_ANONYMOUS)\"\n            :src=\"humanizeGravatarUrlByEmail(comment.author.email)\"\n            draggable=\"false\"\n          />\n        </comment-link>\n      </div>\n    </desktop-only>\n    <div class=\"cm-body\">\n      <div class=\"cm-header\">\n        <comment-link class=\"user-name\" :href=\"comment.author.site\">\n          {{ firstUpperCase(comment.author.name) }}\n        </comment-link>\n        <comment-ua v-if=\"comment.agent\" :ua=\"comment.agent\" />\n        <desktop-only>\n          <span v-if=\"comment.ip_location\" class=\"location\">\n            <span>{{ comment.ip_location.country }}</span>\n            <span v-if=\"comment.ip_location.country && comment.ip_location.city\" class=\"separator\"\n              >-</span\n            >\n            <span>{{ comment.ip_location.city }}</span>\n          </span>\n        </desktop-only>\n        <span class=\"flool\">#{{ comment.id }}</span>\n      </div>\n      <div class=\"cm-content\">\n        <p v-if=\"comment.pid\" class=\"reply\">\n          <span class=\"text\">\n            <i18n :lkey=\"LANGUAGE_KEYS.COMMENT_REPLY\" />\n          </span>\n          <button class=\"parent\" @click=\"scrollToCommentItem(comment.pid)\">\n            {{ getReplyParentCommentText(comment.pid) }}\n          </button>\n          <i18n zh=\"：\" en=\":\" />\n        </p>\n        <div\n          class=\"markdown-html comment\"\n          v-html=\"markdownToHTML(comment.content, { sanitize: true })\"\n        />\n      </div>\n      <div class=\"cm-footer\">\n        <span class=\"create_at\">{{ humanlizeDate(comment.create_at) }}</span>\n        <button class=\"reply\" @click=\"replyComment(comment.id)\">\n          <i class=\"iconfont icon-reply\" />\n          <i18n :lkey=\"LANGUAGE_KEYS.COMMENT_REPLY\" />\n        </button>\n        <button\n          class=\"like\"\n          :class=\"{\n            liked: liked,\n            actived: Boolean(comment.likes)\n          }\"\n          :disabled=\"liked\"\n          @click=\"likeComment(comment.id)\"\n        >\n          <i class=\"iconfont icon-zan\" />\n          <i18n :lkey=\"LANGUAGE_KEYS.COMMENT_LIKE\" />\n          <span> ({{ comment.likes }})</span>\n        </button>\n      </div>\n      <div class=\"cm-children\">\n        <slot name=\"children\"></slot>\n      </div>\n    </div>\n  </li>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, PropType } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useCommentStore, Comment } from '/@/store/comment'\n  import { getCommentItemElementID } from '/@/constants/anchor'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { markdownToHTML } from '/@/transforms/markdown'\n  import { timeAgo } from '/@/transforms/moment'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { scrollToElementAnchor } from '/@/utils/scroller'\n  import { CommentEvent, humanizeGravatarUrlByEmail } from '../helper'\n  import CommentLink from './link.vue'\n  import CommentUa from './ua.vue'\n\n  export default defineComponent({\n    name: 'CommentItem',\n    components: {\n      CommentLink,\n      CommentUa\n    },\n    props: {\n      comment: {\n        type: Object as PropType<Comment>,\n        required: true\n      },\n      liked: {\n        type: Boolean,\n        default: false\n      },\n      isChild: {\n        type: Boolean,\n        default: false\n      }\n    },\n    emits: [CommentEvent.Reply, CommentEvent.Like],\n    setup(_, context) {\n      const { i18n, isMobile } = useEnhancer()\n      const commentStore = useCommentStore()\n\n      const getReplyParentCommentText = (parentCommentId: number) => {\n        const authorName = commentStore.comments.find((comment) => comment.id === parentCommentId)\n          ?.author.name\n        const nameText = authorName ? `@${authorName}` : ''\n        const idText = `#${parentCommentId}`\n        return `${idText} ${nameText}`\n      }\n\n      const humanlizeDate = (date: string) => {\n        return timeAgo(date, i18n.language.value as any)\n      }\n\n      const replyComment = (commentId: number) => {\n        context.emit(CommentEvent.Reply, commentId)\n      }\n\n      const likeComment = (commentId: number) => {\n        context.emit(CommentEvent.Like, commentId)\n      }\n\n      const scrollToCommentItem = (commentId: number) => {\n        scrollToElementAnchor(getCommentItemElementID(commentId), -300)\n      }\n\n      return {\n        LANGUAGE_KEYS,\n        t: i18n.t,\n        isMobile,\n        humanlizeDate,\n        humanizeGravatarUrlByEmail,\n        getCommentItemElementID,\n        getReplyParentCommentText,\n        firstUpperCase,\n        markdownToHTML,\n        replyComment,\n        likeComment,\n        scrollToCommentItem\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .comment-item {\n    position: relative;\n    padding-left: 2rem;\n    margin-top: $lg-gap;\n    &:first-child {\n      margin-top: 0;\n    }\n    &.child {\n      margin-top: $xs-gap;\n      padding-top: $xs-gap;\n      border-top: 1px dashed $module-bg-darker-3;\n      &:first-child {\n        margin-top: $gap;\n      }\n      &:last-child {\n        .cm-body {\n          padding-bottom: 0;\n        }\n      }\n\n      .cm-avatar {\n        top: $lg-gap * 2;\n      }\n    }\n\n    .cm-avatar {\n      display: block;\n      position: absolute;\n      left: 0;\n      top: $gap * 2;\n\n      .link {\n        $size: 4.8rem;\n        display: block;\n        background-color: $module-bg-darker-2;\n        border: 5px solid $module-bg-lighter;\n        border-radius: $sm-radius;\n        width: $size;\n        height: $size;\n\n        img {\n          width: 100%;\n          height: 100%;\n          border-radius: $xs-radius;\n        }\n      }\n    }\n\n    .cm-body {\n      display: block;\n      width: 100%;\n      height: 100%;\n      padding: $sm-gap $sm-gap $sm-gap ($lg-gap * 3);\n      background-color: $module-bg-darker-1;\n      @include radius-box($xs-radius);\n      @include background-transition();\n\n      > .cm-header {\n        display: block;\n        position: relative;\n\n        > .user-name {\n          font-weight: bold;\n          margin-right: $gap;\n\n          &:hover {\n            border-bottom: 1px solid;\n          }\n        }\n\n        ::v-deep(.os),\n        ::v-deep(.browser),\n        .location {\n          color: $text-disabled;\n          font-size: $font-size-small;\n          margin-right: $gap;\n\n          .iconfont {\n            margin-right: $xs-gap;\n          }\n\n          .separator {\n            margin: 0 $xs-gap;\n          }\n        }\n\n        > .flool {\n          float: right;\n          line-height: 1.8;\n          color: $text-dividers;\n          font-size: $font-size-small;\n          font-weight: bold;\n        }\n      }\n\n      > .cm-content {\n        padding-right: $xs-gap;\n        user-select: text;\n\n        .reply {\n          display: flex;\n          align-items: center;\n          margin-top: $sm-gap;\n          margin-bottom: -$xs-gap;\n          font-size: $font-size-h6;\n          font-weight: bold;\n          color: $text-disabled;\n\n          .text {\n            margin-right: $xs-gap;\n          }\n\n          .parent {\n            font-weight: bold;\n            color: $link-color;\n            &:hover {\n              color: $link-color-hover;\n            }\n          }\n        }\n\n        .markdown-html {\n          margin: $sm-gap 0;\n        }\n      }\n\n      > .cm-footer {\n        display: flex;\n\n        > .create_at,\n        > .reply,\n        > .like {\n          color: $text-disabled;\n          font-size: $font-size-small;\n          margin-right: $gap;\n\n          .iconfont {\n            margin-right: $xs-gap;\n          }\n        }\n\n        .reply {\n          &:hover {\n            color: $link-color;\n          }\n        }\n\n        .like {\n          &:hover {\n            color: $red;\n          }\n          &.liked {\n            color: $red;\n            font-weight: bold;\n          }\n          &.actived {\n            font-weight: bold;\n          }\n        }\n      }\n    }\n\n    &:hover {\n      .cm-body {\n        background-color: $module-bg-hover;\n      }\n    }\n\n    &.mobile {\n      padding: 0;\n      margin-top: $gap;\n\n      .cm-body {\n        padding: $sm-gap $gap;\n      }\n    }\n  }\n</style>\n","<template>\n  <ul class=\"comment-list\" ref=\"listElement\">\n    <transition-group name=\"list-fade\" @after-enter=\"addCommentAnimateDone\">\n      <comment-item\n        v-for=\"item in comments\"\n        :key=\"item.comment.id\"\n        :comment=\"item.comment\"\n        :liked=\"isCommentLiked(item.comment.id)\"\n        :is-child=\"isChildList\"\n        @like=\"likeComment\"\n        @reply=\"replyComment\"\n      >\n        <template #children v-if=\"item.children.length\">\n          <comment-list\n            :comments=\"buildeCommentTree(item.children)\"\n            :isChildList=\"true\"\n            @reply=\"replyComment\"\n          />\n        </template>\n      </comment-item>\n    </transition-group>\n  </ul>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, onMounted, onBeforeUnmount, PropType } from 'vue'\n  import { useCommentStore, Comment, CommentTreeItem } from '/@/store/comment'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { LozadObserver } from '/@/services/lozad'\n  import { GAEventActions, GAEventTags } from '/@/constants/gtag'\n  import { LOZAD_CLASS_NAME, LOADED_CLASS_NAME } from '/@/services/lozad'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { useCommentsLike } from '/@/transforms/state'\n  import { CommentEvent } from '../helper'\n  import CommentItem from './item.vue'\n\n  export default defineComponent({\n    name: 'CommentList',\n    components: {\n      CommentItem\n    },\n    props: {\n      comments: {\n        type: Array as PropType<Array<CommentTreeItem>>,\n        required: true\n      },\n      isChildList: {\n        type: Boolean,\n        default: false\n      }\n    },\n    emits: [CommentEvent.Reply],\n    setup(_, context) {\n      const { i18n, gtag } = useEnhancer()\n      const { like: likeCommentStorage, isLiked: isCommentLiked } = useCommentsLike()\n      const commentStore = useCommentStore()\n\n      const listElement = ref<any>()\n      const lozadObserver = ref<LozadObserver | null>(null)\n\n      const observeLozad = () => {\n        const lozadElements = (listElement.value as HTMLElement)?.querySelectorAll(\n          `.${LOZAD_CLASS_NAME}`\n        )\n        if (lozadElements?.length) {\n          lozadObserver.value = window.$lozad(lozadElements, {\n            loaded: (element) => element.classList.add(LOADED_CLASS_NAME)\n          })\n          lozadObserver.value.observe()\n        }\n      }\n\n      const addCommentAnimateDone = () => {\n        observeLozad()\n      }\n\n      const replyComment = (commentID: number) => {\n        context.emit(CommentEvent.Reply, commentID)\n      }\n\n      const likeComment = async (commentID: number) => {\n        gtag?.event('欲赞评论', {\n          event_category: GAEventActions.Click,\n          event_label: GAEventTags.Comment\n        })\n        if (isCommentLiked(commentID)) {\n          return false\n        }\n        try {\n          await commentStore.postCommentLike(commentID)\n          likeCommentStorage(commentID)\n        } catch (error) {\n          const message = i18n.t(LANGUAGE_KEYS.COMMENT_POST_ERROR_ACTION)\n          console.warn(message, error)\n          alert(message)\n        }\n      }\n\n      const buildeCommentTree = (comments: Comment[]): Array<CommentTreeItem> => {\n        return comments.map((comment) => ({\n          comment,\n          children: []\n        }))\n      }\n\n      onMounted(() => {\n        observeLozad()\n      })\n      onBeforeUnmount(() => {\n        lozadObserver.value?.observer.disconnect()\n        lozadObserver.value = null\n      })\n\n      return {\n        listElement,\n        addCommentAnimateDone,\n        isCommentLiked,\n        likeComment,\n        replyComment,\n        buildeCommentTree\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .comment-list {\n    padding: 0;\n    margin: 0;\n    list-style-type: none;\n  }\n</style>\n","<template>\n  <transition name=\"module\">\n    <div\n      class=\"loadmore\"\n      v-if=\"\n        !fetching &&\n        pagination?.total_page > 1 &&\n        pagination?.current_page !== pagination?.total_page\n      \"\n    >\n      <button class=\"button\" @click=\"handleLoadmore\">\n        <i18n :lkey=\"LANGUAGE_KEYS.COMMENT_LOADMORE\" />\n        <i class=\"iconfont icon-loadmore\"></i>\n      </button>\n    </div>\n  </transition>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { CommentEvent } from './helper'\n\n  export default defineComponent({\n    name: 'CommentPagination',\n    props: {\n      fetching: {\n        type: Boolean,\n        required: true\n      },\n      pagination: {\n        type: Object,\n        required: false\n      }\n    },\n    setup(props, context) {\n      const handleLoadmore = () => {\n        if (props.pagination) {\n          context.emit(CommentEvent.Page, props.pagination.current_page + 1)\n        }\n      }\n\n      return {\n        LANGUAGE_KEYS,\n        handleLoadmore\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .loadmore {\n    margin: $lg-gap 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    .button {\n      height: 2em;\n      padding: 0 $lg-gap;\n      border-radius: $xs-radius;\n      background-color: $module-bg-darker-1;\n      color: $text-disabled;\n      text-transform: capitalize;\n      &:hover {\n        color: $link-color;\n        background-color: $module-bg-hover;\n      }\n\n      .iconfont {\n        margin-left: $sm-gap;\n      }\n    }\n  }\n</style>\n","<template>\n  <form\n    :id=\"COMMENT_PUBLISHER_ELEMENT_ID\"\n    :class=\"{ mobile: isMobile }\"\n    class=\"publisher\"\n    name=\"comment\"\n  >\n    <div class=\"user\">\n      <!-- profile editor -->\n      <template v-if=\"!cached || editing\">\n        <div class=\"name\">\n          <input\n            v-model=\"profileState.name\"\n            required\n            type=\"text\"\n            name=\"name\"\n            autocomplete=\"on\"\n            :disabled=\"disabled\"\n            :placeholder=\"t(LANGUAGE_KEYS.COMMENT_POST_NAME) + ' *'\"\n          />\n        </div>\n        <div class=\"email\">\n          <input\n            v-model=\"profileState.email\"\n            required\n            type=\"email\"\n            name=\"email\"\n            autocomplete=\"on\"\n            :disabled=\"disabled\"\n            :placeholder=\"t(LANGUAGE_KEYS.COMMENT_POST_EMAIL) + ' *'\"\n          />\n        </div>\n        <div class=\"site\">\n          <input\n            v-model=\"profileState.site\"\n            type=\"url\"\n            name=\"url\"\n            autocomplete=\"on\"\n            :disabled=\"disabled\"\n            :placeholder=\"t(LANGUAGE_KEYS.COMMENT_POST_SITE)\"\n          />\n        </div>\n        <div v-if=\"editing\" class=\"save\">\n          <button type=\"submit\" :disabled=\"disabled\" @click=\"saveUserProfile\">\n            <i class=\"iconfont icon-success\" />\n          </button>\n        </div>\n      </template>\n      <!-- profile setting -->\n      <template v-else>\n        <div class=\"edit\">\n          <strong class=\"name\">{{ firstUpperCase(profileState.name) }}</strong>\n          <span class=\"setting\">\n            <i class=\"iconfont icon-setting\" />\n            <span class=\"account-setting\">\n              <i18n :lkey=\"LANGUAGE_KEYS.COMMENT_ACCOUNT_SETTING\" />\n            </span>\n            <ul class=\"user-tool\">\n              <li @click.stop.prevent=\"editUserProfile\">\n                <i18n :lkey=\"LANGUAGE_KEYS.COMMENT_ACCOUNT_EDIT\" />\n              </li>\n              <li @click.stop.prevent=\"clearUserProfile\">\n                <i18n :lkey=\"LANGUAGE_KEYS.COMMENT_ACCOUNT_CLEAR\" />\n              </li>\n            </ul>\n          </span>\n        </div>\n      </template>\n    </div>\n    <div class=\"postbox\">\n      <div class=\"user\">\n        <desktop-only>\n          <div class=\"gravatar\">\n            <img\n              :alt=\"profileState.name || t(LANGUAGE_KEYS.COMMENT_ANONYMOUS)\"\n              :src=\"humanizeGravatarUrlByEmail(profileState.email)\"\n              draggable=\"false\"\n            />\n          </div>\n        </desktop-only>\n      </div>\n      <div class=\"editor\">\n        <transition name=\"module\">\n          <div v-if=\"Boolean(replyPid)\" class=\"will-reply\">\n            <div class=\"reply-user\">\n              <span class=\"reply-text\">\n                <i18n :lkey=\"LANGUAGE_KEYS.COMMENT_REPLY\" />\n                <button\n                  class=\"reply-user-name\"\n                  @click.prevent=\"scrollToComment(replyingComment.id)\"\n                >\n                  #{{ replyingComment.id }} @{{ replyingComment.author.name }}：\n                </button>\n              </span>\n              <button class=\"cancel iconfont icon-cancel\" @click.prevent=\"cancelCommentReply\" />\n            </div>\n            <div\n              class=\"reply-preview markdown-html comment\"\n              v-html=\"markdownToHTML(replyingComment.content, { sanitize: true })\"\n            />\n          </div>\n        </transition>\n        <slot name=\"pen\"></slot>\n      </div>\n    </div>\n  </form>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, computed, watch } from 'vue'\n  import { useCommentStore, Comment } from '/@/store/comment'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { getCommentItemElementID, COMMENT_PUBLISHER_ELEMENT_ID } from '/@/constants/anchor'\n  import { email as emailRegex, url as urlRegex } from '/@/constants/regex'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { markdownToHTML } from '/@/transforms/markdown'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { scrollToElementAnchor } from '/@/utils/scroller'\n  import { CommentEvent, humanizeGravatarUrlByEmail } from './helper'\n\n  export default defineComponent({\n    name: 'CommentPublisher',\n    props: {\n      disabled: {\n        type: Boolean,\n        required: true\n      },\n      replyPid: {\n        type: Number,\n        required: true\n      },\n      profile: {\n        type: Object,\n        required: true\n      },\n      cached: {\n        type: Boolean,\n        required: true\n      },\n      editing: {\n        type: Boolean,\n        required: true\n      }\n    },\n    emits: [\n      CommentEvent.SyncProfile,\n      CommentEvent.SaveProfile,\n      CommentEvent.EditProfile,\n      CommentEvent.ClearProfile,\n      CommentEvent.CancelProfile,\n      CommentEvent.CancelReply\n    ],\n    setup(props, context) {\n      const { i18n, isMobile } = useEnhancer()\n      const commentStore = useCommentStore()\n\n      const profileState = ref(props.profile)\n      watch(\n        () => props.profile,\n        (profile) => (profileState.value = profile),\n        { deep: true }\n      )\n\n      const replyingComment = computed(\n        () => commentStore.comments.find((comment) => comment.id === props.replyPid) as Comment\n      )\n\n      const saveUserProfile = (event) => {\n        event.preventDefault()\n        if (!props.profile.name) {\n          return alert(i18n.t(LANGUAGE_KEYS.COMMENT_POST_NAME) + '?')\n        }\n        if (!props.profile.email) {\n          return alert(i18n.t(LANGUAGE_KEYS.COMMENT_POST_EMAIL) + '?')\n        }\n        if (!emailRegex.test(props.profile.email)) {\n          return alert(i18n.t(LANGUAGE_KEYS.COMMENT_POST_ERROR_EMAIL))\n        }\n        if (props.profile.site && !urlRegex.test(props.profile.site)) {\n          return alert(i18n.t(LANGUAGE_KEYS.COMMENT_POST_ERROR_URL))\n        }\n        context.emit(CommentEvent.SaveProfile)\n      }\n\n      const editUserProfile = () => {\n        if (!props.editing) {\n          context.emit(CommentEvent.EditProfile)\n        }\n      }\n\n      const clearUserProfile = () => {\n        if (props.cached) {\n          context.emit(CommentEvent.ClearProfile)\n        }\n      }\n\n      const cancelCommentReply = () => {\n        context.emit(CommentEvent.CancelReply)\n      }\n\n      const scrollToComment = (commentId: number) => {\n        scrollToElementAnchor(getCommentItemElementID(commentId), -300)\n      }\n\n      return {\n        COMMENT_PUBLISHER_ELEMENT_ID,\n        LANGUAGE_KEYS,\n        t: i18n.t,\n        isMobile,\n        firstUpperCase,\n        humanizeGravatarUrlByEmail,\n        profileState,\n        markdownToHTML,\n        replyingComment,\n        cancelCommentReply,\n        scrollToComment,\n        editUserProfile,\n        saveUserProfile,\n        clearUserProfile\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .publisher {\n    display: block;\n    padding-top: $gap;\n    margin-top: $lg-gap;\n    border-top: 1px solid $module-bg-darker-1;\n\n    > .user {\n      width: 100%;\n      height: 2em;\n      line-height: 2em;\n      display: flex;\n      margin-bottom: $gap;\n      padding-left: 5.2rem;\n\n      > .edit {\n        flex-grow: 1;\n        text-align: right;\n        line-height: 2em;\n        position: relative;\n\n        > .setting {\n          font-size: $font-size-h6;\n          margin-left: $gap;\n          display: inline-block;\n          position: relative;\n\n          &:hover {\n            .user-tool {\n              display: block;\n            }\n          }\n\n          > .iconfont {\n            margin-right: $xs-gap;\n          }\n\n          > .account-setting {\n            text-transform: capitalize;\n          }\n\n          .user-tool {\n            display: none;\n            position: absolute;\n            right: 0;\n            top: 2em;\n            margin: 0;\n            padding: 0;\n            padding-top: 0.5rem;\n            list-style-type: square;\n            z-index: $z-index-normal + 1;\n            color: $text-reversal;\n\n            > li {\n              padding: 0 $gap;\n              cursor: pointer;\n              background-color: $primary-translucent;\n              &:hover {\n                background-color: $primary-lighter;\n              }\n            }\n          }\n        }\n      }\n\n      > .save {\n        width: 10%;\n        margin-left: $gap;\n        flex-grow: 1;\n        line-height: 2em;\n        text-align: center;\n\n        > button {\n          width: 100%;\n          height: 100%;\n          @include background-transition();\n          background-color: $module-bg-hover;\n          &:hover {\n            background-color: $module-bg-darker-3;\n          }\n        }\n      }\n\n      > .name,\n      > .email,\n      > .site {\n        flex-grow: 1;\n\n        input {\n          width: 100%;\n          height: 2em;\n          line-height: 2em;\n          text-indent: 3px;\n          background-color: $module-bg-darker-1;\n          @include radius-box($mini-radius);\n          @include background-transition();\n\n          &:focus,\n          &:hover {\n            background-color: $module-bg-hover;\n          }\n        }\n      }\n\n      > .name,\n      > .email {\n        margin-right: $gap;\n      }\n    }\n\n    > .postbox {\n      width: 100%;\n      display: flex;\n\n      > .user {\n        margin-right: 1em;\n\n        .gravatar {\n          display: block;\n          margin-bottom: 0.5em;\n          width: 4rem;\n          height: 4rem;\n          background-color: $module-bg-darker-1;\n\n          img {\n            width: 100%;\n            height: 100%;\n            transition: transform 0.5s ease-out;\n          }\n        }\n      }\n\n      .editor {\n        flex-grow: 1;\n        overflow: hidden;\n\n        .will-reply {\n          font-size: $font-size-h6;\n\n          .reply-user,\n          .reply-preview {\n            margin-bottom: $gap;\n            @include radius-box($xs-radius);\n            @include background-transition();\n          }\n\n          .reply-user {\n            display: flex;\n            justify-content: space-between;\n            padding: 0 $gap;\n            line-height: 2.6em;\n            background-color: $module-bg-darker-1;\n            &:hover {\n              background-color: $module-bg-hover;\n            }\n\n            .reply-user-name {\n              margin-left: $sm-gap;\n              display: inline;\n              font-weight: bold;\n            }\n\n            .reply-user-name,\n            .cancel {\n              &:hover {\n                color: $link-color-hover;\n              }\n            }\n          }\n\n          .reply-preview {\n            overflow: auto;\n            padding: $sm-gap $gap;\n            max-height: 10em;\n            background-color: $module-bg-hover;\n            &:hover {\n              background-color: $module-bg-darker-3;\n            }\n          }\n        }\n      }\n    }\n\n    &.mobile {\n      > .user {\n        margin: 0;\n        padding: 0;\n        height: auto;\n        flex-direction: column;\n\n        > .name,\n        > .email,\n        > .site,\n        > .save {\n          width: 80%;\n          margin-left: 0;\n          margin-right: 0;\n          margin-bottom: $gap;\n        }\n\n        > .save {\n          width: 30%;\n          margin-bottom: 0;\n        }\n      }\n\n      > .postbox {\n        > .user {\n          margin: 0;\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"pen\">\n    <div class=\"markdown\">\n      <div\n        ref=\"inputElement\"\n        class=\"markdown-input\"\n        :contenteditable=\"!disabled\"\n        :placeholder=\"t(LANGUAGE_KEYS.COMMENT_POST_PLACEHOLDER)\"\n      />\n      <transition name=\"list-fade\">\n        <div\n          class=\"markdown-preview markdown-html comment\"\n          v-if=\"preview\"\n          v-html=\"previewContent\"\n        />\n      </transition>\n    </div>\n    <div class=\"pencilbox\">\n      <div class=\"stationery\">\n        <button class=\"emoji\" title=\"emoji\" type=\"button\" :disabled=\"disabled || preview\">\n          <i class=\"iconfont icon-emoji\" />\n          <div class=\"emoji-box\">\n            <ul class=\"emoji-list\">\n              <li\n                v-for=\"(emoji, index) in EMOJIS\"\n                v-once\n                :key=\"index\"\n                class=\"item\"\n                @click=\"insertEmoji(emoji)\"\n              >\n                {{ emoji }}\n              </li>\n            </ul>\n          </div>\n        </button>\n        <button\n          class=\"image\"\n          title=\"image\"\n          :disabled=\"disabled || preview\"\n          @click.prevent=\"insertImage\"\n        >\n          <i class=\"iconfont icon-image\" />\n        </button>\n        <button\n          class=\"link\"\n          title=\"link\"\n          :disabled=\"disabled || preview\"\n          @click.prevent=\"insertLink\"\n        >\n          <i class=\"iconfont icon-link-horizontal\" />\n        </button>\n        <button\n          class=\"code\"\n          title=\"code\"\n          :disabled=\"disabled || preview\"\n          @click.prevent=\"insertCode\"\n        >\n          <i class=\"iconfont icon-code\" />\n        </button>\n        <button\n          class=\"preview\"\n          title=\"preview\"\n          :class=\"{ actived: preview }\"\n          :disabled=\"disabled\"\n          @click.prevent=\"handleTogglePreview\"\n        >\n          <i class=\"iconfont\" :class=\"preview ? 'icon-eye-close' : 'icon-eye'\" />\n        </button>\n      </div>\n      <button type=\"submit\" class=\"submit\" :disabled=\"disabled\" @click=\"handleSubmit\">\n        <i18n\n          :lkey=\"\n            posting ? LANGUAGE_KEYS.COMMENT_POST_SUBMITTING : LANGUAGE_KEYS.COMMENT_POST_SUBMIT\n          \"\n        />\n      </button>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, computed, watch, onMounted, onBeforeUnmount } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { insertContent } from '/@/utils/editable'\n  import { markdownToHTML } from '/@/transforms/markdown'\n  import { CommentEvent, EMOJIS } from './helper'\n\n  export enum PenEvents {\n    Update = 'update:modelValue',\n    InputReady = 'input-ready'\n  }\n\n  export default defineComponent({\n    name: 'CommentPen',\n    props: {\n      modelValue: {\n        type: String,\n        required: true\n      },\n      disabled: {\n        type: Boolean,\n        required: true\n      },\n      posting: {\n        type: Boolean,\n        required: true\n      },\n      preview: {\n        type: Boolean,\n        required: true\n      }\n    },\n    emits: [\n      PenEvents.Update,\n      PenEvents.InputReady,\n      CommentEvent.TogglePreview,\n      CommentEvent.Submit\n    ],\n    setup(props, context) {\n      const { i18n } = useEnhancer()\n      const content = ref(props.modelValue)\n      const inputElement = ref<HTMLElement>()\n      let inputElementObserver: MutationObserver | null = null\n      const previewContent = computed(() => {\n        return props.preview ? markdownToHTML(content.value, { sanitize: true }) : null\n      })\n\n      const handleTogglePreview = () => {\n        context.emit(CommentEvent.TogglePreview)\n      }\n\n      const handleValueChange = (value: string) => {\n        if (value !== content.value) {\n          content.value = value\n          if (inputElement.value) {\n            inputElement.value.innerText = value\n          }\n        }\n      }\n\n      const handleInputChange = () => {\n        const text = inputElement.value?.innerText as string\n        if (text !== content.value) {\n          content.value = text\n          context.emit(PenEvents.Update, text)\n        }\n      }\n\n      const handleSubmit = (event) => {\n        event.preventDefault()\n        context.emit(CommentEvent.Submit, content.value)\n      }\n\n      const insertContentToInput = (before: string, after = '') => {\n        insertContent({\n          element: inputElement.value,\n          content: [before, after]\n        })\n        handleInputChange()\n      }\n      const insertEmoji = (emoji: any) => {\n        insertContentToInput(` ${emoji} `)\n      }\n      const insertImage = () => {\n        insertContentToInput(` ![`, `](https://) `)\n      }\n      const insertLink = () => {\n        insertContentToInput(` [`, `](https://) `)\n      }\n      const insertCode = () => {\n        insertContentToInput('\\n```javascript\\n', '\\n```\\n')\n      }\n\n      watch(() => props.modelValue, handleValueChange)\n      onMounted(() => {\n        context.emit(PenEvents.InputReady, inputElement.value)\n        inputElementObserver = new MutationObserver((mutations) => {\n          handleInputChange()\n        })\n        inputElementObserver.observe(inputElement.value!, {\n          attributes: true,\n          characterData: true,\n          childList: true,\n          subtree: true\n        })\n      })\n      onBeforeUnmount(() => {\n        inputElementObserver?.disconnect()\n      })\n\n      return {\n        t: i18n.t,\n        EMOJIS,\n        LANGUAGE_KEYS,\n        inputElement,\n        previewContent,\n        insertEmoji,\n        insertImage,\n        insertLink,\n        insertCode,\n        handleInputChange,\n        handleTogglePreview,\n        handleSubmit\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .pen {\n    position: relative;\n    @include radius-box($xs-radius);\n\n    .markdown {\n      position: relative;\n      overflow: hidden;\n\n      .markdown-input {\n        min-height: 6em;\n        max-height: 36em;\n        overflow: auto;\n        outline: none;\n        padding: 0.5em;\n        cursor: auto;\n        font-size: $font-size-h6;\n        line-height: 1.8em;\n        background-color: $module-bg-darker-1;\n        @include background-transition();\n\n        &:empty:before {\n          content: attr(placeholder);\n          color: $text-disabled;\n        }\n\n        &:focus {\n          content: none;\n        }\n\n        &:hover {\n          background-color: $module-bg-hover;\n        }\n      }\n\n      .markdown-preview {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        overflow: auto;\n        margin: 0;\n        padding: 0.5em;\n        background-color: $body-bg;\n      }\n    }\n\n    .pencilbox {\n      $size: $font-size-base * 2;\n      height: $size;\n      line-height: $size;\n      display: flex;\n      justify-content: space-between;\n      background-color: $module-bg-darker-3;\n\n      .stationery {\n        .emoji,\n        .image,\n        .link,\n        .code,\n        .preview {\n          width: $size;\n          height: $size;\n          text-align: center;\n          display: block;\n          float: left;\n          @include background-transition();\n\n          &[disabled] {\n            opacity: 0.7;\n          }\n\n          &:not([disabled]) {\n            &.actived,\n            &:hover {\n              background-color: $module-bg-darker-4;\n            }\n          }\n        }\n\n        .emoji {\n          &:not([disabled]):hover {\n            .emoji-box {\n              display: block;\n            }\n          }\n\n          .emoji-box {\n            display: none;\n            position: absolute;\n            bottom: $size;\n            left: 0;\n            top: 0;\n            width: 100%;\n            overflow-y: auto;\n            background-color: $module-bg;\n\n            .emoji-list {\n              list-style: none;\n              padding: 0;\n              margin: 0;\n              font-size: $font-size-h3;\n              display: flex;\n              flex-wrap: wrap;\n\n              .item {\n                padding: 0 0.4em;\n                cursor: pointer;\n                @include background-transition();\n\n                &:hover {\n                  background-color: $module-bg-hover;\n                }\n              }\n            }\n          }\n        }\n      }\n\n      .submit {\n        width: 8rem;\n        height: $size;\n        background-color: $module-bg-darker-4;\n        @include background-transition();\n\n        &:hover {\n          background-color: $module-bg-darker-5;\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div :id=\"COMMENT_ELEMENT_ID\" :class=\"{ mobile: isMobile }\" class=\"comment-box\">\n    <comment-topbar\n      :total=\"commentStore.pagination?.total\"\n      :likes=\"likes\"\n      :post-id=\"postId\"\n      :fetching=\"isFetching\"\n      :sort=\"state.sort\"\n      @sort=\"getSortComments\"\n    />\n    <comment-main :fetching=\"isFetching\" :has-data=\"Boolean(commentStore.commentTreeList.length)\">\n      <template #list>\n        <comment-list :comments=\"commentStore.commentTreeList\" @reply=\"replyComment\" />\n      </template>\n      <template #pagination>\n        <comment-loadmore\n          :fetching=\"isFetching\"\n          :pagination=\"commentStore.pagination\"\n          @page=\"getPageComments\"\n        />\n      </template>\n    </comment-main>\n    <comment-publisher\n      :disabled=\"isPostingComment || isFetching\"\n      :cached=\"userState.cached\"\n      :editing=\"userState.editing\"\n      :reply-pid=\"state.replyPID\"\n      v-model:profile=\"profileState\"\n      @cancel-reply=\"resetCommentReply\"\n      @edit-profile=\"editUserProfile\"\n      @save-profile=\"syncUserProfileToStorage\"\n      @clear-profile=\"clearUserProfile\"\n    >\n      <template #pen>\n        <comment-pen\n          v-model=\"penState.content\"\n          :preview=\"penState.preview\"\n          :disabled=\"isPostingComment || isFetching\"\n          :posting=\"isPostingComment\"\n          @input-ready=\"handleMarkdownInputReady\"\n          @toggle-preview=\"togglePenPreview\"\n          @submit=\"submitComment\"\n        />\n      </template>\n    </comment-publisher>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import {\n    defineComponent,\n    ref,\n    reactive,\n    computed,\n    watch,\n    onMounted,\n    onBeforeUnmount,\n    onUnmounted\n  } from 'vue'\n  import { useMetaStore } from '/@/store/meta'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useCommentStore, CommentFetchParams } from '/@/store/comment'\n  import { email as emailRegex, url as urlRegex } from '/@/constants/regex'\n  import { COMMENT_ELEMENT_ID, COMMENT_PUBLISHER_ELEMENT_ID } from '/@/constants/anchor'\n  import { GAEventTags, GAEventActions } from '/@/constants/gtag'\n  import { SortType } from '/@/constants/state'\n  import { USER } from '/@/constants/storage'\n  import { getJSON, setJSON, remove } from '/@/services/storage'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { focusPosition } from '/@/utils/editable'\n  import { scrollToElementAnchor } from '/@/utils/scroller'\n  import { luanchEmojiRain } from './helper'\n  import CommentTopbar from './topbar.vue'\n  import CommentMain from './main.vue'\n  import CommentList from './list/index.vue'\n  import CommentLoadmore from './loadmore.vue'\n  import CommentPublisher from './publisher.vue'\n  import CommentPen from './pen.vue'\n\n  export default defineComponent({\n    name: 'Comment',\n    components: {\n      CommentTopbar,\n      CommentMain,\n      CommentList,\n      CommentLoadmore,\n      CommentPublisher,\n      CommentPen\n    },\n    props: {\n      fetching: {\n        type: Boolean,\n        default: false\n      },\n      likes: {\n        type: Number,\n        default: 0\n      },\n      postId: {\n        type: Number,\n        required: true\n      }\n    },\n    setup(props) {\n      const { i18n, gtag, globalState, isMobile } = useEnhancer()\n      const metaStore = useMetaStore()\n      const commentStore = useCommentStore()\n      const blockList = computed(() => metaStore.appOptions.data?.blacklist)\n      const isPostingComment = computed(() => commentStore.posting)\n      const markdownInputElement = ref<any>()\n\n      const isFetching = computed(() => {\n        // 1. 宿主组件还在加载时，列表和 tool 都呈加载状态\n        // 2. 宿主组件加载完成，如果自己还在请求，则列表呈加载状态\n        // 3. 自己已请求完，宿主组件还在加载，列表和 tool 都呈加载状态\n\n        // 1. 组件不再负责初始加载评论列表数据的职责\n        // 2. 组件仅负责初评论列表数据翻页、排序的职责\n        // 3. 当容器组件还在请求时，组件全量 Loading\n        // 4. 当只有评论列表在请求时，列表单独 Loading\n        return props.fetching || commentStore.fetching\n      })\n\n      const state = reactive({\n        sort: SortType.Desc,\n        replyPID: 0\n      })\n      const userState = reactive({\n        cached: false,\n        editing: false\n      })\n      const baseProfile = {\n        name: '',\n        email: '',\n        site: ''\n      }\n      const profileState = ref(baseProfile)\n      const penState = reactive({\n        content: '',\n        preview: false\n      })\n\n      const syncUserStorageToState = () => {\n        const user = getJSON(USER)\n        if (user) {\n          userState.cached = true\n          userState.editing = false\n          profileState.value = user\n        }\n      }\n\n      const syncUserProfileToStorage = () => {\n        userState.cached = true\n        userState.editing = false\n        setJSON(USER, profileState.value)\n      }\n\n      const clearUserProfile = () => {\n        userState.cached = false\n        userState.editing = false\n        profileState.value = { ...baseProfile }\n        remove(USER)\n      }\n\n      const editUserProfile = () => {\n        userState.editing = true\n      }\n\n      const handleMarkdownInputReady = (markdownElement: HTMLElement) => {\n        markdownInputElement.value = markdownElement\n      }\n\n      const resetCommentReply = () => {\n        state.replyPID = 0\n      }\n\n      const clearPenContent = () => {\n        penState.content = ''\n      }\n\n      const togglePenPreview = () => {\n        penState.preview = !penState.preview\n      }\n\n      const replyComment = (commentId: number) => {\n        gtag?.event('欲回评论', {\n          event_category: GAEventActions.Click,\n          event_label: GAEventTags.Comment\n        })\n        state.replyPID = commentId\n        // 滚动到目标位置，并激活光标\n        scrollToElementAnchor(COMMENT_PUBLISHER_ELEMENT_ID, 300)\n        if (markdownInputElement.value) {\n          focusPosition(markdownInputElement.value)\n        }\n      }\n\n      // 获取评论列表\n      const fetchCommentList = (params: CommentFetchParams = {}) => {\n        // 每次重新获取数据时都需要回到评论框顶部，因为都是新数据\n        scrollToElementAnchor(COMMENT_ELEMENT_ID, -73)\n        commentStore.fetchList({\n          ...params,\n          sort: state.sort,\n          post_id: props.postId,\n          delay: 368\n        })\n      }\n\n      const getSortComments = (sort: SortType) => {\n        if (state.sort !== sort) {\n          state.sort = sort\n          fetchCommentList()\n        }\n      }\n\n      const getPageComments = (page: number) => {\n        fetchCommentList({ page, loadmore: true })\n      }\n\n      const submitComment = async () => {\n        gtag?.event('欲发评论', {\n          event_category: GAEventActions.Click,\n          event_label: GAEventTags.Comment\n        })\n        const profile = profileState.value\n        if (!profile.name) {\n          return alert(i18n.t(LANGUAGE_KEYS.COMMENT_POST_NAME) + '?')\n        }\n        if (!profile.email) {\n          return alert(i18n.t(LANGUAGE_KEYS.COMMENT_POST_EMAIL) + '?')\n        }\n        if (!emailRegex.test(profile.email)) {\n          return alert(i18n.t(LANGUAGE_KEYS.COMMENT_POST_ERROR_EMAIL))\n        }\n        if (profile.site && !urlRegex.test(profile.site)) {\n          return alert(i18n.t(LANGUAGE_KEYS.COMMENT_POST_ERROR_URL))\n        }\n        if (!penState.content || !penState.content.trim()) {\n          return alert(i18n.t(LANGUAGE_KEYS.COMMENT_POST_CONTENT) + '?')\n        }\n\n        // content length\n        const lineOverflow = penState.content.split('\\n').length > 36\n        const lengthOverflow = penState.content.length > 2000\n        if (lineOverflow || lengthOverflow) {\n          return alert(i18n.t(LANGUAGE_KEYS.COMMENT_POST_ERROR_CONTENT))\n        }\n\n        // block list\n        const { mails, keywords } = blockList.value\n        const hitMail = mails.includes(profile.email)\n        const hitKeyword =\n          keywords.length && eval(`/${keywords.join('|')}/ig`).test(penState.content)\n        if (hitMail || hitKeyword) {\n          alert(i18n.t(LANGUAGE_KEYS.COMMENT_POST_ERROR_SUBMIT))\n          console.warn(\n            '评论发布失败\\n1：被 Akismet 过滤\\n2：邮箱/IP 被列入黑名单\\n3：内容包含黑名单关键词'\n          )\n          return false\n        }\n\n        // post\n        return commentStore\n          .postComment({\n            pid: state.replyPID,\n            post_id: props.postId,\n            content: penState.content,\n            agent: globalState.userAgent.original,\n            author: profile\n          })\n          .then(() => {\n            // clear local data\n            penState.preview = false\n            userState.cached = true\n            userState.editing = false\n            // reset reply state\n            resetCommentReply()\n            clearPenContent()\n            // set user profile\n            syncUserProfileToStorage()\n            // random emoji rain\n            luanchEmojiRain(penState.content)\n          })\n          .catch((error) => {\n            console.warn('评论发布失败，可能原因：被 Akismet 过滤，或者：\\n', error)\n            alert(i18n.t(LANGUAGE_KEYS.COMMENT_POST_ERROR_SUBMIT))\n          })\n      }\n\n      watch(\n        () => isFetching.value,\n        (isFetching) => {\n          if (isFetching) {\n            resetCommentReply()\n          }\n        }\n      )\n\n      onMounted(() => {\n        syncUserStorageToState()\n      })\n\n      onBeforeUnmount(() => {\n        resetCommentReply()\n      })\n\n      onUnmounted(() => {\n        commentStore.clearList()\n      })\n\n      return {\n        COMMENT_ELEMENT_ID,\n        isMobile,\n        isFetching,\n        isPostingComment,\n        commentStore,\n        state,\n        userState,\n        profileState,\n        penState,\n        editUserProfile,\n        syncUserProfileToStorage,\n        clearUserProfile,\n        togglePenPreview,\n        replyComment,\n        submitComment,\n        resetCommentReply,\n        getSortComments,\n        getPageComments,\n        handleMarkdownInputReady\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .comment-box {\n    padding: $gap;\n    @include common-bg-module();\n    @include radius-box($lg-radius);\n  }\n</style>\n","<template>\n  <div class=\"article-page\" :class=\"{ mobile: isMobile }\">\n    <div class=\"module\">\n      <article-content :id=\"ARTICLE_CONTENT_ELEMENT_ID\" :fetching=\"fetching\" :article=\"article\" />\n    </div>\n    <client-only>\n      <div class=\"module\">\n        <article-mammon :fetching=\"fetching\" />\n      </div>\n    </client-only>\n    <div class=\"module\">\n      <article-share :id=\"ARTICLE_SHARE_ELEMENT_ID\" :fetching=\"fetching\" />\n    </div>\n    <div class=\"module\">\n      <article-meta :id=\"ARTICLE_META_ELEMENT_ID\" :fetching=\"fetching\" :article=\"article\" />\n    </div>\n    <div class=\"releted\">\n      <article-related\n        :id=\"ARTICLE_RELETED_ELEMENT_ID\"\n        :fetching=\"fetching\"\n        :articles=\"relatedArticles\"\n      />\n    </div>\n    <div class=\"comment\">\n      <comment :fetching=\"fetching\" :post-id=\"articleId\" :likes=\"article?.meta?.likes\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, watch, onBeforeMount } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useUniversalFetch } from '/@/universal'\n  import { isClient } from '/@/app/environment'\n  import {\n    ARTICLE_CONTENT_ELEMENT_ID,\n    ARTICLE_META_ELEMENT_ID,\n    ARTICLE_RELETED_ELEMENT_ID,\n    ARTICLE_SHARE_ELEMENT_ID\n  } from '/@/constants/anchor'\n  import { useArticleDetailStore } from '/@/store/article'\n  import { useCommentStore } from '/@/store/comment'\n  import ArticleContent from './content.vue'\n  import ArticleMammon from './mammon.vue'\n  import ArticleShare from './share.vue'\n  import ArticleMeta from './meta.vue'\n  import ArticleRelated from './related.vue'\n  import Comment from '/@/components/comment/index.vue'\n\n  export default defineComponent({\n    name: 'ArticleDetail',\n    components: {\n      Comment,\n      ArticleContent,\n      ArticleMammon,\n      ArticleShare,\n      ArticleMeta,\n      ArticleRelated\n    },\n    props: {\n      articleId: {\n        type: Number,\n        required: true\n      }\n    },\n    setup(props) {\n      const { meta, isMobile } = useEnhancer()\n      const articleDetailStore = useArticleDetailStore()\n      const commentStore = useCommentStore()\n      const article = computed(() => articleDetailStore.article || void 0)\n      const fetching = computed(() => articleDetailStore.fetching)\n      const relatedArticles = computed(() => {\n        if (!article.value) {\n          return []\n        }\n        const ARTICLE_COUNT = 6\n        const articles = [...article.value.related]\n          .filter((article) => article.id !== props.articleId)\n          .slice(0, ARTICLE_COUNT)\n        if (isMobile.value || articles.length >= ARTICLE_COUNT) {\n          return articles\n        }\n        return [\n          ...articles,\n          ...new Array(ARTICLE_COUNT - articles.length).fill({\n            disabled: true,\n            title: 'NULL',\n            _id: '',\n            thumb: ''\n          })\n        ]\n      })\n\n      meta(() => ({\n        pageTitle: article.value?.title,\n        keywords: article.value?.keywords?.join(',') || article.value?.title,\n        description: article.value?.description || ''\n      }))\n\n      const fetchArticleDetail = (articleID: number) => {\n        const fetchDelay = isClient ? 368 : 0\n        return Promise.all([\n          articleDetailStore.fetchDetail({\n            articleID,\n            delay: fetchDelay\n          }),\n          commentStore.fetchList({\n            post_id: articleID,\n            delay: fetchDelay\n          })\n        ])\n      }\n\n      onBeforeMount(() => {\n        watch(\n          () => props.articleId,\n          (articleId) => fetchArticleDetail(articleId),\n          { flush: 'post' }\n        )\n      })\n\n      useUniversalFetch(() => fetchArticleDetail(props.articleId))\n\n      return {\n        isMobile,\n        article,\n        fetching,\n        relatedArticles,\n        ARTICLE_CONTENT_ELEMENT_ID,\n        ARTICLE_META_ELEMENT_ID,\n        ARTICLE_RELETED_ELEMENT_ID,\n        ARTICLE_SHARE_ELEMENT_ID\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\">\n  @import 'src/styles/init.scss';\n\n  .article-page {\n    .module {\n      margin-bottom: $lg-gap;\n      @include radius-box($sm-radius);\n      @include common-bg-module();\n    }\n\n    .releted {\n      margin-bottom: $lg-gap;\n    }\n\n    &.mobile {\n      .module {\n        margin-bottom: $gap;\n      }\n    }\n  }\n</style>\n","/**\n * @file Categories state\n * @module store.category\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineStore } from 'pinia'\nimport nodepress from '/@/services/nodepress'\n\nexport interface Category {\n  id: number\n  _id: string\n  pid: string\n  name: string\n  slug: string\n  count: number\n  description: string\n  update_at: string\n  create_at: string\n}\n\nexport const useCategoryStore = defineStore('category', {\n  state: () => ({\n    fetched: false,\n    fetching: false,\n    categories: [] as Array<Category>\n  }),\n  actions: {\n    fetchAll() {\n      if (this.fetched) {\n        return Promise.resolve()\n      }\n\n      this.fetching = true\n      return nodepress\n        .get('/category', { params: { per_page: 50 } })\n        .then((response) => {\n          this.categories = response.result.data\n          this.fetched = true\n        })\n        .finally(() => {\n          this.fetching = false\n        })\n    }\n  }\n})\n","<template>\n  <div class=\"header\" :class=\"{ mobile: isMobile }\">\n    <div\n      class=\"background\"\n      :style=\"{\n        backgroundColor,\n        backgroundImage: `url(${backgroundImageUrl})`\n      }\"\n    />\n    <div class=\"content\">\n      <div class=\"logo\">\n        <transition name=\"module\" mode=\"out-in\">\n          <i key=\"date\" class=\"iconfont\" :class=\"icon\"></i>\n        </transition>\n      </div>\n      <div class=\"title\">\n        <transition name=\"module\" mode=\"out-in\">\n          <h5 class=\"text\">\n            <slot></slot>\n          </h5>\n        </transition>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, computed } from 'vue'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { useEnhancer } from '../../app/enhancer'\n  import { timeAgo } from '/@/transforms/moment'\n  import { getFileCDNUrl } from '/@/transforms/url'\n\n  export default defineComponent({\n    name: 'ArticleListHeader',\n    props: {\n      backgroundColor: {\n        type: String,\n        default: ''\n      },\n      backgroundImage: {\n        type: String,\n        default: ''\n      },\n      icon: {\n        type: String,\n        required: true\n      }\n    },\n    setup(props) {\n      const { isMobile } = useEnhancer()\n      const backgroundImageUrl = computed(() => {\n        return props.backgroundImage || getFileCDNUrl('/images/page-feeelancer/banner.jpg')\n      })\n\n      return {\n        LANGUAGE_KEYS,\n        isMobile,\n        backgroundImageUrl\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .header {\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    height: 16.4rem;\n    margin-bottom: $lg-gap;\n    color: $white;\n    @include radius-box($lg-radius);\n\n    &:hover {\n      .background {\n        transform: scale(1);\n      }\n      .content {\n        backdrop-filter: none;\n        .logo {\n          .iconfont {\n            animation: none;\n            transform: scale(1.05);\n          }\n        }\n      }\n    }\n\n    .background {\n      position: absolute;\n      top: 0;\n      left: 0;\n      z-index: 0;\n      width: 100%;\n      height: 100%;\n      background-color: $module-bg;\n      background-size: cover;\n      background-position: center center;\n      transform: scale(1.1);\n      @include transform-transition();\n    }\n\n    .content {\n      position: absolute;\n      top: 0;\n      left: 0;\n      z-index: 1;\n      width: 100%;\n      height: 100%;\n      @include backdrop-blur(1px);\n\n      .logo {\n        height: 12rem;\n        line-height: 12rem;\n        margin: 0;\n        text-align: center;\n        overflow: hidden;\n\n        @keyframes logo-animate {\n          0% {\n            opacity: 1;\n            transform: scale(1);\n          }\n          50% {\n            opacity: 0.8;\n            transform: scale(0.9);\n          }\n          100% {\n            opacity: 1;\n            transform: scale(1);\n          }\n        }\n\n        .iconfont {\n          font-size: 6em;\n          display: inline-block;\n          animation: logo-animate 5s infinite;\n          @include transform-transition();\n        }\n      }\n\n      .title {\n        height: 4rem;\n        line-height: 2.5rem;\n\n        .text {\n          margin: 0;\n          text-align: center;\n          text-transform: capitalize;\n        }\n      }\n    }\n\n    &.mobile {\n      height: 12rem;\n\n      .logo {\n        height: 8.6rem;\n        line-height: 8.6rem;\n\n        .iconfont {\n          font-size: 5em;\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"category-archive-page\">\n    <article-list-header\n      :background-color=\"currentCategoryColor\"\n      :background-image=\"currentCategoryImage\"\n      :icon=\"currentCategoryIcon\"\n    >\n      <span>{{ currentCategory?.description || '...' }}</span>\n    </article-list-header>\n    <article-list\n      :fetching=\"article.list.fetching\"\n      :articles=\"article.list.data\"\n      :pagination=\"article.list.pagination\"\n      @loadmore=\"loadmoreArticles\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, watch, onBeforeMount } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useUniversalFetch, onClient } from '/@/universal'\n  import { useArticleStore } from '/@/store/article'\n  import { useCategoryStore } from '/@/store/category'\n  import { getExtendsValue } from '/@/transforms/state'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { nextScreen, scrollToTop } from '/@/utils/effects'\n  import ArticleListHeader from '/@/components/archive/header.vue'\n  import ArticleList from '/@/components/archive/list.vue'\n\n  export default defineComponent({\n    name: 'CategoryPage',\n    components: {\n      ArticleListHeader,\n      ArticleList\n    },\n    props: {\n      categorySlug: {\n        type: String,\n        required: true\n      }\n    },\n    setup(props) {\n      const { i18n, meta, isZhLang } = useEnhancer()\n      const article = useArticleStore()\n      const catrgory = useCategoryStore()\n      const currentCategory = computed(() => {\n        return catrgory.categories.find((category) => category.slug === props.categorySlug)\n      })\n\n      meta(() => {\n        const enTitle = firstUpperCase(props.categorySlug)\n        const zhTitle = i18n.t(props.categorySlug)!\n        const titles = isZhLang.value ? [zhTitle, enTitle] : [enTitle, 'Category']\n        const description = currentCategory.value?.description || titles.join(',')\n        return { pageTitle: titles.join(' | '), description }\n      })\n\n      const currentCategoryIcon = computed(() => {\n        return getExtendsValue(currentCategory.value, 'icon') || 'icon-category'\n      })\n      const currentCategoryImage = computed(() => {\n        return getExtendsValue(currentCategory.value, 'background')\n      })\n      const currentCategoryColor = computed(() => {\n        return getExtendsValue(currentCategory.value, 'bgcolor')\n      })\n\n      const loadmoreArticles = async () => {\n        await article.fetchList({\n          category_slug: props.categorySlug,\n          page: article.list.pagination.current_page + 1\n        })\n        onClient(nextScreen)\n      }\n\n      const fetchAllData = (category_slug: string) => {\n        onClient(scrollToTop)\n        return Promise.all([catrgory.fetchAll(), article.fetchList({ category_slug })])\n      }\n\n      onBeforeMount(() => {\n        watch(\n          () => props.categorySlug,\n          (categorySlug) => fetchAllData(categorySlug),\n          { flush: 'post' }\n        )\n      })\n\n      useUniversalFetch(() => fetchAllData(props.categorySlug))\n\n      return {\n        article,\n        currentCategory,\n        currentCategoryIcon,\n        currentCategoryImage,\n        currentCategoryColor,\n        loadmoreArticles\n      }\n    }\n  })\n</script>\n","/**\n * @file Tags state\n * @module store.tag\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineStore } from 'pinia'\nimport { firstUpperCase } from '/@/transforms/text'\nimport nodepress from '/@/services/nodepress'\n\nexport type TagMap = Map<string, Tag>\nexport interface Tag {\n  id: number\n  _id: string\n  name: string\n  slug: string\n  count: number\n  description: string\n  update_at: string\n  create_at: string\n  extends: $TODO[]\n}\n\nexport const useTagStore = defineStore('tag', {\n  state: () => ({\n    fetched: false,\n    fetching: false,\n    tags: [] as Array<Tag>\n  }),\n  getters: {\n    // 全量标签列表（本身、全小写、全大写、首字母大写）\n    fullNameTags: (state): TagMap => {\n      const tags = state.tags\n      const tagMap: TagMap = new Map()\n      tags.forEach((tag) => {\n        tagMap.set(tag.name, tag)\n        tagMap.set(tag.name.toLowerCase(), tag)\n        tagMap.set(tag.name.toUpperCase(), tag)\n        tagMap.set(firstUpperCase(tag.name), tag)\n      })\n      return tagMap\n    }\n  },\n  actions: {\n    fetchAll() {\n      if (this.fetched) {\n        return Promise.resolve()\n      }\n\n      this.fetching = true\n      return nodepress\n        .get('/tag', { params: { cache: 1 } })\n        .then((response) => {\n          this.tags = response.result.data\n          this.fetched = true\n        })\n        .finally(() => {\n          this.fetching = false\n        })\n    }\n  }\n})\n","<template>\n  <div class=\"tag-archive-page\">\n    <article-list-header\n      :background-color=\"currentTagColor\"\n      :background-image=\"currentTagImage\"\n      :icon=\"currentTagIcon\"\n    >\n      <template v-if=\"currentTag\">\n        <i18n :zh=\"currentTag.name\" :en=\"currentTag.slug\" />\n        <span class=\"delimiter\">-</span>\n        <span>{{ currentTag.description || '...' }}</span>\n      </template>\n    </article-list-header>\n    <article-list\n      :fetching=\"articleStore.list.fetching\"\n      :articles=\"articleStore.list.data\"\n      :pagination=\"articleStore.list.pagination\"\n      @loadmore=\"loadmoreArticles\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, watch, onBeforeMount } from 'vue'\n  import { useUniversalFetch, onClient } from '/@/universal'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useArticleStore } from '/@/store/article'\n  import { useTagStore } from '/@/store/tag'\n  import { getExtendsValue } from '/@/transforms/state'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { nextScreen, scrollToTop } from '/@/utils/effects'\n  import ArticleListHeader from '/@/components/archive/header.vue'\n  import ArticleList from '/@/components/archive/list.vue'\n\n  export default defineComponent({\n    name: 'TagPage',\n    components: {\n      ArticleListHeader,\n      ArticleList\n    },\n    props: {\n      tagSlug: {\n        type: String,\n        required: true\n      }\n    },\n    setup(props) {\n      const { meta, isZhLang } = useEnhancer()\n      const tagStore = useTagStore()\n      const articleStore = useArticleStore()\n      const currentTag = computed(() => tagStore.tags.find((tag) => tag.slug === props.tagSlug))\n\n      meta(() => {\n        const enTitle = firstUpperCase(props.tagSlug)\n        const zhTitle = currentTag.value?.name!\n        const titles = isZhLang.value ? [zhTitle, enTitle] : [enTitle, 'Tag']\n        const description = currentTag.value?.description || titles.join(',')\n        return { pageTitle: titles.join(' | '), description }\n      })\n\n      const currentTagIcon = computed(() => getExtendsValue(currentTag.value, 'icon') || 'icon-tag')\n      const currentTagImage = computed(() => getExtendsValue(currentTag.value, 'background'))\n      const currentTagColor = computed(() => getExtendsValue(currentTag.value, 'bgcolor'))\n\n      const loadmoreArticles = async () => {\n        await articleStore.fetchList({\n          tag_slug: props.tagSlug,\n          page: articleStore.list.pagination.current_page + 1\n        })\n        onClient(nextScreen)\n      }\n\n      const fetchAllData = (tag_slug: string) => {\n        onClient(scrollToTop)\n        return Promise.all([tagStore.fetchAll(), articleStore.fetchList({ tag_slug })])\n      }\n\n      onBeforeMount(() => {\n        watch(\n          () => props.tagSlug,\n          (tagSlug) => fetchAllData(tagSlug),\n          { flush: 'post' }\n        )\n      })\n\n      useUniversalFetch(() => fetchAllData(props.tagSlug))\n\n      return {\n        articleStore,\n        currentTag,\n        currentTagIcon,\n        currentTagImage,\n        currentTagColor,\n        loadmoreArticles\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .delimiter {\n    margin: 0 $sm-gap;\n  }\n</style>\n","<template>\n  <div class=\"date-archive-page\">\n    <article-list-header icon=\"icon-clock\">\n      <i18n :zh=\"`发布于 ${date} 的所有文章`\" :en=\"`${date} articles`\" />\n    </article-list-header>\n    <article-list\n      :fetching=\"articleStore.list.fetching\"\n      :articles=\"articleStore.list.data\"\n      :pagination=\"articleStore.list.pagination\"\n      @loadmore=\"loadmoreArticles\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, watch, onBeforeMount } from 'vue'\n  import { useUniversalFetch, onClient } from '/@/universal'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useArticleStore } from '/@/store/article'\n  import { nextScreen, scrollToTop } from '/@/utils/effects'\n  import ArticleListHeader from '/@/components/archive/header.vue'\n  import ArticleList from '/@/components/archive/list.vue'\n\n  export default defineComponent({\n    name: 'DatePage',\n    components: {\n      ArticleListHeader,\n      ArticleList\n    },\n    props: {\n      date: {\n        type: String,\n        required: true\n      }\n    },\n    setup(props) {\n      const { meta } = useEnhancer()\n      const articleStore = useArticleStore()\n\n      meta(() => ({ pageTitle: `${props.date} | Date` }))\n\n      const fetchArticles = (params: any) => {\n        onClient(scrollToTop)\n        return articleStore.fetchList(params)\n      }\n\n      const loadmoreArticles = () => {\n        return fetchArticles({\n          date: props.date,\n          page: articleStore.list.pagination.current_page + 1\n        }).then(nextScreen)\n      }\n\n      onBeforeMount(() => {\n        watch(\n          () => props.date,\n          (date) => fetchArticles({ date }),\n          { flush: 'post' }\n        )\n      })\n\n      useUniversalFetch(() => fetchArticles({ date: props.date }))\n\n      return {\n        articleStore,\n        loadmoreArticles\n      }\n    }\n  })\n</script>\n","<template>\n  <div class=\"search-archive-page\">\n    <article-list-header icon=\"icon-search\">\n      <i18n :zh=\"`和 “${keyword}” 有关的所有文章`\" :en=\"`'${keyword}' related articles`\" />\n    </article-list-header>\n    <article-list\n      :fetching=\"article.list.fetching\"\n      :articles=\"article.list.data\"\n      :pagination=\"article.list.pagination\"\n      @loadmore=\"loadmoreArticles\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, watch, onBeforeMount } from 'vue'\n  import { useUniversalFetch, onClient } from '/@/universal'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useArticleStore } from '/@/store/article'\n  import { nextScreen, scrollToTop } from '/@/utils/effects'\n  import ArticleListHeader from '/@/components/archive/header.vue'\n  import ArticleList from '/@/components/archive/list.vue'\n\n  export default defineComponent({\n    name: 'SearchPage',\n    components: {\n      ArticleListHeader,\n      ArticleList\n    },\n    props: {\n      keyword: {\n        type: String,\n        required: true\n      }\n    },\n    setup(props) {\n      const { meta } = useEnhancer()\n      const article = useArticleStore()\n\n      meta(() => ({ pageTitle: `${props.keyword} | Search` }))\n\n      const fetchArticles = (params: any) => {\n        onClient(scrollToTop)\n        return article.fetchList(params)\n      }\n\n      const loadmoreArticles = async () => {\n        await fetchArticles({\n          keyword: props.keyword,\n          page: article.list.pagination.current_page + 1\n        })\n        onClient(nextScreen)\n      }\n\n      onBeforeMount(() => {\n        watch(\n          () => props.keyword,\n          (keyword) => fetchArticles({ keyword }),\n          { flush: 'post' }\n        )\n      })\n\n      useUniversalFetch(() => fetchArticles({ keyword: props.keyword }))\n\n      return {\n        article,\n        loadmoreArticles\n      }\n    }\n  })\n</script>\n","/**\n * @file Tunnel constant\n * @module constant.tunnel\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport enum TunnelModule {\n  BiliBili = 'bilibili',\n  Wallpaper = 'wallpaper',\n  GitHub = 'gitHub',\n  Music = 'music'\n}\n\nexport const getTunnelApiPath = (moduleName: TunnelModule) => {\n  return `/${moduleName}`\n}\n","/**\n * @file BFF server config\n * @module config.bff\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const API_TUNNEL_PREFIX = '/_tunnel'\nexport const BFF_SERVER_PORT = 3000\n","/**\n * @file SSR BFF API Tunnel\n * @module service.tunnel\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport axios, { AxiosInstance } from 'axios'\nimport { API_TUNNEL_PREFIX, BFF_SERVER_PORT } from '/@/config/bff.config'\nimport { TunnelModule, getTunnelApiPath } from '/@/constants/tunnel'\nimport { isServer } from '/@/app/environment'\n\nconst tunnel = axios.create({\n  baseURL: API_TUNNEL_PREFIX,\n  proxy: isServer && {\n    host: 'localhost',\n    port: BFF_SERVER_PORT\n  }\n})\n\ntunnel.interceptors.response.use((response) => response.data)\n\nconst service = {\n  $: tunnel,\n  request: <T = any>(...args: Parameters<AxiosInstance['request']>): Promise<T> =>\n    tunnel.request(...args),\n  dispatch: <T = any>(module: TunnelModule): Promise<T> => tunnel.get(getTunnelApiPath(module))\n}\n\nexport default service\n","/**\n * @file Music player\n * @module service.music\n * @author Surmon <https://github.com/surmon-china>\n * @document https://521dimensions.com/open-source/amplitudejs/docs\n */\n\nimport { App, Plugin, inject, readonly, reactive, computed } from 'vue'\nimport { getFileProxyUrl } from '/@/transforms/url'\nimport { TunnelModule } from '/@/constants/tunnel'\nimport type { Song } from '/@/server/tunnel/music'\nimport tunnel from '/@/services/tunnel'\n\nexport interface PlayerConfig {\n  amplitude: any\n  volume?: number\n  autoStart?: boolean\n}\n\nconst createMusicPlayer = (config: PlayerConfig) => {\n  const { amplitude } = config\n\n  // Player state\n  const initVolume = config.volume ?? 40\n  const state = reactive({\n    // 是否初始化\n    inited: false,\n    // 是否可用\n    ready: false,\n    // 活动项\n    index: 0,\n    // 总数\n    count: 0,\n    // 音量\n    volume: initVolume,\n    // 图形化\n    wave: false,\n    // 播放中\n    playing: false,\n    // 进度\n    speeds: 0,\n    progress: 0\n  })\n\n  // mute state\n  const muted = computed<boolean>(() => state.volume === 0)\n\n  // 原始播放列表\n  const songList = reactive({\n    fetching: false,\n    data: [] as Array<Song>\n  })\n\n  // playable song list\n  const playableSongList = computed<Song[]>(() => {\n    return songList.data.map((song) => ({\n      ...song,\n      // https://binaryify.github.io/NeteaseCloudMusicApi/#/?id=%e8%8e%b7%e5%8f%96%e9%9f%b3%e4%b9%90-url\n      url: `https://music.163.com/song/media/outer/url?id=${song.id}.mp3`,\n      // MARK: 403!\n      // url: song.url\n      //   ? song.url.replace(/(http:\\/\\/|https:\\/\\/)/gi, getFileProxyUrl('/music/'))\n      //   : null as any as string,\n      cover_art_url: song.cover_art_url\n        ? getFileProxyUrl(song.cover_art_url.replace('http://', '/music/') + '?param=600y600')\n        : (null as any as string)\n    }))\n  })\n\n  const fetchSongList = async () => {\n    try {\n      songList.fetching = true\n      songList.data = await tunnel.dispatch<Song[]>(TunnelModule.Music)\n      state.count = songList.data.length\n    } catch (error) {\n      songList.data = []\n      state.count = 0\n      throw error\n    } finally {\n      songList.fetching = false\n    }\n  }\n\n  const currentSong = computed<Song | void>(() => {\n    if (state.inited && state.index !== undefined) {\n      return amplitude.getActiveSongMetadata()\n    }\n  })\n\n  const play = () => amplitude.play()\n  const pause = () => amplitude.pause()\n  const prevSong = () => amplitude.prev()\n  const nextSong = () => amplitude.next()\n  const changeVolume = (volume: number) => amplitude.setVolume(volume)\n  const toggleMuted = () => changeVolume(muted.value ? initVolume : 0)\n  const togglePlay = () => (amplitude.getPlayerState() === 'playing' ? pause() : play())\n\n  const initPlayer = (songs: Song[]) => {\n    amplitude.init({\n      // 歌曲切换之间的延时\n      // https://521dimensions.com/open-source/amplitudejs/docs/configuration/delay.html#public-function\n      delay: 668,\n      debug: false,\n      volume: state.volume,\n      songs,\n      start_song: 0,\n      continue_next: true,\n      callbacks: {\n        initialized: () => {\n          state.ready = true\n          state.inited = true\n        },\n        play: () => {\n          state.ready = true\n          state.wave = true\n          state.playing = true\n        },\n        pause: () => {\n          state.wave = false\n          state.playing = false\n        },\n        stop: () => {\n          state.wave = false\n          state.playing = false\n        },\n        volumechange: () => {\n          state.volume = amplitude.getVolume()\n        },\n        timeupdate: () => {\n          state.speeds = amplitude.getSongPlayedSeconds()\n          state.progress = amplitude.getSongPlayedPercentage()\n        },\n        song_change: () => {\n          state.index = amplitude.getActiveIndex()\n        },\n        ended: () => {\n          state.playing = false\n        },\n        error: (error: any) => {\n          console.warn('播放器出现异常，自动下一首！', state.index, error)\n          state.playing = false\n          // 播放异常时不再清除音乐，不作 url 可能不可用的假设\n          // amplitude.removeSong(state.index)\n          // HACK: 网络阻塞会导致紧邻的后续请求中断，所以下一首操作需要延时，避免瀑布式请求\n          window.setTimeout(nextSong, 1668)\n        }\n      }\n    })\n    amplitude.setRepeat(true)\n  }\n\n  const start = async () => {\n    try {\n      await fetchSongList()\n      if (!playableSongList.value.length) {\n        state.ready = false\n        console.warn('播放列表为空，未找到有效音乐，无法初始化！')\n        return\n      }\n      initPlayer(playableSongList.value)\n      // window.$defer.addTask(() => {\n      //   window.onmousemove = () => {\n      //     state.playing || play()\n      //     window.onmousemove = null\n      //   }\n      // })\n    } catch (error) {\n      state.ready = false\n      console.warn('播放列表请求失败，无法初始化！', error)\n    }\n  }\n\n  return {\n    state: readonly(state),\n    muted,\n    currentSong,\n\n    start,\n    play,\n    pause,\n    changeVolume,\n    toggleMuted,\n    togglePlay,\n    prevSong,\n    nextSong\n  }\n}\n\nconst MusicPlayerSymbol = Symbol('music-player')\nexport type Music = ReturnType<typeof createMusicPlayer>\nexport const createMusic = (config: PlayerConfig): Music & Plugin => {\n  const musicPlayer = createMusicPlayer(config)\n  if (config.autoStart) {\n    musicPlayer.start()\n  }\n\n  return {\n    ...musicPlayer,\n    install(app: App) {\n      app.provide(MusicPlayerSymbol, musicPlayer)\n    }\n  }\n}\n\nexport const useMusic = (): Music => {\n  return inject(MusicPlayerSymbol) as Music\n}\n","<template>\n  <div class=\"music-page\">\n    <div class=\"player\">\n      <button class=\"prev-song\" :disabled=\"!player?.state?.ready\" @click=\"player?.prevSong()\">\n        <i class=\"iconfont icon-music-prev\"></i>\n      </button>\n      <div class=\"album-box\">\n        <div class=\"circle-progress\">\n          <svg viewBox=\"0 0 100 100\">\n            <path\n              class=\"circle-progress-circle-track\"\n              fill=\"none\"\n              :d=\"trackPath\"\n              :stroke-width=\"relativeStrokeWidth\"\n            />\n            <path\n              class=\"circle-progress-circle-path\"\n              stroke-linecap=\"bevel\"\n              fill=\"none\"\n              :d=\"trackPath\"\n              :stroke-width=\"relativeStrokeWidth\"\n              :style=\"circlePathStyle\"\n            />\n          </svg>\n        </div>\n        <div class=\"song-bg-box\" :class=\"{ playing: player?.state.playing }\">\n          <img :src=\"currentSong?.cover_art_url\" draggable=\"false\" />\n        </div>\n        <div class=\"toggle-box\">\n          <transition name=\"module\" mode=\"out-in\">\n            <button\n              :key=\"player?.state.playing ? 'pause' : 'play'\"\n              :disabled=\"!player?.state.ready\"\n              class=\"toggle-btn\"\n              @click=\"player?.togglePlay()\"\n            >\n              <i\n                class=\"iconfont\"\n                :class=\"player?.state.playing ? 'icon-music-pause' : 'icon-music-play'\"\n              ></i>\n            </button>\n          </transition>\n        </div>\n        <div class=\"toggle-muted\">\n          <button class=\"muted-btn\" :disabled=\"!player?.state.ready\" @click=\"player?.toggleMuted()\">\n            <i class=\"iconfont\" :class=\"muted ? 'icon-music-muted' : 'icon-music-unmuted'\" />\n          </button>\n        </div>\n      </div>\n      <button class=\"next-song\" :disabled=\"!player?.state.ready\" @click=\"player?.nextSong()\">\n        <i class=\"iconfont icon-music-next\"></i>\n      </button>\n    </div>\n    <div class=\"song-info\">\n      <h4 class=\"name\">\n        <template v-if=\"currentSong\">\n          {{ currentSong.name }} By {{ currentSong.artist }} |\n          {{ currentSong.album || 'unknow' }}\n        </template>\n        <template v-else>Kind words are the music of the world.</template>\n      </h4>\n      <h5>{{ (player?.state.index || 0) + 1 }} / {{ player?.state.count || 'Infinity' }}</h5>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed } from 'vue'\n  import { isClient } from '/@/app/environment'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useMusic } from '/@/services/music'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { Language } from '/@/language/data'\n\n  export default defineComponent({\n    name: 'MusicPage',\n    setup() {\n      const { i18n, meta, isZhLang } = useEnhancer()\n      const musicPlayer = isClient ? useMusic() : null\n\n      meta(() => {\n        const enTitle = firstUpperCase(i18n.t(LANGUAGE_KEYS.PAGE_MUSIC, Language.En)!)\n        const titles = isZhLang.value ? [i18n.t(LANGUAGE_KEYS.PAGE_MUSIC), enTitle] : [enTitle]\n        return { pageTitle: titles.join(' | ') }\n      })\n\n      const relativeStrokeWidth = parseFloat(((15 / 450) * 100).toFixed(1))\n      const radius = 50 - relativeStrokeWidth / 2\n      const perimeter = 2 * Math.PI * radius\n      const trackPath = (() => {\n        const _radius = parseInt(String(radius), 10)\n        return `M 50 50 m 0 -${_radius} a ${_radius} ${_radius} 0 1 1 0 ${\n          _radius * 2\n        } a ${_radius} ${_radius} 0 1 1 0 -${_radius * 2}`\n      })()\n\n      const circlePathStyle = computed(() => {\n        if (musicPlayer) {\n          return {\n            strokeDasharray: `${perimeter}px, ${perimeter}px`,\n            strokeDashoffset: (1 - musicPlayer.state.progress / 100) * perimeter + 'px'\n          }\n        }\n      })\n\n      return {\n        player: musicPlayer,\n        muted: musicPlayer?.muted,\n        currentSong: musicPlayer?.currentSong,\n        trackPath,\n        relativeStrokeWidth,\n        circlePathStyle\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .music-page {\n    display: flex;\n    justify-content: center;\n    flex-direction: column;\n    align-items: center;\n    min-height: 58rem;\n    height: $full-page-active-content-height;\n\n    > .player {\n      display: flex;\n      justify-content: space-around;\n      align-items: center;\n      width: 100%;\n\n      > .prev-song,\n      > .next-song {\n        width: 3rem;\n\n        &:hover {\n          > .iconfont {\n            color: $text;\n          }\n        }\n\n        > .iconfont {\n          font-size: 3em;\n          color: $text-dividers;\n        }\n      }\n\n      > .album-box {\n        position: relative;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        width: 39rem;\n        height: 39rem;\n        opacity: 0.9;\n        @include visibility-transition();\n\n        &:hover {\n          opacity: 1;\n        }\n\n        @keyframes rotation {\n          from {\n            transform: rotate(0deg);\n          }\n          to {\n            transform: rotate(360deg);\n          }\n        }\n\n        > .song-bg-box {\n          position: absolute;\n          width: 100%;\n          height: 100%;\n          padding: $gap;\n          overflow: hidden;\n          border-radius: 100%;\n          animation: rotation 26s linear infinite;\n          animation-play-state: paused;\n\n          &.playing {\n            animation-play-state: running;\n          }\n\n          > img {\n            width: 100%;\n            height: 100%;\n            overflow: hidden;\n            border-radius: 100%;\n            background-color: $module-bg-darker-1;\n            background-image: cdn-url('/images/page-music/background.jpg');\n            background-size: cover;\n          }\n        }\n\n        > .toggle-box {\n          > .toggle-btn {\n            width: 6rem;\n            height: 6rem;\n            line-height: 6rem;\n            background-color: $module-bg;\n            border-radius: 100%;\n            opacity: 0.8;\n            font-size: 3em;\n            text-align: center;\n            transition: all $transition-time-fast;\n\n            &:hover {\n              opacity: 1;\n              transform: scale(1.2);\n            }\n\n            > .iconfont {\n              color: $white;\n            }\n          }\n        }\n\n        > .toggle-muted {\n          position: absolute;\n          top: 15%;\n\n          > .muted-btn {\n            > .iconfont {\n              font-size: 2em;\n              color: $module-bg;\n            }\n\n            &:hover {\n              > .iconfont {\n                color: $text-reversal;\n              }\n            }\n          }\n        }\n\n        > .circle-progress {\n          width: 100%;\n          height: 100%;\n          display: block;\n          position: absolute;\n\n          .circle-progress-circle-track {\n            stroke: $module-bg-darker-2;\n          }\n\n          .circle-progress-circle-path {\n            stroke: $module-bg-darker-4;\n            transition: all 0.6s;\n          }\n        }\n      }\n    }\n\n    > .song-info {\n      margin-top: $lg-gap * 3;\n      text-align: center;\n    }\n  }\n</style>\n","/**\n * @file Lens state\n * @module store.lens\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineStore } from 'pinia'\nimport { TunnelModule } from '/@/constants/tunnel'\nimport tunnel from '/@/services/tunnel'\n\nexport const useLensStore = defineStore('lens', {\n  state: () => ({\n    plogs: {\n      fetching: false,\n      data: [] as Array<any>\n    },\n    vlogs: {\n      fetching: false,\n      data: [] as Array<any>\n    }\n  }),\n  actions: {\n    fetchVlogs() {\n      if (this.vlogs.data.length) {\n        return Promise.resolve()\n      }\n\n      this.vlogs.fetching = true\n      return tunnel\n        .dispatch(TunnelModule.BiliBili)\n        .then((response) => {\n          this.vlogs.data = response\n        })\n        .finally(() => {\n          this.vlogs.fetching = false\n        })\n    }\n  }\n})\n","/**\n * @file Random number\n * @module util.random\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const randomNumber = (max: number): number => {\n  return Math.floor(Math.random() * max) + 1\n}\n","<template>\n  <div\n    class=\"lens-page\"\n    :class=\"{\n      mobile: isMobile,\n      dark: isDarkTheme\n    }\"\n  >\n    <page-banner :position=\"38\" :image=\"bannerImageUrl\">\n      <template #title>\n        <i18n zh=\"凡心所向，素履以往\" en=\"Because it's there\" />\n      </template>\n      <template #description>\n        <i18n>\n          <template #zh>生如逆旅，一苇以航</template>\n          <template #en>\"why did you want to climb mount Everest?\"</template>\n        </i18n>\n      </template>\n    </page-banner>\n    <div class=\"container\">\n      <div class=\"header\">\n        <div class=\"bilibili\">\n          <div class=\"left\">\n            <i class=\"iconfont icon-bilibili-full\"></i>\n            <ulink class=\"button\" :href=\"VALUABLE_LINKS.BILIBILI\"> (゜-゜)つロ 干杯~ </ulink>\n          </div>\n          <div class=\"qrcode\">\n            <uimage cdn class=\"image\" src=\"/images/page-lens/bilibili.jpg\" />\n          </div>\n        </div>\n        <div class=\"global\">\n          <ulink class=\"instagram\" :href=\"VALUABLE_LINKS.INSTAGRAM\">\n            <i class=\"iconfont icon-instagram\"></i>\n            <span class=\"text\">Follow me on Instagram</span>\n          </ulink>\n          <ulink class=\"youtube\" :href=\"VALUABLE_LINKS.YOUTUBE\">\n            <i class=\"iconfont icon-youtube\"></i>\n            <span class=\"text\">Subscribe my YouTube</span>\n          </ulink>\n        </div>\n        <div class=\"wechat-channel\">\n          <uimage cdn src=\"/images/page-lens/wechat-channel.jpg\" />\n        </div>\n      </div>\n      <!-- <div class=\"module-title plog\">Plogs</div> -->\n      <div class=\"module-title vlog\">Vlogs</div>\n      <placeholder\n        :data=\"lensStore.vlogs.data.length\"\n        :loading=\"lensStore.vlogs.fetching\"\n        @after-enter=\"observeLozad\"\n      >\n        <template #placeholder>\n          <empty class=\"vlog-empty\" key=\"empty\">\n            <i18n :lkey=\"LANGUAGE_KEYS.ARTICLE_PLACEHOLDER\" />\n          </empty>\n        </template>\n        <template #loading>\n          <div class=\"vlog-loading\" key=\"loading\">Loading...</div>\n        </template>\n        <template #default>\n          <ul class=\"videos\" ref=\"videoListElement\">\n            <li\n              class=\"item\"\n              @click=\"handlePlay(video)\"\n              :title=\"video.title\"\n              :key=\"index\"\n              v-for=\"(video, index) in lensStore.vlogs.data\"\n            >\n              <div class=\"thumb\">\n                <div class=\"mask\">\n                  <div class=\"button\">\n                    <i class=\"iconfont icon-music-play\" />\n                  </div>\n                </div>\n                <span class=\"length\">{{ video.length }}</span>\n                <div class=\"background lozad\" :data-background-image=\"getThumbUrl(video.pic)\" />\n              </div>\n              <h5 class=\"title\">\n                <span class=\"text\">{{ video.title }}</span>\n              </h5>\n              <p\n                class=\"description\"\n                style=\"-webkit-box-orient: vertical\"\n                v-text=\"video.description || '-'\"\n              />\n              <hr class=\"separator\" />\n              <p class=\"meta\">\n                <span class=\"item play\">\n                  <i class=\"iconfont icon-video-play\"></i>\n                  <span>{{ video.play }}</span>\n                </span>\n                <span class=\"item comment\">\n                  <i class=\"iconfont icon-comment\"></i>\n                  <span>{{ video.comment }}</span>\n                </span>\n                <span class=\"item created\">\n                  <i class=\"iconfont icon-clock\"></i>\n                  <span>{{ humanlizeDate(video.created) }}</span>\n                </span>\n              </p>\n            </li>\n          </ul>\n        </template>\n      </placeholder>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, onMounted, onBeforeUnmount } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useUniversalFetch } from '/@/universal'\n  import { useLensStore } from '/@/store/lens'\n  import { LozadObserver, LOZAD_CLASS_NAME, LOADED_CLASS_NAME } from '/@/services/lozad'\n  import { getFileProxyUrl } from '/@/transforms/url'\n  import { timeAgo } from '/@/transforms/moment'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { Language } from '/@/language/data'\n  import { randomNumber } from '/@/utils/random'\n  import { META, VALUABLE_LINKS } from '/@/config/app.config'\n  import PageBanner from '/@/components/common/banner.vue'\n\n  export default defineComponent({\n    name: 'LensPage',\n    components: {\n      PageBanner\n    },\n    setup() {\n      const { globalState, i18n, meta, isMobile, isDarkTheme, isZhLang } = useEnhancer()\n      const lensStore = useLensStore()\n      const lozadObserver = ref<LozadObserver | null>(null)\n      const videoListElement = ref<HTMLElement>()\n      const bannerImageUrl = `/images/page-lens/banner-${randomNumber(3)}.jpg`\n\n      meta(() => {\n        const enTitle = firstUpperCase(i18n.t(LANGUAGE_KEYS.PAGE_LENS, Language.En)!)\n        const titles = isZhLang.value ? [i18n.t(LANGUAGE_KEYS.PAGE_LENS), enTitle] : [enTitle]\n        return { pageTitle: titles.join(' | '), description: `${META.author} 的 Vlog 视频` }\n      })\n\n      const humanlizeDate = (date: number) => {\n        return timeAgo(date * 1000, i18n.language.value as any)\n      }\n\n      const getThumbUrl = (url: string) => {\n        return getFileProxyUrl(\n          `/bilibili/${url.replace('http://', '')}@560w_350h.${globalState.imageExt.value.ext}`\n        )\n      }\n\n      const handlePlay = (video: any) => {\n        window.open(`https://www.bilibili.com/video/av${video.aid}`)\n      }\n\n      const fetchAllData = () => {\n        return lensStore.fetchVlogs()\n      }\n\n      const observeLozad = () => {\n        const lozadElements = videoListElement.value?.querySelectorAll(`.${LOZAD_CLASS_NAME}`)\n        if (lozadElements?.length) {\n          lozadObserver.value = window.$lozad(lozadElements, {\n            loaded: (element) => element.classList.add(LOADED_CLASS_NAME)\n          })\n          lozadObserver.value.observe()\n        }\n      }\n\n      onMounted(() => {\n        observeLozad()\n      })\n\n      onBeforeUnmount(() => {\n        lozadObserver.value?.observer.disconnect()\n        lozadObserver.value = null\n      })\n\n      useUniversalFetch(() => fetchAllData())\n\n      return {\n        VALUABLE_LINKS,\n        LANGUAGE_KEYS,\n        lensStore,\n        isMobile,\n        isDarkTheme,\n        videoListElement,\n        humanlizeDate,\n        getThumbUrl,\n        handlePlay,\n        observeLozad,\n        bannerImageUrl\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .lens-page {\n    .header {\n      display: flex;\n      width: 100%;\n      height: 18rem;\n      margin: $gap * 2 0;\n\n      .bilibili,\n      .instagram,\n      .youtube,\n      .wechat-channel {\n        @include radius-box($sm-radius);\n      }\n\n      .bilibili {\n        flex-shrink: 0;\n        display: flex;\n        width: 52%;\n        height: 100%;\n        margin-right: $gap * 2;\n        border: 2px solid $bilibili-pink-primary;\n\n        .left {\n          flex-grow: 1;\n          height: 100%;\n          text-align: center;\n          background-color: $bilibili-pink-primary;\n          color: $white;\n\n          .iconfont {\n            display: block;\n            margin-top: $gap * 2;\n            font-size: 5em;\n          }\n\n          .button {\n            display: inline-flex;\n            justify-content: center;\n            align-items: center;\n            width: 50%;\n            height: 3rem;\n            margin-top: $gap * 2;\n            border: 2px solid $white;\n            border-radius: $xs-radius;\n            font-weight: bold;\n            color: inherit;\n            &:hover {\n              color: $bilibili-pink-primary;\n              background-color: $white;\n            }\n          }\n        }\n\n        .qrcode {\n          flex-shrink: 0;\n          height: 100%;\n          width: 18rem;\n          text-align: center;\n          background-color: #fbfbfd;\n        }\n\n        .image {\n          height: 100%;\n          width: auto;\n        }\n      }\n\n      .global {\n        flex-grow: 1;\n        display: flex;\n        flex-direction: column;\n        margin-right: $gap * 2;\n\n        .instagram,\n        .youtube {\n          flex-grow: 1;\n          display: flex;\n          flex-direction: row;\n          justify-content: start;\n          align-items: center;\n          transition: opacity $transition-time-fast;\n          color: $white;\n          opacity: 0.9;\n          &:hover {\n            opacity: 1;\n          }\n\n          .iconfont {\n            font-size: $font-size-h2 * 2;\n            margin-left: $gap * 2;\n            margin-right: $gap;\n          }\n\n          .text {\n            font-weight: bold;\n            font-size: $font-size-h4;\n          }\n        }\n\n        .instagram {\n          margin-bottom: $lg-gap;\n          background: $instagram-primary;\n          background: $instagram-gradient;\n          @include visibility-transition();\n        }\n\n        .youtube {\n          background-color: $youtube-primary;\n        }\n      }\n\n      .wechat-channel {\n        width: 184px;\n        height: 100%;\n        background-color: $module-bg;\n        border: 2px solid #fa9d3b;\n\n        img {\n          width: auto;\n          height: 100%;\n        }\n      }\n    }\n\n    .module-title {\n      margin-bottom: $gap * 2;\n      line-height: 3.6em;\n      border-width: 4px;\n      border-style: double;\n      border-radius: $lg-radius;\n      background-color: $module-bg-opaque;\n      text-align: center;\n      font-size: $font-size-h3;\n      font-weight: bold;\n      text-transform: uppercase;\n      letter-spacing: 5px;\n\n      &.plog {\n        color: $instagram-primary;\n        border-image: $instagram-gradient 30;\n      }\n\n      &.vlog {\n        color: $bilibili-blue-primary;\n        border-color: $bilibili-pink-primary $bilibili-blue-primary $bilibili-blue-primary\n          $bilibili-pink-primary;\n      }\n    }\n\n    .videos {\n      padding: 0;\n      margin: 0;\n      margin-bottom: $gap * 2;\n      list-style: none;\n      display: grid;\n      grid-template-columns: repeat(3, 1fr);\n      grid-gap: $gap * 2;\n\n      > .item {\n        display: block;\n        cursor: pointer;\n        @include radius-box($sm-radius);\n        @include common-bg-module();\n\n        &:hover {\n          .thumb {\n            .background {\n              transform: rotate(2deg) scale(1.1);\n            }\n\n            .mask {\n              @include visible();\n              .button {\n                transform: scale(1);\n              }\n            }\n          }\n\n          .title .text {\n            text-decoration: none;\n            border-color: initial;\n          }\n        }\n\n        &:nth-child(3n + 0) {\n          margin-right: 0;\n        }\n\n        .thumb {\n          width: 100%;\n          height: 14rem;\n          position: relative;\n          overflow: hidden;\n          background-color: $module-bg-darker-3;\n\n          .background {\n            width: 100%;\n            height: 100%;\n            background-size: cover;\n            background-position: center;\n            transform: rotate(0deg) scale(1);\n            @include transform-transition($transition-time-normal);\n          }\n\n          .length {\n            position: absolute;\n            bottom: 0;\n            right: 0;\n            z-index: $z-index-normal + 1;\n            display: inline-flex;\n            justify-content: center;\n            align-items: center;\n            width: 4rem;\n            height: 2rem;\n            border-top-left-radius: $xs-radius;\n            background-color: $text-dividers;\n            color: $white;\n          }\n\n          .mask {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            z-index: $z-index-normal + 1;\n            @include hidden();\n            @include visibility-transition();\n\n            .button {\n              width: 5rem;\n              height: 5rem;\n              line-height: 5rem;\n              text-align: center;\n              background: $module-bg;\n              border-radius: 100%;\n              color: $text-reversal;\n              opacity: 0.88;\n              font-size: 3em;\n              transform: scale(1.2);\n              @include transform-transition($transition-time-normal);\n            }\n          }\n        }\n\n        > .title {\n          padding: 0 $gap;\n          margin-top: $gap;\n          margin-bottom: $sm-gap;\n          font-weight: bold;\n          text-transform: capitalize;\n          .text {\n            border-bottom: 1px solid transparent;\n          }\n        }\n\n        > .description {\n          padding: 0 $gap;\n          margin-bottom: $sm-gap;\n          line-height: 2rem;\n          height: 2rem;\n          font-size: $font-size-h6;\n        }\n\n        > .separator {\n          border-top: 1px dotted $module-bg-darker-1;\n          margin: 0;\n        }\n\n        > .meta {\n          margin: 0;\n          height: 3rem;\n          display: flex;\n          justify-content: space-around;\n          align-items: center;\n          font-size: $font-size-small;\n\n          > .item {\n            font-weight: 400;\n            color: $text-secondary;\n\n            .iconfont {\n              margin-right: $sm-gap;\n            }\n          }\n        }\n      }\n    }\n\n    .vlog-empty,\n    .vlog-loading {\n      @include radius-box($sm-radius);\n      @include common-bg-module();\n      min-height: 10rem;\n      margin-bottom: $gap;\n    }\n\n    .vlog-loading {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      font-size: $font-size-h3;\n    }\n\n    &.dark {\n      .videos {\n        .item {\n          .thumb {\n            .button {\n              color: $text-disabled !important;\n            }\n          }\n        }\n      }\n    }\n\n    &.mobile {\n      min-height: auto;\n\n      .banner {\n        height: 12rem;\n        margin-bottom: $gap;\n        @include radius-box($sm-radius);\n\n        .title {\n          font-size: $font-size-h1;\n          margin-bottom: $gap;\n        }\n        .description {\n          margin: 0;\n        }\n      }\n\n      .container {\n        width: 100%;\n\n        .header {\n          height: auto;\n          flex-wrap: wrap;\n\n          .bilibili,\n          .global {\n            height: 16rem;\n            margin: 0;\n            margin-bottom: $gap;\n          }\n          .bilibili,\n          .global,\n          .wechat-channel {\n            width: 100%;\n          }\n        }\n\n        .videos {\n          > .item {\n            width: 100%;\n            height: auto;\n            margin-right: 0;\n            margin-bottom: $gap;\n\n            > .thumb {\n              height: 10rem;\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"job-page\" :class=\"{ mobile: isMobile }\">\n    <page-banner image=\"/images/page-job/banner.jpg\">\n      <template #title>\n        <i18n zh=\"内推找我，绝对靠谱\" en=\"We work together\" />\n      </template>\n      <template #description>\n        <i18n zh=\"一手人脉，假一赔万\" en=\"We fight for future together\" />\n      </template>\n    </page-banner>\n    <div class=\"container\">\n      <ul class=\"jobs\">\n        <li class=\"item\" :class=\"job.id\" :key=\"index\" v-for=\"(job, index) in jobs\">\n          <div\n            class=\"logo\"\n            :style=\"{\n              backgroundImage: `url('${getFileCDNUrl(job.logo)}')`\n            }\"\n          >\n            <uimage cdn class=\"qrcode\" :src=\"job.qrcode\" v-if=\"job.qrcode\" />\n          </div>\n          <div class=\"content\">\n            <ulink class=\"title\" :href=\"job.url\">\n              {{ job.company }}\n              <span class=\"location\" v-if=\"job.location\">（{{ job.location }}）</span>\n            </ulink>\n            <p class=\"description\" v-if=\"job.description\" v-html=\"job.description\" />\n            <button class=\"submit\" @click=\"handleSubmit(job)\" v-if=\"job.email\">\n              {{ job.email.replace('@', '#') }}\n              <i class=\"iconfont icon-mail-plane\"></i>\n            </button>\n          </div>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import PageBanner from '/@/components/common/banner.vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { getFileCDNUrl } from '/@/transforms/url'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { Language } from '/@/language/data'\n  import { META } from '/@/config/app.config'\n\n  export default defineComponent({\n    name: 'JobPage',\n    components: {\n      PageBanner\n    },\n    setup() {\n      const { i18n, meta, isMobile, isZhLang } = useEnhancer()\n\n      meta(() => {\n        const enTitle = firstUpperCase(i18n.t(LANGUAGE_KEYS.PAGE_JOB, Language.En)!)\n        const titles = isZhLang.value ? [i18n.t(LANGUAGE_KEYS.PAGE_JOB), enTitle] : [enTitle]\n        return { pageTitle: titles.join(' | '), description: `找 ${META.author} 内推` }\n      })\n\n      const jobs = [\n        {\n          id: 'qiniu',\n          company: '七牛云',\n          logo: '/images/page-job/qiniu.jpg',\n          url: 'https://www.qiniu.com/company',\n          location: '上海',\n          description: '公司赚钱，Leader nice，同事完美，业务靠谱，从不加班',\n          email: META.email\n        },\n        {\n          id: 'bytedance',\n          company: '字节跳动',\n          logo: '/images/page-job/bytedance.jpg',\n          qrcode: '/images/page-job/bytedance-qrcode.png',\n          url: 'https://job.toutiao.com/s/J9oWrQQ',\n          location: '国内',\n          description: '饭好吃，不要钱<br> 薪资不低，加班给钱；马上上市，未来可期',\n          email: META.email\n        },\n        {\n          id: 'meituan',\n          company: '美团点评',\n          logo: '/images/page-job/meituan.png',\n          url: 'http://zhaopin.meituan.com',\n          description: '优惠券多 <br> 技术 OK',\n          email: `iamjooger@gmail.com`\n        },\n        {\n          id: 'ant',\n          company: '蚂蚁金服',\n          location: '国内',\n          logo: '/images/page-job/ant.jpg',\n          url: 'https://www.antgroup.com/about/join-us',\n          description: '巨头市值，大牛群居',\n          email: META.email\n        },\n        {\n          id: 'github-veact',\n          company: 'GitHub Veact Project',\n          location: 'remote',\n          logo: '/images/page-job/github.jpg',\n          url: 'https://github.com/veactjs',\n          description: 'Become the maintainer of the <code>veact</code> project',\n          email: META.email\n        },\n        {\n          id: 'todo',\n          company: '假装是广告位',\n          logo: '/images/page-job/github-package.png',\n          description: '如果你有自认为不错的机会，请联系我~',\n          email: META.email\n        }\n      ]\n\n      const handleSubmit = (job: any) => {\n        const subject = `嗨！求内推！`\n        const body = `我想求内推 ${job.company} - ${\n          job.location || ''\n        } 的职位，我在简历在附件中。%0D%0A %0D%0A from ${META.title}`\n        const mailAddress = `mailto:${job.email}?subject=${subject}&body=${body}`\n        window.open(mailAddress)\n      }\n\n      return {\n        jobs,\n        isMobile,\n        handleSubmit,\n        getFileCDNUrl\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .job-page {\n    .jobs {\n      padding: 0;\n      margin: $gap * 2 0;\n      display: grid;\n      grid-template-columns: repeat(3, 1fr);\n      grid-gap: $gap * 2;\n\n      .item {\n        display: block;\n        height: auto;\n        @include radius-box($sm-radius);\n        @include common-bg-module();\n\n        .logo {\n          width: 100%;\n          height: 16rem;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          overflow: hidden;\n          background-color: $module-bg-darker-2;\n          background-size: cover;\n          background-position: center;\n\n          .qrcode {\n            height: 50%;\n            background-color: $white;\n            @include radius-box($sm-radius);\n          }\n        }\n\n        .content {\n          padding: $lg-gap;\n\n          .title {\n            margin: 0;\n            font-weight: bold;\n            font-size: $font-size-h4;\n            text-transform: capitalize;\n            border-bottom: 1px solid transparent;\n            &:hover {\n              text-decoration: none;\n              border-color: initial;\n            }\n\n            .location {\n              font-weight: normal;\n            }\n          }\n\n          .description {\n            margin-top: $gap;\n            margin-bottom: 0;\n            line-height: 2;\n          }\n\n          .submit {\n            $height: 2.4em;\n            display: block;\n            width: 100%;\n            margin-top: $lg-gap;\n            line-height: $height;\n            border: 1px solid;\n            border-color: $primary;\n            color: $primary;\n            font-size: $font-size-small;\n            text-align: center;\n            letter-spacing: 1px;\n            transition: color $transition-time-fast, background-color $transition-time-fast;\n            @include radius-box($xs-radius);\n\n            &:hover {\n              color: $text-reversal;\n              background-color: $primary;\n            }\n          }\n        }\n      }\n    }\n\n    &.mobile {\n      .banner {\n        height: 12rem;\n        margin-bottom: $gap;\n        @include radius-box($sm-radius);\n\n        .title {\n          font-size: $font-size-h1;\n          margin-bottom: $gap;\n        }\n        .description {\n          margin: 0;\n        }\n      }\n\n      .container {\n        width: 100%;\n\n        .jobs {\n          display: block;\n\n          ::v-deep(.list) {\n            width: 100%;\n            .item {\n              margin: 0;\n              margin-bottom: $gap;\n\n              .logo {\n                height: 10rem;\n              }\n            }\n\n            &:last-child {\n              .item:last-child {\n                margin: 0;\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"about-page\" :class=\"{ mobile: isMobile }\">\n    <div class=\"banner\">\n      <div class=\"background\">\n        <video class=\"video\" loop muted autoplay :controls=\"false\">\n          <source :src=\"backgroundVideo\" type=\"video/mp4\" />\n        </video>\n      </div>\n      <div class=\"gravatar\">\n        <uimage class=\"avatar\" :src=\"adminInfo?.gravatar || '/images/gravatar.png'\" />\n        <h2 class=\"name\">{{ adminInfo?.name || '-' }}</h2>\n        <p class=\"role\">{{ adminInfo?.slogan || '-' }}</p>\n        <div class=\"socials\">\n          <span class=\"normal\">\n            <ulink class=\"item github\" :href=\"VALUABLE_LINKS.GITHUB\">\n              <i class=\"iconfont icon-github\" />\n              <span class=\"text\">GitHub</span>\n            </ulink>\n            <ulink class=\"item twitter\" :href=\"VALUABLE_LINKS.TWITTER\">\n              <i class=\"iconfont icon-twitter\" />\n              <span class=\"text\">Twitter</span>\n            </ulink>\n            <ulink class=\"item instagram\" :href=\"VALUABLE_LINKS.INSTAGRAM\">\n              <i class=\"iconfont icon-instagram\" />\n              <span class=\"text\">Instagram</span>\n            </ulink>\n          </span>\n          <span class=\"mini\">\n            <ulink class=\"item telegram\" :href=\"VALUABLE_LINKS.TELEGRAM\">\n              <i class=\"iconfont icon-telegram\" />\n            </ulink>\n            <ulink class=\"item linkedin\" :href=\"VALUABLE_LINKS.LINKEDIN\">\n              <i class=\"iconfont icon-linkedin\" />\n            </ulink>\n            <ulink class=\"item douban\" :href=\"VALUABLE_LINKS.DOUBAN\">\n              <i class=\"iconfont icon-douban\" />\n            </ulink>\n            <ulink class=\"item bilibili\" :href=\"VALUABLE_LINKS.BILIBILI\">\n              <i class=\"iconfont icon-bilibili\" />\n            </ulink>\n            <ulink class=\"item zhihu\" :href=\"VALUABLE_LINKS.ZHIHU\">\n              <i class=\"iconfont icon-zhihu\" />\n            </ulink>\n          </span>\n        </div>\n      </div>\n    </div>\n    <div class=\"container\">\n      <div class=\"profile\">\n        <div class=\"content\">\n          <div class=\"item\">\n            <i class=\"iconfont icon-heart\" />\n            <span class=\"like-text\">\n              <i18n\n                zh=\"酒池肉林、桀骜不羁、日夜笙歌、五音六律、依翠偎红、目营心匠\"\n                en=\"misfits. rebels. troublemakers. rocker.\"\n              />\n            </span>\n          </div>\n          <div class=\"item\">\n            <i class=\"iconfont icon-swordsman\" />\n            <span class=\"live-map\" @click=\"toggleLiveMap\">\n              <i18n\n                zh=\"路为纸，地成册，行作笔，心当墨；思无界，行有疆\"\n                en=\"Every path I went astray built my Rome.\"\n              />\n            </span>\n            <client-only>\n              <popup :visible=\"isOnLiveMap\" @close=\"toggleLiveMap\">\n                <iframe :src=\"VALUABLE_LINKS.GOOGLE_LIVE_MAP\" frameborder=\"0\" class=\"live-map\" />\n              </popup>\n            </client-only>\n          </div>\n          <div class=\"item\">\n            <i class=\"iconfont icon-music\" />\n            <span class=\"music\">\n              <router-link :to=\"getPageRoute(RouteName.Music)\">\n                Techno, Electronic, Disco, Rock, Popular\n              </router-link>\n              <ulink class=\"spotify\" :href=\"VALUABLE_LINKS.SPOTIFY\">\n                <i class=\"iconfont icon-spotify\" />\n              </ulink>\n              <ulink class=\"music-163\" :href=\"VALUABLE_LINKS.MUSIC_163\">\n                <i class=\"iconfont icon-163music-logo\" />\n              </ulink>\n            </span>\n          </div>\n          <div class=\"item\">\n            <i class=\"iconfont icon-coffee\" />\n            <router-link class=\"text-link\" :to=\"getPageRoute(RouteName.Job)\">\n              <i18n zh=\"找我内推\" en=\"Find job\" />\n            </router-link>\n            <span class=\"separator\">|</span>\n            <router-link class=\"text-link\" :to=\"getPageRoute(RouteName.Freelancer)\">\n              <i18n zh=\"找我干活\" en=\"Hire me\" />\n            </router-link>\n            <span class=\"separator\">|</span>\n            <router-link class=\"text-link\" :to=\"getPageRoute(RouteName.Lens)\">\n              <i18n zh=\"关注我的 Vlog\" en=\"Follow me\" />\n            </router-link>\n            <span class=\"separator\">|</span>\n            <router-link class=\"text-link\" :to=\"getPageRoute(RouteName.Merch)\">\n              <i18n zh=\"体验我的周边\" en=\"Merch bar\" />\n            </router-link>\n          </div>\n          <div class=\"item\">\n            <i class=\"iconfont icon-discussion\" />\n            <ulink class=\"text-link\" :href=\"VALUABLE_LINKS.QQ_GROUP\">\n              <i18n zh=\"寂寞同性交友群\" en=\"QQ group\" />\n            </ulink>\n            <span class=\"separator\">|</span>\n            <ulink class=\"text-link\" :href=\"VALUABLE_LINKS.TELEGRAM_GROUP\">\n              <i18n zh=\"电报群\" en=\"Telegram group\" />\n            </ulink>\n          </div>\n          <div class=\"separator\"></div>\n          <div class=\"item\">\n            <i class=\"iconfont icon-friend\" />\n            <span class=\"friends\">\n              <a\n                v-for=\"(link, name) in FRIEND_LINKS\"\n                :key=\"link\"\n                :href=\"link\"\n                class=\"link\"\n                target=\"_blank\"\n                rel=\"external nofollow noopener\"\n              >\n                {{ name }}\n              </a>\n            </span>\n            <span>...</span>\n          </div>\n        </div>\n        <desktop-only>\n          <div class=\"wechat\">\n            <div class=\"qrcode\">\n              <uimage cdn class=\"image\" src=\"/images/page-about/wechat.jpg\" />\n              <div class=\"slogan\">\n                <span class=\"text\">\n                  <i18n zh=\"扫码加微，点燃灵魂\" en=\"Scan the QR code on WeChat\" />\n                </span>\n              </div>\n            </div>\n            <div class=\"cover\" @mouseenter=\"handleHoverFollowMe\">\n              <div class=\"friend-me\">\n                <i class=\"iconfont icon-wechat\"></i>\n                <i18n zh=\"众里寻他\" en=\"WeChat\" />\n              </div>\n            </div>\n          </div>\n        </desktop-only>\n      </div>\n      <div class=\"location-box\">\n        <iframe class=\"iframe\" src=\"/partials/map.html\" />\n      </div>\n      <desktop-only>\n        <div class=\"github-box\">\n          <div class=\"sponsors\">\n            <ulink\n              class=\"button github\"\n              :href=\"VALUABLE_LINKS.GITHUB_SPONSORS\"\n              @mousedown=\"handleTouchSponsor\"\n            >\n              <i class=\"iconfont icon-heart\" />\n              <span class=\"text\">Sponsor me</span>\n            </ulink>\n            <ulink\n              class=\"button paypal\"\n              :href=\"VALUABLE_LINKS.PAYPAL\"\n              @mousedown=\"handleTouchSponsor\"\n            >\n              <i class=\"iconfont icon-paypal\" />\n              <span class=\"text\">PayPal me</span>\n            </ulink>\n            <ulink\n              class=\"button more\"\n              :href=\"VALUABLE_LINKS.SPONSOR\"\n              @mousedown=\"handleTouchSponsor\"\n            >\n              <i class=\"iconfont icon-qrcode\" />\n              <span class=\"text\">More payment</span>\n            </ulink>\n          </div>\n          <span class=\"divider\"></span>\n          <uimage cdn class=\"pal\" src=\"/images/page-about/peace-and-love.jpg\" />\n          <span class=\"divider\"></span>\n          <ulink class=\"homepage-link\" :href=\"VALUABLE_LINKS.GITHUB\">\n            <uimage cdn src=\"/effects/ghchart.svg\" />\n          </ulink>\n        </div>\n      </desktop-only>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, toRef } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { RouteName } from '/@/app/router'\n  import { useMetaStore } from '/@/store/meta'\n  import { getPageRoute } from '/@/transforms/route'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { getFileStaticUrl } from '/@/transforms/url'\n  import { Language } from '/@/language/data'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { GAEventActions, GAEventTags } from '/@/constants/gtag'\n  import { META, VALUABLE_LINKS, FRIEND_LINKS } from '/@/config/app.config'\n\n  export default defineComponent({\n    name: 'AboutPage',\n    setup() {\n      const { i18n, meta, gtag, globalState, isZhLang, isMobile } = useEnhancer()\n      const metaStore = useMetaStore()\n      const isOnLiveMap = toRef(globalState.switchBox, 'liveMap')\n      const adminInfo = computed(() => metaStore.adminInfo.data)\n\n      // MARK: 非常有必要，vite 对 video.source.src 的解析有问题，会将其认为是 asset，而非 static resource，从而编译失败\n      const backgroundVideo = getFileStaticUrl('/assets/page-about-background.mp4')\n\n      meta(() => {\n        const enTitle = firstUpperCase(i18n.t(LANGUAGE_KEYS.PAGE_ABOUT, Language.En)!)\n        const titles = isZhLang.value ? [i18n.t(LANGUAGE_KEYS.PAGE_ABOUT), enTitle] : [enTitle]\n        return { pageTitle: titles.join(' | '), description: `关于 ${META.author}` }\n      })\n\n      const handleHoverFollowMe = () => {\n        gtag?.event('加微信码', {\n          event_category: GAEventActions.View,\n          event_label: GAEventTags.AboutPage\n        })\n      }\n\n      const handleTouchSponsor = () => {\n        gtag?.event('赞赏 Sponsor', {\n          event_category: GAEventActions.Click,\n          event_label: GAEventTags.AboutPage\n        })\n      }\n\n      const toggleLiveMap = () => {\n        globalState.switchTogglers.liveMap()\n        if (globalState.switchBox.liveMap) {\n          gtag?.event('轨迹地图', {\n            event_category: GAEventActions.View,\n            event_label: GAEventTags.AboutPage\n          })\n        }\n      }\n\n      return {\n        VALUABLE_LINKS,\n        FRIEND_LINKS,\n        RouteName,\n        getPageRoute,\n        isMobile,\n        isOnLiveMap,\n        backgroundVideo,\n        adminInfo,\n        handleHoverFollowMe,\n        handleTouchSponsor,\n        toggleLiveMap\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .live-map {\n    width: 88vw;\n    height: 88vh;\n  }\n\n  .about-page {\n    width: 100%;\n    overflow: hidden;\n\n    .banner {\n      $banner-height: 22rem;\n      margin-bottom: $gap * 2;\n\n      .background {\n        display: block;\n        position: absolute;\n        width: 100%;\n        height: $banner-height;\n        top: 0;\n        left: 0;\n        overflow: hidden;\n        z-index: $z-index-normal + 1;\n        background-color: $module-bg-darker-1;\n\n        &::before {\n          content: '';\n          position: absolute;\n          display: block;\n          height: 1rem;\n          bottom: -0.5rem;\n          left: 0;\n          right: 0;\n          background-image: radial-gradient(circle, transparent 70%, $text-reversal 70%);\n          background-size: 0.7em 1em;\n          background-position: 0 -0.5em;\n        }\n\n        .video {\n          width: 100%;\n          height: 100%;\n          object-fit: cover;\n          object-position: 0% 30%;\n          pointer-events: none;\n        }\n      }\n\n      .gravatar {\n        position: relative;\n        display: flex;\n        align-items: center;\n        flex-direction: column;\n        justify-content: flex-start;\n        width: 100%;\n        background-color: $module-bg;\n        @include radius-box($lg-radius);\n        background-image: cdn-url('/images/page-about/background.png'),\n          linear-gradient($module-bg-opaque 40%, #00000000 100%);\n        background-size: contain;\n        background-repeat: repeat-x;\n        background-blend-mode: lighten;\n\n        &:hover {\n          .avatar {\n            transform: rotate(360deg);\n          }\n        }\n\n        > .avatar {\n          $size: 8rem;\n          width: $size;\n          height: $size;\n          z-index: $z-index-normal + 2;\n          margin-top: $banner-height - 4rem;\n          max-width: 100%;\n          border-radius: 100%;\n          border: 5px solid $module-bg;\n          box-sizing: content-box;\n          transition: transform $transition-time-slow;\n        }\n\n        .name,\n        .role {\n          text-align: center;\n          color: $text;\n        }\n\n        .socials {\n          $button-size: 3rem;\n          display: flex;\n          justify-content: center;\n          height: $button-size;\n          margin-top: $lg-gap;\n          margin-bottom: $gap * 2;\n\n          .normal {\n            display: inline-flex;\n            align-items: center;\n            margin-right: $gap;\n\n            .item {\n              padding: 0 $gap;\n              margin-right: $gap;\n              height: 100%;\n              display: inline-flex;\n              align-items: center;\n              border-radius: $sm-radius;\n              color: $white;\n\n              .iconfont {\n                font-size: $font-size-h4;\n                margin-right: $sm-gap;\n              }\n\n              &.github {\n                background-color: $github-primary;\n                &:hover {\n                  background-color: $github-primary-hover;\n                }\n              }\n              &.twitter {\n                background-color: $twitter-primary;\n                &:hover {\n                  background-color: $twitter-primary-hover;\n                }\n              }\n              &.instagram {\n                opacity: 0.8;\n                margin: 0;\n                background: $instagram-primary;\n                background: $instagram-gradient;\n                @include visibility-transition();\n                &:hover {\n                  opacity: 1;\n                }\n              }\n            }\n          }\n\n          > .mini {\n            > .item {\n              display: inline-block;\n              width: $button-size;\n              height: $button-size;\n              line-height: $button-size;\n              margin-right: $gap;\n              text-align: center;\n              border-radius: $sm-radius;\n              color: $white;\n              opacity: 0.8;\n              @include visibility-transition();\n\n              &:hover {\n                opacity: 1;\n              }\n\n              .iconfont {\n                font-size: $font-size-h4;\n              }\n\n              &.telegram {\n                background-color: $telegram-primary;\n              }\n              &.douban {\n                background-color: $douban-primary;\n              }\n              &.zhihu {\n                background-color: $zhihu-primary;\n              }\n              &.weibo {\n                background-color: $weibo-primary;\n              }\n              &.bilibili {\n                background-color: $bilibili-pink-primary;\n              }\n              &.stackoverflow {\n                background-color: $stackoverflow-primary;\n              }\n              &.algorithm {\n                background-color: $leetcode-primary;\n              }\n              &.quora {\n                background-color: $quora-primary;\n              }\n              &.linkedin {\n                background-color: $linkedin-primary;\n              }\n            }\n          }\n        }\n      }\n    }\n\n    .profile {\n      width: 100%;\n      height: auto;\n      display: flex;\n      overflow: hidden;\n      margin-bottom: $gap * 2;\n\n      .content {\n        flex-grow: 1;\n        padding: $gap * 2 $lg-gap * 2;\n        position: relative;\n        @include common-bg-module();\n        @include radius-box($lg-radius);\n        font-size: $font-size-h5 + 1;\n\n        > .item {\n          line-height: 2.5em;\n          min-height: 2.5em;\n          margin-bottom: $gap;\n          &:last-child {\n            margin-bottom: 0;\n          }\n\n          > .iconfont {\n            width: 2em;\n            margin-right: 1em;\n            display: inline-block;\n            font-size: $font-size-h4;\n            text-align: center;\n            color: $text-dividers;\n\n            &.icon-swordsman {\n              color: #a94444;\n            }\n            &.icon-heart {\n              color: $red;\n            }\n            &.icon-coffee {\n              color: $instagram-primary;\n            }\n            &.icon-dollar {\n              color: #ffa800;\n            }\n            &.icon-music {\n              color: $music163-primary;\n            }\n            &.icon-discussion {\n              color: $telegram-primary;\n            }\n            &.icon-friend {\n              color: $accent;\n            }\n          }\n\n          .separator {\n            margin: 0 $sm-gap;\n          }\n\n          .text-link {\n            font-weight: bold;\n            padding-bottom: 2px;\n            border-bottom: 1px solid;\n          }\n\n          .like-text {\n            font-family: 'webfont-bolder', DINRegular;\n            text-transform: capitalize;\n          }\n\n          .live-map {\n            cursor: pointer;\n            border-bottom: 1px solid;\n            font-family: 'webfont-bolder', DINRegular;\n          }\n\n          > .music {\n            .spotify,\n            .music-163 {\n              margin-left: $xs-gap;\n            }\n            .spotify {\n              color: $spotify-primary;\n            }\n            .music-163 {\n              color: $music163-primary;\n            }\n          }\n\n          > .friends {\n            .link {\n              margin-right: 1.8rem;\n              text-transform: capitalize;\n              font-weight: bold;\n              padding-bottom: 2px;\n              border-bottom: 1px solid;\n            }\n          }\n        }\n      }\n\n      .wechat {\n        position: relative;\n        display: block;\n        width: 22rem;\n        overflow: hidden;\n        margin-left: $gap * 2;\n        padding: 1rem;\n        @include common-bg-module();\n        @include radius-box($lg-radius);\n\n        .qrcode {\n          display: flex;\n          flex-direction: column;\n          width: 100%;\n          height: 100%;\n          @include radius-box($sm-radius);\n\n          .image {\n            width: 100%;\n          }\n          .slogan {\n            flex-grow: 1;\n            display: inline-flex;\n            justify-content: center;\n            align-items: center;\n            background-color: #fff;\n            text-align: center;\n            color: #555;\n\n            .text {\n              font-weight: bold;\n              border-bottom: 1px solid;\n              padding-bottom: 0.5em;\n            }\n          }\n        }\n        .cover {\n          /* opacity: 0; */\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          background-color: $module-bg;\n          backdrop-filter: blur(6px);\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          align-items: center;\n          &:hover {\n            background-color: transparent;\n            backdrop-filter: none;\n            .friend-me {\n              visibility: hidden;\n            }\n          }\n\n          .friend-me {\n            display: block;\n            border: 1px solid;\n            border-radius: $xs-radius;\n            padding: 1em;\n            font-weight: bold;\n            writing-mode: vertical-lr;\n            letter-spacing: 1em;\n            text-transform: uppercase;\n\n            .iconfont {\n              font-weight: normal;\n            }\n          }\n        }\n      }\n    }\n\n    .location-box {\n      overflow: hidden;\n      width: 100%;\n      padding: $sm-gap;\n      margin-bottom: $gap * 2;\n      @include radius-box($lg-radius);\n      @include common-bg-module();\n\n      iframe {\n        width: 100%;\n        height: 19rem;\n        border-radius: $xs-radius;\n      }\n    }\n\n    .github-box {\n      overflow: hidden;\n      position: relative;\n      display: flex;\n      justify-content: space-evenly;\n      align-items: center;\n      width: 100%;\n      height: 12rem;\n      margin-bottom: $gap * 2;\n      @include common-bg-module();\n      @include radius-box($lg-radius);\n\n      .sponsors {\n        display: inline-flex;\n        flex-direction: column;\n\n        .button {\n          $button-size: 2.4rem;\n          display: inline-flex;\n          width: 100%;\n          margin-bottom: $gap;\n          line-height: $button-size;\n          color: $white;\n          @include radius-box($xs-radius);\n          @include background-transition();\n          &:last-child {\n            margin: 0;\n          }\n\n          .iconfont {\n            width: $button-size;\n            height: $button-size;\n            line-height: $button-size;\n            text-align: center;\n          }\n          .text {\n            padding: 0 $sm-gap;\n            font-weight: bold;\n            font-size: $font-size-small;\n          }\n\n          &.github,\n          &.paypal,\n          &.more {\n            opacity: 0.9;\n            @include visibility-transition();\n            &:hover {\n              opacity: 1;\n            }\n          }\n          &.github {\n            background-color: $github-primary;\n            .iconfont {\n              background-color: $github-primary-hover;\n              color: $github-sponsor-primary;\n            }\n          }\n          &.paypal {\n            background-color: $paypal-primary;\n            .iconfont {\n              background-color: $paypal-primary-hover;\n              color: $paypal-primary;\n            }\n          }\n          &.more {\n            background-color: rgba($accent, 0.8);\n            .iconfont {\n              background-color: $accent;\n            }\n          }\n        }\n      }\n\n      .pal {\n        display: block;\n        height: 110px;\n        @include radius-box($lg-radius);\n      }\n\n      .divider {\n        height: 60%;\n        width: 1px;\n        background-color: $module-bg-darker-1;\n        opacity: 0.5;\n      }\n\n      .homepage-link {\n        height: 100%;\n        display: flex;\n        align-items: center;\n      }\n    }\n\n    &.mobile {\n      margin: 0;\n\n      .location-box {\n        margin: 0;\n\n        .iframe {\n          height: 11rem;\n        }\n      }\n\n      .banner {\n        .gravatar {\n          .socials {\n            .normal {\n              margin: 0;\n            }\n            .mini {\n              display: none;\n            }\n          }\n        }\n      }\n      .profile {\n        .content {\n          padding: $lg-gap;\n          > .item {\n            @include text-overflow();\n\n            > .iconfont {\n              margin-right: $sm-gap;\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <ul class=\"products\">\n    <li class=\"item\" :key=\"index\" v-for=\"(product, index) in products\">\n      <div\n        class=\"image\"\n        :style=\"{\n          backgroundImage: `url('${product.src}')`,\n          ...imageStyle\n        }\"\n      ></div>\n      <div class=\"content\">\n        <ulink class=\"title\" :href=\"product.url\">\n          {{ product.name }}\n        </ulink>\n        <p class=\"description\" v-html=\"product.description\" />\n      </div>\n      <div class=\"detail\">\n        <p class=\"text\">\n          {{ product.detail || '暂无描述' }}\n        </p>\n        <a class=\"link\" target=\"_blank\" :href=\"product.url\">\n          去看看\n          <i class=\"iconfont icon-new-window\"></i>\n        </a>\n      </div>\n    </li>\n  </ul>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, PropType, CSSProperties } from 'vue'\n  export interface ProductItem {\n    name: string\n    description: string\n    detail: string\n    src: string\n    url: string\n  }\n  export default defineComponent({\n    name: 'MerchProducts',\n    props: {\n      imageStyle: Object as PropType<CSSProperties>,\n      products: {\n        type: Array as PropType<Array<ProductItem>>,\n        require: true\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n  .products {\n    margin: 0;\n    padding: 0;\n    display: grid;\n    grid-template-columns: repeat(4, 1fr);\n    grid-gap: $gap * 2;\n\n    .item {\n      display: block;\n      height: auto;\n      position: relative;\n      @include radius-box($sm-radius);\n      @include common-bg-module();\n      &:hover {\n        .detail {\n          @include visible();\n        }\n      }\n\n      .image {\n        width: 100%;\n        height: 245px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        overflow: hidden;\n        background-color: $white;\n        background-size: cover;\n        background-position: center;\n\n        .qrcode {\n          height: 50%;\n          background-color: $white;\n          @include radius-box($sm-radius);\n        }\n      }\n\n      .content {\n        padding: $lg-gap;\n\n        .title {\n          margin: 0;\n          font-weight: bold;\n          font-size: $font-size-h4;\n          text-transform: capitalize;\n          border-bottom: 1px solid transparent;\n          &:hover {\n            text-decoration: none;\n            border-color: initial;\n          }\n\n          .location {\n            font-weight: normal;\n          }\n        }\n\n        .description {\n          margin-top: $gap;\n          margin-bottom: 0;\n          line-height: 2;\n        }\n      }\n\n      .detail {\n        display: block;\n        width: 100%;\n        padding: $gap;\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        background-color: $module-bg;\n        backdrop-filter: blur(5px);\n        @include hidden();\n        @include visibility-transition();\n\n        .text {\n          line-height: $line-height-base * 1.4;\n        }\n\n        .link {\n          $height: 2.4em;\n          display: block;\n          width: 100%;\n          margin-top: $lg-gap;\n          line-height: $height;\n          border: 1px solid;\n          border-color: $primary;\n          color: $primary;\n          font-size: $font-size-small;\n          text-align: center;\n          letter-spacing: 1px;\n          transition: color $transition-time-fast, background-color $transition-time-fast;\n          @include radius-box($xs-radius);\n\n          &:hover {\n            color: $text-reversal;\n            background-color: $primary;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"merch-page\" :class=\"{ mobile: isMobile }\">\n    <page-banner :position=\"70\" image=\"/images/page-merch/banner.jpg\">\n      <template #title>\n        <i18n zh=\"亲身体验，真实不虚\" en=\"Merch bar\" />\n      </template>\n      <template #description>\n        <i18n zh=\"手动维护，未用不推\" en=\"Maybe you will like it\" />\n      </template>\n    </page-banner>\n    <div class=\"container\">\n      <div class=\"module-title\" id=\"products\">我在用的推荐好物</div>\n      <product-list :products=\"products\" />\n      <div class=\"module-title\" id=\"brokers\">我筛选后在用的港美股券商</div>\n      <product-list :products=\"brokers\" :image-style=\"{ backgroundSize: '50%' }\" />\n      <div class=\"end\"></div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { Language } from '/@/language/data'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { META } from '/@/config/app.config'\n  import PageBanner from '/@/components/common/banner.vue'\n  import ProductList from './list.vue'\n\n  export default defineComponent({\n    name: 'MerchPage',\n    components: {\n      PageBanner,\n      ProductList\n    },\n    setup() {\n      const { i18n, meta, isMobile, isZhLang, adConfig } = useEnhancer()\n      const products = computed(() => adConfig.value.PC_MERCH_PRODUCTS)\n      const brokers = computed(() => adConfig.value.PC_MERCH_BROKERS)\n\n      meta(() => {\n        const enTitle = firstUpperCase(i18n.t(LANGUAGE_KEYS.PAGE_MERCH, Language.En)!)\n        const titles = isZhLang.value ? [i18n.t(LANGUAGE_KEYS.PAGE_MERCH), enTitle] : [enTitle]\n        return { pageTitle: titles.join(' | '), description: `${META.author} 的周边好物` }\n      })\n\n      return {\n        products,\n        brokers,\n        isMobile\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .merch-page {\n    .module-title {\n      margin: ($gap * 2) 0;\n      line-height: 3.6em;\n      background-color: $module-bg;\n      border-width: 2px double $primary;\n      border-radius: $lg-radius;\n      text-transform: uppercase;\n      text-align: center;\n      color: $primary;\n      letter-spacing: 5px;\n      font-size: $font-size-h3;\n      font-weight: bold;\n    }\n\n    .end {\n      height: $gap * 2;\n    }\n  }\n</style>\n","<template>\n  <div class=\"freelancer-page\" :class=\"{ mobile: isMobile }\">\n    <page-banner class=\"banner-content\" :position=\"66\" image=\"/images/page-feeelancer/banner.jpg\">\n      <template #title>\n        <div class=\"title\">\n          <i18n :lkey=\"LANGUAGE_KEYS.PAGE_FREELANCER_SLOGAN\" />\n        </div>\n      </template>\n      <template #description>\n        <div class=\"desc\">\n          <button class=\"submit-email\" title=\"email me\" @click=\"handleSubmitEmail\">\n            <i18n :lkey=\"LANGUAGE_KEYS.PAGE_FREELANCER_EMAIL_ME\" />\n          </button>\n          <desktop-only>\n            <ulink class=\"upwork\" :href=\"VALUABLE_LINKS.UPWORK\">\n              <i18n :lkey=\"LANGUAGE_KEYS.PAGE_FREELANCER_HIRE_ME\" />\n              <i class=\"iconfont icon-upwork\"></i>\n            </ulink>\n          </desktop-only>\n        </div>\n      </template>\n    </page-banner>\n    <div class=\"module\">\n      <div class=\"container\">\n        <ul class=\"module-list\">\n          <li class=\"item\" :key=\"index\" v-for=\"(service, index) in services\">\n            <p class=\"icon\" :class=\"service.id\">\n              <i class=\"iconfont\" :class=\"service.iconfont\"></i>\n            </p>\n            <h3 class=\"name\">\n              <span v-if=\"typeof service.name === 'string'\">{{ service.name }}</span>\n              <i18n v-else :en=\"service.name.en\" :zh=\"service.name.zh\" />\n            </h3>\n            <p class=\"desc\" :key=\"i\" v-for=\"(desc, i) in service.descriptions\">\n              <i18n :en=\"desc.en\" :zh=\"desc.zh\" />\n            </p>\n          </li>\n        </ul>\n      </div>\n    </div>\n    <desktop-only>\n      <client-only transition>\n        <div class=\"mammon container\">\n          <u-adsense ins-style=\"display:inline-block;width:1050px;height:192px\" />\n        </div>\n      </client-only>\n    </desktop-only>\n    <div class=\"step\">\n      <div class=\"step-content container\">\n        <ul class=\"step-list\">\n          <li class=\"item\" :key=\"index\" v-for=\"(step, index) in steps\">\n            <h3 class=\"name\">\n              <i18n :zh=\"step.name.zh\" :en=\"step.name.en\" />\n            </h3>\n            <p class=\"desc\" :key=\"i\" v-for=\"(desc, i) in step.descriptions\">\n              <i18n :en=\"desc.en\" :zh=\"desc.zh\" />\n            </p>\n          </li>\n        </ul>\n      </div>\n    </div>\n    <div class=\"rule\">\n      <div class=\"rule-content container\">\n        <i18n\n          zh=\"如果你认为自己的能力足以支撑一位出色、省心、优秀、帅气、完美的的全栈工程师的生产力，请 EMail 我；非常优秀，没有之一\"\n          en=\"Any application that can be written in JavaScript, will eventually be written in JavaScript.\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { GAEventActions, GAEventTags } from '/@/constants/gtag'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { Language } from '/@/language/data'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { META, VALUABLE_LINKS } from '/@/config/app.config'\n  import UAdsense from '/@/components/common/uadsense.vue'\n  import PageBanner from '/@/components/common/banner.vue'\n\n  export default defineComponent({\n    name: 'FreelancerPage',\n    components: {\n      UAdsense,\n      PageBanner\n    },\n    setup() {\n      const { i18n, meta, gtag, isMobile, isZhLang } = useEnhancer()\n\n      meta(() => {\n        const enTitle = firstUpperCase(i18n.t(LANGUAGE_KEYS.PAGE_FREELANCER, Language.En)!)\n        const titles = isZhLang.value ? [i18n.t(LANGUAGE_KEYS.PAGE_FREELANCER), enTitle] : [enTitle]\n        return { pageTitle: titles.join(' | ') }\n      })\n\n      const handleSubmitEmail = () => {\n        const subject = isZhLang.value\n          ? `嗨！Surmon，久仰大名！`\n          : `Technical consultant / ${META.title}`\n        const body = isZhLang.value\n          ? `我有一个需求：%0D%0A %0D%0A - 需求简述： %0D%0A %0D%0A - 需求文档：%0D%0A %0D%0A - 预算金额：%0D%0A %0D%0A - 预算周期：`\n          : 'Hi Surmon, My name is '\n        const mailAddress =\n          `mailto:${META.email}` + (isMobile.value ? '' : `?subject=${subject}&body=${body}`)\n\n        window.open(mailAddress)\n        gtag?.event('咨询邮件', {\n          event_category: GAEventActions.Click,\n          event_label: GAEventTags.FreelancerPage\n        })\n      }\n\n      const services = [\n        {\n          id: 'web',\n          iconfont: 'icon-html5',\n          name: {\n            zh: 'Web 客户端',\n            en: 'Web Client'\n          },\n          descriptions: [\n            { zh: 'Vue 应用开发', en: 'Vue application' },\n            { en: 'React application', zh: 'React 应用开发' },\n            { en: 'Angular application', zh: 'Angular 应用开发' }\n          ]\n        },\n        {\n          id: 'nodejs',\n          iconfont: 'icon-nodejs',\n          name: 'Node.js',\n          descriptions: [\n            { en: 'Node.js application', zh: 'Node.js 整站建设' },\n            { en: 'Node.js online bussniess', zh: 'Node.js Web 服务开发' },\n            { en: 'Node.js CLI application', zh: 'Node.js 命令行工具开发' }\n          ]\n        },\n        {\n          id: 'app',\n          iconfont: 'icon-app',\n          name: {\n            zh: '混合应用',\n            en: 'Hybrid App'\n          },\n          descriptions: [\n            { en: 'Flutter application', zh: 'Flutter 应用开发' },\n            { en: 'React Native application', zh: 'React Native 应用开发' },\n            { en: 'Electron application', zh: 'Electron 应用开发' }\n          ]\n        },\n        {\n          id: 'wechat',\n          iconfont: 'icon-wechat',\n          name: {\n            zh: '微信周边',\n            en: 'WeChat'\n          },\n          descriptions: [\n            { en: 'HTML5 web page', zh: 'H5 开发' },\n            { en: 'WeChat official account', zh: '公众号开发' },\n            { en: 'WeChat mini program', zh: '小程序开发' }\n          ]\n        },\n        {\n          id: 'consult',\n          iconfont: 'icon-tool',\n          name: {\n            zh: '技术咨询',\n            en: 'Consultant'\n          },\n          descriptions: [\n            { en: 'Everything about web', zh: '语言、框架疑难杂症' },\n            { en: 'Business and technical', zh: '业务与技术方案设计' },\n            { en: 'Technical consultant', zh: '长期技术顾问指导' }\n          ]\n        }\n      ]\n\n      const steps = [\n        {\n          name: {\n            zh: '1. 提交需求',\n            en: '1. Consult'\n          },\n          descriptions: [\n            { en: 'Product requirements document', zh: '提供构思成熟的需求文档' },\n            { en: 'Prototype design document', zh: '清晰可用的设计图或原型' }\n          ]\n        },\n        {\n          name: {\n            zh: '2. 确认需求',\n            en: '2. Confirm'\n          },\n          descriptions: [\n            { en: 'Price and schedule', zh: '确认报价及开发周期' },\n            { en: 'Development cycle', zh: '协商开发周期和要点' }\n          ]\n        },\n        {\n          name: {\n            zh: '3. 预付开发',\n            en: '3. Develop'\n          },\n          descriptions: [\n            { en: 'Payment the trust and deposit', zh: '预付部分或全部' },\n            { en: 'Develop project', zh: '进入开发流程' }\n          ]\n        },\n        {\n          name: {\n            zh: '4. 预收修正',\n            en: '4. Review'\n          },\n          descriptions: [\n            { en: 'Review and experience', zh: '提供预览演示' },\n            { en: 'Fixbug and optimize', zh: '细节修正调优' }\n          ]\n        },\n        {\n          name: {\n            zh: '5. 交付维护',\n            en: '5. Delivery'\n          },\n          descriptions: [\n            { en: 'Pay balance', zh: '付清尾款，交付项目' },\n            { en: 'Maintenance cycle', zh: '一定周期内持续维护' }\n          ]\n        }\n      ]\n\n      return {\n        VALUABLE_LINKS,\n        LANGUAGE_KEYS,\n        services,\n        steps,\n        isMobile,\n        handleSubmitEmail\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .freelancer-page {\n    width: 100%;\n\n    .banner-content {\n      text-align: center;\n\n      .title {\n        font-family: 'webfont-normal', DINRegular;\n      }\n\n      .desc {\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n\n        .submit-email {\n          display: block;\n          margin-bottom: 2rem;\n          width: 10rem;\n          border: 1px solid;\n          border-color: $white;\n          line-height: 3.8rem;\n          text-align: center;\n          letter-spacing: 1px;\n          font-weight: bold;\n          text-transform: uppercase;\n          color: $white;\n          transition: color $transition-time-fast, border-color $transition-time-fast;\n          @include radius-box($xs-radius);\n\n          &:hover {\n            color: $primary;\n            border-color: $primary;\n          }\n        }\n\n        .upwork {\n          color: $white;\n          border-bottom: 1px solid;\n          border-color: transparent;\n          font-size: $font-size-h5;\n          transition: color $transition-time-fast, border-color $transition-time-fast;\n\n          .iconfont {\n            margin-left: $xs-gap;\n          }\n\n          &:hover {\n            color: $primary;\n            border-color: $primary;\n          }\n        }\n      }\n    }\n\n    .module {\n      margin: ($gap * 2) auto;\n\n      .module-list {\n        margin: 0;\n        padding: 0;\n        list-style-type: none;\n        display: flex;\n        justify-content: space-between;\n\n        > .item {\n          flex: 1;\n          width: auto;\n          height: auto;\n          padding-top: $lg-gap;\n          padding-bottom: $gap;\n          overflow: hidden;\n          text-align: center;\n          margin-right: $gap * 2;\n          @include radius-box($sm-radius);\n          @include common-bg-module($transition-time-fast);\n          &:last-child {\n            margin-right: 0;\n          }\n\n          &:hover {\n            background-color: $module-bg-opaque;\n\n            .desc {\n              color: $text;\n            }\n          }\n\n          > .icon {\n            @include color-transition($transition-time-fast);\n            &.web {\n              color: $html5-primary;\n            }\n            &.nodejs {\n              color: $nodejs-primary;\n            }\n            &.app {\n              color: $primary;\n            }\n            &.wechat {\n              color: $wechat-primary;\n            }\n            &.consult {\n              color: $stackoverflow-primary;\n            }\n\n            .iconfont {\n              font-size: $font-size-h3 * 3;\n            }\n          }\n\n          > .desc {\n            @include color-transition($transition-time-fast);\n            color: $text-disabled;\n            margin-bottom: 1.2em;\n          }\n        }\n      }\n    }\n\n    .mammon {\n      height: 192px;\n      margin-bottom: $gap * 2;\n      @include common-bg-module();\n    }\n\n    .step {\n      @include common-bg-module();\n\n      > .step-content {\n        > .step-list {\n          height: 16rem;\n          margin: 0;\n          padding: 0;\n          list-style-type: none;\n          display: flex;\n          justify-content: space-between;\n\n          > .item {\n            width: 20%;\n            height: auto;\n            padding-top: $gap;\n            text-align: center;\n\n            > .desc {\n              color: $text-disabled;\n            }\n          }\n        }\n      }\n    }\n\n    .rule {\n      height: 5rem;\n      line-height: 5rem;\n      background-color: $primary;\n\n      .rule-content {\n        color: $text-reversal;\n        margin: 0 auto;\n        text-align: center;\n      }\n    }\n\n    &.mobile {\n      .container {\n        width: 100%;\n      }\n      .banner {\n        height: 14rem;\n        @include radius-box($sm-radius);\n\n        .banner-content {\n          .title {\n            margin-top: 3rem;\n            margin-bottom: 2rem;\n            font-size: $font-size-h1;\n          }\n\n          .email-me {\n            width: 8rem;\n            line-height: 3rem;\n          }\n        }\n      }\n\n      .module {\n        margin: 0 auto;\n        margin-top: 1rem;\n\n        .module-list {\n          flex-direction: column;\n\n          > .item {\n            width: 100%;\n            height: auto;\n            margin-right: 0;\n            margin-bottom: 1rem;\n\n            > .icon {\n              margin-bottom: -0.5em;\n            }\n          }\n        }\n      }\n\n      .step {\n        padding: 0;\n        background-color: transparent;\n\n        .step-content {\n          width: 100%;\n\n          .step-list {\n            padding: 0;\n            flex-direction: column;\n\n            .item {\n              width: 100%;\n              height: auto;\n              margin-bottom: 1rem;\n              padding-bottom: 0;\n              background-color: $module-bg;\n            }\n          }\n        }\n      }\n\n      .rule {\n        height: auto;\n        line-height: 3rem;\n        @include radius-box($sm-radius);\n\n        .rule-content {\n          width: 100%;\n          padding: 1rem;\n          text-align: left;\n          text-indent: 2em;\n\n          > .text {\n            margin: 0;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div\n    class=\"guestbook-page\"\n    :class=\"{\n      mobile: isMobile,\n      dark: isDarkTheme\n    }\"\n  >\n    <div class=\"banner\">\n      <uimage cdn class=\"image\" src=\"/images/page-guestbook/banner.jpg\" />\n      <span class=\"slogan\">\n        <span class=\"text\">\n          <i18n :lkey=\"LANGUAGE_KEYS.GUESTBOOK_SLOGAN\" />\n        </span>\n      </span>\n    </div>\n    <div class=\"comment\">\n      <comment :post-id=\"0\" :likes=\"siteLikes\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { isClient } from '/@/app/environment'\n  import { useUniversalFetch } from '/@/universal'\n  import { useMetaStore } from '/@/store/meta'\n  import { useCommentStore } from '/@/store/comment'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { Language } from '/@/language/data'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import Comment from '/@/components/comment/index.vue'\n  import { META } from '/@/config/app.config'\n\n  export default defineComponent({\n    name: 'GuestbookPage',\n    components: {\n      Comment\n    },\n    setup() {\n      const { i18n, meta, isMobile, isDarkTheme, isZhLang } = useEnhancer()\n      const metaStore = useMetaStore()\n      const commentStore = useCommentStore()\n      const siteLikes = computed(() => metaStore.appOptions.data?.meta.likes || 0)\n\n      meta(() => {\n        const enTitle = firstUpperCase(i18n.t(LANGUAGE_KEYS.PAGE_GUESTBOOK, Language.En)!)\n        const titles = isZhLang.value ? [i18n.t(LANGUAGE_KEYS.PAGE_GUESTBOOK), enTitle] : [enTitle]\n        return { pageTitle: titles.join(' | '), description: `给 ${META.author} 留言` }\n      })\n\n      const fetchAllData = () => {\n        return Promise.all([\n          metaStore.fetchAppOptions(true),\n          commentStore.fetchList({\n            post_id: 0,\n            delay: isClient ? 368 : 0\n          })\n        ])\n      }\n\n      useUniversalFetch(() => fetchAllData())\n\n      return {\n        LANGUAGE_KEYS,\n        isMobile,\n        isDarkTheme,\n        siteLikes\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .guestbook-page {\n    .banner {\n      position: relative;\n      overflow: hidden;\n      margin-bottom: $lg-gap;\n      width: 100%;\n      height: 19rem;\n      border: 0;\n      background-color: $module-bg;\n      @include radius-box($lg-radius);\n\n      .image {\n        margin-top: -($gap * 6);\n        transition: all $transition-time-slow;\n\n        &:hover {\n          transform: rotate(2deg) scale(1.1);\n        }\n      }\n\n      .slogan {\n        $size: 2em;\n        display: block;\n        position: absolute;\n        right: $lg-gap * 2;\n        bottom: $lg-gap * 2;\n        height: $size;\n        line-height: $size;\n        padding: 0 $sm-gap;\n        padding-left: 3rem;\n        opacity: 0.8;\n        font-weight: 700;\n        color: $body-bg;\n        cursor: progress;\n        background: linear-gradient(to left, $module-bg-lighter, $module-bg, transparent);\n\n        .text {\n          letter-spacing: 0.3px;\n          font-weight: bold;\n          color: $text;\n          background-clip: text;\n          background-image: cdn-url('/images/page-guestbook/banner.jpg');\n          background-position: 100% 80%;\n          -webkit-background-clip: text;\n          -webkit-text-fill-color: transparent;\n        }\n      }\n    }\n\n    &.dark {\n      .banner {\n        .slogan {\n          .text {\n            -webkit-text-fill-color: $text !important;\n          }\n        }\n      }\n    }\n\n    &.mobile {\n      .banner {\n        height: 12rem;\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"app-page\" :class=\"{ mobile: isMobile }\">\n    <div class=\"app\">\n      <div class=\"logo\">\n        <uimage cdn alt=\"app-logo\" src=\"/images/page-app/logo.png\" />\n      </div>\n      <h2 class=\"title\">{{ META.title }}</h2>\n      <p class=\"desc\">\n        <i18n :lkey=\"LANGUAGE_KEYS.APP_SLOGAN\" />\n      </p>\n      <p class=\"version\">v1.1.4 (2020-03-06)</p>\n      <div class=\"screen\">\n        <uimage cdn alt=\"app-hot\" class=\"screen-img\" src=\"/images/page-app/hot.png\" />\n        <div class=\"download\">\n          <uimage cdn class=\"qrcode\" alt=\"qrcode\" src=\"/images/page-app/qrcode.png\" />\n          <ulink\n            class=\"button\"\n            :href=\"VALUABLE_LINKS.APP_APK_FILE\"\n            @click=\"handleAndroidApp($event)\"\n          >\n            <i class=\"iconfont icon-android\"></i>\n            <span class=\"text\">\n              <i18n :lkey=\"LANGUAGE_KEYS.DEVICE_ANDROID\" />\n            </span>\n          </ulink>\n          <ulink\n            class=\"button\"\n            :href=\"VALUABLE_LINKS.SURMON_ME_NATIVE + '#ios'\"\n            @mousedown=\"handleAppAction('APP IOS')\"\n          >\n            <i class=\"iconfont icon-apple\"></i>\n            <span class=\"text\">\n              <i18n :lkey=\"LANGUAGE_KEYS.DEVICE_IOS\" />\n            </span>\n          </ulink>\n          <ulink\n            class=\"button code\"\n            :href=\"VALUABLE_LINKS.SURMON_ME_NATIVE\"\n            @mousedown=\"handleAppAction('APP GitHub 地址')\"\n          >\n            <i class=\"iconfont icon-git\"></i>\n            <span class=\"text\">Source Code</span>\n          </ulink>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { Language } from '/@/language/data'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { GAEventActions, GAEventTags } from '/@/constants/gtag'\n  import { META, VALUABLE_LINKS } from '/@/config/app.config'\n\n  export default defineComponent({\n    name: 'Application',\n    setup() {\n      const { i18n, meta, gtag, isMobile, isZhLang } = useEnhancer()\n      meta(() => {\n        const enTitle = firstUpperCase(i18n.t(LANGUAGE_KEYS.PAGE_APP, Language.En)!)\n        const titles = isZhLang.value ? [i18n.t(LANGUAGE_KEYS.PAGE_APP), enTitle] : [enTitle]\n        return { pageTitle: titles.join(' | '), description: `${META.title} App 下载` }\n      })\n\n      const handleAppAction = (name: string) => {\n        gtag?.event(name, {\n          event_category: GAEventActions.Click,\n          event_label: GAEventTags.AppPage\n        })\n      }\n\n      const handleAndroidApp = (event) => {\n        handleAppAction('APP Android 下载')\n        if (\n          !window.confirm(\n            isZhLang.value\n              ? 'Android apk 文件托管在 GitHub，希望你可以顺利访问~'\n              : 'Will open raw.githubusercontent.com to download android app...'\n          )\n        ) {\n          event.preventDefault()\n        }\n      }\n\n      return {\n        META,\n        VALUABLE_LINKS,\n        LANGUAGE_KEYS,\n        isMobile,\n        handleAppAction,\n        handleAndroidApp\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .app-page {\n    display: flex;\n    justify-content: center;\n    flex-direction: column;\n    align-items: center;\n    min-height: 68rem;\n    height: $full-page-active-content-height;\n\n    > .app {\n      text-align: center;\n\n      > .logo {\n        margin-bottom: $lg-gap * 2;\n\n        > img {\n          width: 6rem;\n          border-radius: 1em;\n        }\n      }\n\n      > .title {\n        color: $primary;\n        font-weight: bold;\n        text-transform: uppercase;\n      }\n\n      > .version {\n        color: $text-dividers;\n      }\n\n      > .screen {\n        margin-top: 5rem;\n        width: 36rem;\n        position: relative;\n\n        &:hover {\n          > .screen-img {\n            opacity: 0.4;\n          }\n\n          > .download {\n            @include visible();\n          }\n        }\n\n        > .screen-img {\n          width: 100%;\n          @include visibility-transition($transition-time-normal);\n        }\n\n        > .download {\n          position: absolute;\n          width: 100%;\n          height: 100%;\n          top: 0;\n          left: 0;\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          align-items: center;\n          @include hidden();\n          @include visibility-transition($transition-time-normal);\n\n          > .qrcode {\n            width: 12rem;\n            height: auto;\n          }\n\n          > .button {\n            width: 12rem;\n            line-height: $line-height-base * 1.6;\n            color: $primary;\n            margin-top: 2rem;\n            border: 1px solid $primary;\n            border-radius: $xs-radius;\n            text-align: center;\n            text-transform: uppercase;\n            background: $module-bg;\n            transition: color $transition-time-fast, background $transition-time-fast;\n\n            &.code {\n              border-color: $text;\n              color: $text;\n\n              &:hover {\n                background: $primary;\n                border-color: $primary;\n                color: $text-reversal;\n              }\n            }\n\n            .text {\n              margin-left: $xs-gap;\n            }\n\n            &:hover {\n              color: $text-reversal;\n              border-color: $primary-translucent;\n              background: linear-gradient(\n                to bottom right,\n                rgba($red, 0.7),\n                $text-reversal,\n                $primary,\n                $text-reversal,\n                rgba($accent, 0.7)\n              );\n            }\n          }\n        }\n      }\n    }\n\n    &.mobile {\n      min-height: 53rem;\n      height: calc(100vh - #{$mobile-header-height + $lg-gap + $mobile-footer-height + $gap});\n\n      > .app {\n        padding-top: $lg-gap;\n\n        > .screen {\n          width: 100%;\n          margin-top: 3rem;\n          margin-bottom: 1rem;\n          text-align: center;\n\n          > .screen-img {\n            opacity: 0.4;\n            width: 90%;\n          }\n\n          > .download {\n            @include visible();\n          }\n        }\n      }\n    }\n  }\n</style>\n","/**\n * @file App router\n * @module app.router\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport {\n  RouteRecordRaw,\n  NavigationGuard,\n  NavigationGuardNext,\n  RouterHistory,\n  createRouter\n} from 'vue-router'\nimport { NOT_FOUND, INVALID_ERROR } from '/@/constants/error'\nimport { LANGUAGE_KEYS } from '/@/language/key'\nimport { LayoutColumn } from '/@/services/layout'\nimport { isClient } from '/@/app/environment'\nimport { isValidDateParam } from '/@/transforms/validate'\nimport { scrollToTop } from '/@/utils/effects'\nimport IndexPage from '/@/pages/index.vue'\nimport ArchivePage from '/@/pages/archive.vue'\nimport ArticlePage from '/@/pages/article/index.vue'\nimport CategoryPage from '/@/pages/category.vue'\nimport TagPage from '/@/pages/tag.vue'\nimport DatePage from '/@/pages/date.vue'\nimport SearchPage from '/@/pages/search.vue'\nimport MusicPage from '/@/pages/music.vue'\nimport LensPage from '/@/pages/lens.vue'\nimport JobPage from '/@/pages/job.vue'\nimport AboutPage from '/@/pages/about.vue'\nimport MerchPage from '/@/pages/merch/index.vue'\nimport FreelancerPage from '/@/pages/freelancer.vue'\nimport GuestbookPage from '/@/pages/guestbook.vue'\nimport AppPage from '/@/pages/app.vue'\n\nimport 'vue-router'\n\ndeclare module 'vue-router' {\n  interface RouteMeta {\n    /** second */\n    ssrCacheAge?: number\n    layout?: LayoutColumn\n    validate?: (params: any) => Promise<any>\n  }\n}\n\nexport enum CategorySlug {\n  Code = 'code',\n  Insight = 'insight'\n}\n\nexport enum RouteName {\n  Home = 'home',\n  Article = 'article-detail',\n  TagArchive = 'tag-archive',\n  CategoryArchive = 'category-archive',\n  DateArchive = 'date-archive',\n  SearchArchive = 'search-archive',\n  Guestbook = 'guestbook',\n  Freelancer = 'freelancer',\n  App = 'app',\n  Music = 'music',\n  Job = 'job',\n  About = 'about',\n  Merch = 'merch',\n  Lens = 'lens',\n  Archive = 'archive',\n  Error = 'error'\n}\n\nexport const routes: RouteRecordRaw[] = [\n  {\n    path: '/',\n    name: RouteName.Home,\n    component: IndexPage\n  },\n  {\n    path: '/archive',\n    name: RouteName.Archive,\n    component: ArchivePage,\n    meta: {\n      ssrCacheAge: 60 * 60 * 6,\n      layout: LayoutColumn.Full\n    }\n  },\n  {\n    path: '/article/:article_id',\n    name: RouteName.Article,\n    component: ArticlePage,\n    props: (to) => ({ articleId: Number(to.params.article_id) }),\n    meta: {\n      async validate({ route, i18n }) {\n        if (!Number.isInteger(Number(route.params.article_id))) {\n          return Promise.reject({\n            code: INVALID_ERROR,\n            message: i18n.t(LANGUAGE_KEYS.QUERY_PARAMS_ERROR) + 'Article ID → <number>'\n          })\n        }\n      }\n    }\n  },\n  {\n    path: '/category/:category_slug',\n    name: RouteName.CategoryArchive,\n    component: CategoryPage,\n    props: (to) => ({ categorySlug: to.params.category_slug }),\n    meta: {\n      async validate({ route, i18n, store }) {\n        const { category_slug } = route.params\n        if (!category_slug) {\n          return Promise.reject({\n            code: INVALID_ERROR,\n            message: i18n.t(LANGUAGE_KEYS.QUERY_PARAMS_ERROR) + 'Category slug → <string>'\n          })\n        }\n        if (isClient) {\n          const targetCategory = store.state.value?.category.categories.find(\n            (category) => category.slug === category_slug\n          )\n          if (!targetCategory) {\n            return Promise.reject({\n              code: NOT_FOUND,\n              message:\n                i18n.t(LANGUAGE_KEYS.QUERY_PARAMS_ERROR) + `Category ${category_slug} not found`\n            })\n          }\n        }\n      }\n    }\n  },\n  {\n    path: '/tag/:tag_slug',\n    name: RouteName.TagArchive,\n    component: TagPage,\n    props: (to) => ({ tagSlug: to.params.tag_slug }),\n    meta: {\n      async validate({ route, i18n, store }) {\n        const { tag_slug } = route.params\n        if (!tag_slug) {\n          return Promise.reject({\n            code: INVALID_ERROR,\n            message: i18n.t(LANGUAGE_KEYS.QUERY_PARAMS_ERROR) + 'Tag slug → <string>'\n          })\n        }\n        if (isClient) {\n          const tagretTag = store.state.value?.tag.tags.find((tag) => tag.slug === tag_slug)\n          if (!tagretTag) {\n            return Promise.reject({\n              code: NOT_FOUND,\n              message: i18n.t(LANGUAGE_KEYS.QUERY_PARAMS_ERROR) + `Tag ${tag_slug} not found`\n            })\n          }\n        }\n      }\n    }\n  },\n  {\n    path: '/date/:date',\n    name: RouteName.DateArchive,\n    component: DatePage,\n    props: (to) => ({ date: to.params.date }),\n    meta: {\n      ssrCacheAge: 60 * 60 * 24,\n      async validate({ route, i18n }) {\n        const { date } = route.params\n        if (!date || !isValidDateParam(date)) {\n          return Promise.reject({\n            code: INVALID_ERROR,\n            message: i18n.t(LANGUAGE_KEYS.QUERY_PARAMS_ERROR) + `Invalid date ${date || ''}`\n          })\n        }\n      }\n    }\n  },\n  {\n    path: '/search/:keyword',\n    name: RouteName.SearchArchive,\n    component: SearchPage,\n    props: (to) => ({ keyword: to.params.keyword }),\n    meta: {\n      async validate({ route, i18n }) {\n        if (!route.params.keyword) {\n          return Promise.reject({\n            code: INVALID_ERROR,\n            message: i18n.t(LANGUAGE_KEYS.QUERY_PARAMS_ERROR) + 'Keywords ?'\n          })\n        }\n      }\n    }\n  },\n  {\n    path: '/music',\n    name: RouteName.Music,\n    component: MusicPage,\n    meta: {\n      ssrCacheAge: Infinity,\n      layout: LayoutColumn.Full\n    }\n  },\n  {\n    path: '/lens',\n    name: RouteName.Lens,\n    component: LensPage,\n    meta: {\n      ssrCacheAge: 60 * 60 * 24,\n      layout: LayoutColumn.Full\n    }\n  },\n  {\n    path: '/job',\n    name: RouteName.Job,\n    component: JobPage,\n    meta: {\n      ssrCacheAge: Infinity,\n      layout: LayoutColumn.Full\n    }\n  },\n  {\n    path: '/about',\n    name: RouteName.About,\n    component: AboutPage,\n    meta: {\n      ssrCacheAge: Infinity,\n      layout: LayoutColumn.Full\n    }\n  },\n  {\n    path: '/merch',\n    name: RouteName.Merch,\n    component: MerchPage,\n    meta: {\n      ssrCacheAge: 60 * 30,\n      layout: LayoutColumn.Full\n    }\n  },\n  {\n    path: '/freelancer',\n    name: RouteName.Freelancer,\n    component: FreelancerPage,\n    meta: {\n      ssrCacheAge: Infinity,\n      layout: LayoutColumn.Full\n    }\n  },\n  {\n    path: '/guestbook',\n    name: RouteName.Guestbook,\n    component: GuestbookPage,\n    meta: {\n      ssrCacheAge: 60 * 2\n    }\n  },\n  {\n    path: '/app',\n    name: RouteName.App,\n    component: AppPage,\n    meta: {\n      ssrCacheAge: Infinity,\n      layout: LayoutColumn.Full\n    }\n  },\n  {\n    name: RouteName.Error,\n    path: '/:error(.*)',\n    component: {},\n    meta: {\n      async validate({ i18n }) {\n        return Promise.reject({\n          code: NOT_FOUND,\n          message: i18n.t(LANGUAGE_KEYS.NOT_FOUND)\n        })\n      }\n    }\n  }\n]\n\nexport interface RouterCreatorOptions {\n  history: RouterHistory\n  beforeMiddleware?: NavigationGuard | NavigationGuard[]\n  afterMiddleware?: NavigationGuardNext | NavigationGuardNext[]\n}\nexport const createUniversalRouter = (options: RouterCreatorOptions) => {\n  const router = createRouter({\n    routes,\n    strict: true,\n    history: options.history,\n    linkActiveClass: 'link-active',\n    scrollBehavior(_, __, savedPosition) {\n      return savedPosition || scrollToTop()\n    }\n  })\n\n  if (options.beforeMiddleware) {\n    Array.isArray(options.beforeMiddleware)\n      ? options.beforeMiddleware.forEach(router.beforeResolve)\n      : router.beforeResolve(options.beforeMiddleware)\n  }\n  if (options.afterMiddleware) {\n    Array.isArray(options.afterMiddleware)\n      ? options.afterMiddleware.forEach(router.afterEach)\n      : router.afterEach(options.afterMiddleware)\n  }\n\n  return router\n}\n","/**\n * @file Route transformer\n * @module transformer.route\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { RouteName, CategorySlug } from '/@/app/router'\n\ntype RouteRecordName = string | symbol | null | undefined\n\nexport const getTagArchiveRoute = (tagSlug: string) => {\n  return `/tag/${tagSlug}`\n}\n\nexport const getCategoryArchiveRoute = (categorySlug: string | CategorySlug) => {\n  return `/category/${categorySlug}`\n}\n\nexport const getDateArchiveRoute = (date: string) => {\n  return `/date/${date}`\n}\n\nexport const getArticleDetailRoute = (articleID: string | number) => {\n  return `/article/${articleID}`\n}\n\nexport const getPageRoute = (routeName: RouteName) => {\n  return `/${routeName}`\n}\n\nexport const isArticleDetail = (name: RouteRecordName) => name === RouteName.Article\nexport const isSearchArchive = (name: RouteRecordName) => name === RouteName.SearchArchive\nexport const isGuestbook = (name: RouteRecordName) => name === RouteName.Guestbook\nexport const isFreelancer = (name: RouteRecordName) => name === RouteName.Freelancer\nexport const isMusic = (name: RouteRecordName) => name === RouteName.Music\nexport const isApp = (name: RouteRecordName) => name === RouteName.App\n","/**\n * @file Url transformer\n * @module transformer.url\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport API_CONFIG from '/@/config/api.config'\nimport { getArticleDetailRoute } from '/@/transforms/route'\n\nexport const getFileCDNUrl = (uri: string) => {\n  return `${API_CONFIG.CDN}${uri}`\n}\n\nexport const getFileProxyUrl = (uri: string) => {\n  return `${API_CONFIG.PROXY}${uri}`\n}\n\nexport const getFileStaticUrl = (uri: string) => {\n  return `${API_CONFIG.STATIC}${uri}`\n}\n\nexport const getPageUrl = (uri: string) => {\n  return `${API_CONFIG.FE}${uri}`\n}\n\nexport const getArticleDetailUrl = (articleID: string | number) => {\n  return getPageUrl(getArticleDetailRoute(articleID))\n}\n","/**\n * @file amplitude player\n * @module service.amplitude\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport amplitude from 'amplitudejs'\nimport { onClient } from '/@/universal'\n\ndeclare global {\n  interface Window {\n    Amplitude: any\n    AmplitudeCore: any\n  }\n}\n\nonClient(() => {\n  window.Amplitude = window.Amplitude || amplitude\n})\n\nexport default amplitude\n","/**\n * @file Google Adsense\n * @module service.adsense\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { App, defineComponent, h } from 'vue'\nimport { useEnhancer } from '/@/app/enhancer'\nimport { LANGUAGE_KEYS } from '/@/language/key'\nimport loadScript from '/@/utils/script-loader'\n\ndeclare global {\n  interface Window {\n    adsbygoogle: any[]\n  }\n}\n\nexport interface AdSenseConfig {\n  ID: string\n  enabledAutoAD?: boolean\n}\n\nconst ADS_SCRIPT = '//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js'\n\nconst getComponent = (clientID: string) =>\n  defineComponent({\n    name: 'Adsense',\n    props: {\n      class: String,\n      insClass: {\n        type: String,\n        default: ''\n      },\n      insStyle: {\n        type: String,\n        default: 'display:block;'\n      },\n      dataAdClient: String,\n      dataAdSlot: String,\n      dataAdLayoutKey: String,\n      dataAdTest: String,\n      dataAdFormat: String,\n      dataFullWidthResponsive: [Boolean, String]\n    },\n    setup(props) {\n      const { i18n } = useEnhancer()\n\n      return () => {\n        const {\n          class: rootClass,\n          insClass,\n          insStyle,\n          dataAdClient,\n          dataAdSlot,\n          dataAdLayoutKey,\n          dataAdTest,\n          dataAdFormat,\n          dataFullWidthResponsive,\n          ...restAttrs\n        } = props\n\n        return h(\n          'div',\n          {\n            class: ['mammon-box', rootClass],\n            placeholder: i18n.t(LANGUAGE_KEYS.AD)\n          },\n          [\n            h('script', {\n              type: 'text/javascript',\n              async: 'true',\n              src: ADS_SCRIPT\n            }),\n            h('ins', {\n              class: ['adsbygoogle', insClass],\n              style: insStyle,\n              'data-ad-client': dataAdClient || clientID,\n              'data-ad-slot': dataAdSlot,\n              'data-ad-layout-key': dataAdLayoutKey,\n              'data-ad-test': dataAdTest,\n              'data-ad-format': dataAdFormat,\n              'data-full-width-responsive': dataFullWidthResponsive,\n              ...restAttrs\n            }),\n            h('script', `(adsbygoogle = window.adsbygoogle || []).push({})`)\n          ]\n        )\n      }\n    }\n  })\n\nexport default {\n  install(app: App, adsenseConfig: AdSenseConfig) {\n    const component = getComponent(adsenseConfig.ID)\n    app.component(component.name, component)\n\n    if (adsenseConfig.enabledAutoAD) {\n      loadScript(ADS_SCRIPT, { async: true }).then(() => {\n        const adsbygoogle = window.adsbygoogle || []\n        adsbygoogle.push({\n          google_ad_client: adsenseConfig.ID,\n          enable_page_level_ads: true\n        })\n      })\n    }\n  }\n}\n","<template>\n  <div id=\"popup\" class=\"popup\">\n    <transition name=\"module\">\n      <div class=\"mask\" v-show=\"state.visibility\" @click.self=\"handleMaskClick\">\n        <div ref=\"element\" class=\"warpper\" :class=\"{ border: state.border }\">\n          <img v-if=\"state.isImage\" v-bind=\"image.attrs\" :src=\"image.src || ''\" />\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, watchEffect, ref } from 'vue'\n  import { usePopupWithRoot } from './hook'\n  export default defineComponent({\n    name: 'PopupRoot',\n    setup() {\n      const element = ref<HTMLElement>(null as any)\n      const { state, image, hidden, visible } = usePopupWithRoot(() => element.value)\n      const handleWindowScroll = () => hidden()\n      const handleMaskClick = () => {\n        state.maskClose && hidden()\n      }\n\n      watchEffect(() => {\n        state.scrollClose\n          ? // https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md#solution-the-passive-option\n            window.addEventListener('scroll', handleWindowScroll, { passive: true })\n          : window.removeEventListener('scroll', handleWindowScroll)\n      })\n\n      return {\n        element,\n        state,\n        image,\n        handleMaskClick\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  #popup {\n    .mask {\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100vw;\n      height: 100vh;\n      z-index: $z-index-top;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      overflow: hidden;\n      background-color: rgba($grey, 0.5);\n      @include visibility-transition();\n      @include backdrop-blur();\n\n      .warpper {\n        display: contents;\n        position: relative;\n\n        & > ::v-deep(*) {\n          min-width: 24rem;\n          min-height: 8rem;\n          max-width: 90%;\n          max-height: 90%;\n          background-color: $module-bg;\n        }\n\n        &.border > ::v-deep(*) {\n          border: $sm-gap solid $module-bg-darker-1;\n          @include radius-box($sm-radius);\n        }\n      }\n    }\n  }\n</style>\n","/**\n * @file popup component\n * @module service.popup.component\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { h, defineComponent, watch, Teleport, Fragment, PropType, ExtractPropTypes } from 'vue'\nimport { usePopup } from './hook'\n\nexport const PopupUIProps = {\n  border: {\n    type: Boolean as PropType<boolean>,\n    default: true\n  },\n  maskClose: {\n    type: Boolean as PropType<boolean>,\n    default: true\n  },\n  scrollClose: {\n    type: Boolean as PropType<boolean>,\n    default: true\n  }\n}\n\nexport const getOtherProps = ({\n  border,\n  maskClose,\n  scrollClose,\n  ...others\n}: ExtractPropTypes<typeof PopupUIProps>) => others\n\nenum Event {\n  Close = 'close',\n  UpdateVisible = 'update:visible'\n}\n\n/**\n * @example\n *  <popup :visible=\"false\" :clone=\"true\">\n *    <div class=\"xxx\">I will visible on original & modal</div>\n *  </popup>\n */\nexport default defineComponent({\n  name: 'Popup',\n  props: {\n    // component options\n    visible: {\n      type: Boolean,\n      default: false\n    },\n    clone: {\n      type: Boolean,\n      default: false\n    },\n    // UI options\n    ...PopupUIProps\n  },\n  emits: [Event.Close, Event.UpdateVisible],\n  setup(props, context) {\n    const popup = usePopup()\n\n    watch(\n      () => props.visible,\n      (visible) => {\n        const { clone, visible: v, ...popupOptions } = props\n        visible ? popup.visible(popupOptions) : popup.hidden()\n      }\n    )\n\n    watch(\n      () => popup.state.visibility,\n      (visibility) => {\n        if (!visibility && props.visible) {\n          context.emit(Event.UpdateVisible, false)\n          context.emit(Event.Close)\n        }\n      }\n    )\n\n    return () => {\n      const renderSlotNode = () => context.slots.default?.()\n      const renderTeleportNode = () =>\n        h(\n          // @ts-ignore\n          Teleport,\n          { to: popup.state.$container },\n          renderSlotNode()\n        )\n\n      // modal mode -> visible ? modal-render : null\n      const renderModalNode = () => (props.visible ? renderTeleportNode() : null)\n\n      // clone mode -> render & visible -> modal render\n      if (props.clone) {\n        return h(Fragment, [renderSlotNode(), renderModalNode()])\n      }\n\n      // modal mode\n      return renderModalNode()\n    }\n  }\n})\n","/**\n * @file popup image component\n * @module service.popup.image\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { h, defineComponent } from 'vue'\nimport { PopupUIProps, getOtherProps } from './popup'\nimport { usePopup } from './hook'\n\n/**\n * @example <popup-image src=\"xxx\" class=\"image\" />\n */\nexport default defineComponent({\n  name: 'PopupImage',\n  props: {\n    src: String,\n    ...PopupUIProps\n  },\n  setup(props, context) {\n    const popup = usePopup()\n\n    // Image -> click -> visible modal, ignore (clone/visible)\n    return () => {\n      const { src, ...popupProps } = props\n      if (!src) {\n        return null\n      }\n\n      const imageProps = getOtherProps(props)\n      const imageAttrs = {\n        ...imageProps,\n        ...context.attrs\n      }\n      return h('img', {\n        ...imageAttrs,\n        src,\n        onClick(...args) {\n          ;(imageProps as any)?.onClick?.(...args)\n          popup?.vImage(src, imageAttrs, popupProps)\n        }\n      })\n    }\n  }\n})\n","/**\n * @file Client popup\n * @module service.popup\n * @author Surmon <https://github.com/surmon-china>\n * @example window.$popup.vImage('https://xxx.jpg')\n */\n\nimport { App, Plugin, readonly, reactive, nextTick } from 'vue'\nimport PopupRootComponent from './root.vue'\nimport PopupImageComponent from './image'\nimport PopupComponent from './popup'\nimport { PopupSymbol } from './constant'\n\ndeclare global {\n  interface Window {\n    // @ts-ignore\n    $popup: Popup\n  }\n}\n\nconst createPopupStore = () => {\n  const image = reactive({\n    src: null as null | string,\n    attrs: null as null | object\n  })\n\n  const state = reactive({\n    visibility: false,\n    isImage: false,\n    // UI options\n    border: true,\n    maskClose: true,\n    scrollClose: true,\n    // inner\n    $container: null as null | HTMLElement\n  })\n\n  const hidden = (cb?: () => void) => {\n    if (!state.visibility) {\n      cb?.()\n      return\n    }\n    state.visibility = false\n    state.isImage = false\n    image.src = null\n    image.attrs = null\n    if (cb) {\n      nextTick(cb)\n    }\n  }\n\n  const visible = (options?: Partial<typeof state>) => {\n    hidden(() => {\n      Object.assign(state, {\n        ...options,\n        isImage: false,\n        visibility: true\n      })\n    })\n  }\n\n  const vImage = (src: string, attrs?: any, options?: Partial<typeof state>) => {\n    hidden(() => {\n      image.src = src\n      image.attrs = attrs\n      Object.assign(state, {\n        ...options,\n        isImage: true,\n        visibility: true\n      })\n    })\n  }\n\n  const $setRoot = (element: HTMLElement) => {\n    state.$container = element\n  }\n\n  return {\n    state: readonly(state),\n    image: readonly(image),\n    visible,\n    hidden,\n    vImage,\n    $setRoot\n  }\n}\n\nexport interface PopupPluginConfig {\n  exportToGlobal?: boolean\n}\n// @ts-ignore\nexport type Popup = ReturnType<typeof createPopupStore>\nexport const createPopup = (): Popup & Plugin => {\n  const popupStore = createPopupStore()\n  return {\n    ...popupStore,\n    install(app: App, config: PopupPluginConfig) {\n      app.provide(PopupSymbol, popupStore)\n      // @ts-ignore\n      app.component(PopupComponent.name as string, PopupComponent)\n      // @ts-ignore\n      app.component(PopupImageComponent.name as string, PopupImageComponent)\n      app.component(PopupRootComponent.name as string, PopupRootComponent)\n      if (config?.exportToGlobal) {\n        ;(window as any).$popup = popupStore\n      }\n    }\n  }\n}\n","/**\n * @file Slogan consoler\n * @module service.slogan\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { I18n } from '/@/services/i18n'\nimport { LANGUAGE_KEYS } from '/@/language/key'\nimport { META } from '/@/config/app.config'\n\nexport const consoleSlogan = (i18n: I18n) => {\n  console.clear()\n  console.log(\n    `%c${i18n.t(LANGUAGE_KEYS.APP_SLOGAN)} %c${META.email}`,\n    'color:#666;font-size:3em;',\n    'color:#666;font-size:13px;'\n  )\n}\n","/**\n * @file copyright\n * @module service.copyright\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { META } from '/@/config/app.config'\n\nexport const enableCopyrighter = () => {\n  const copyText = () => {\n    return [\n      '',\n      '著作权归作者所有。',\n      '商业转载请联系作者获得授权，非商业转载请注明出处。',\n      `作者：${META.author}`,\n      '链接：' + location.href,\n      `来源：${META.title}`,\n      ''\n    ].join('\\n')\n  }\n\n  const buildText = (content) => content + copyText()\n  const buildHtml = (content) => content + copyText()\n\n  document.addEventListener('copy', (event) => {\n    if (!window.getSelection) return\n    if (!window.$isCopyFromApp) {\n      const content = window.getSelection()?.toString()\n      event.clipboardData?.setData('text/plain', buildText(content))\n      event.clipboardData?.setData('text/html', buildHtml(content))\n      event.preventDefault()\n    }\n  })\n}\n","/**\n * @file Client Baidu SEO\n * @module service.seo\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { Router } from 'vue-router'\n\nexport const enableBaiduSEOer = (router: Router) => {\n  // Fork from https://zz.bdstatic.com/linksubmit/push.js\n  const pushUrl = (url: string) => {\n    const e = /([http|https]:\\/\\/[a-zA-Z0-9\\_\\.]+\\.baidu\\.com)/gi\n    const r = url\n    const t = document.referrer\n    if (!e.test(r)) {\n      let o = 'https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif'\n      t\n        ? ((o += '?r=' + encodeURIComponent(document.referrer)), r && (o += '&l=' + r))\n        : r && (o += '?l=' + r)\n      const i = new Image()\n      i.src = o\n    }\n  }\n\n  // app ready\n  pushUrl(window.location.href)\n  router.afterEach((to) => {\n    pushUrl(window.location.origin + to.fullPath)\n  })\n}\n","/**\n * @file Generate text to image DataURL\n * @module util.text2image\n * @author Surmon <https://github.com/surmon-china>\n * @link https://github.com/albinekb/favicon-emoji/blob/master/lib/browser.js\n */\n\nexport async function renderTextToDataURL(text = '', size = 16) {\n  const createCanvas = (size) =>\n    Object.assign(document.createElement('canvas'), {\n      width: size,\n      height: size\n    })\n  const canvas = createCanvas(size * 2)\n  const context = canvas.getContext('2d')!\n\n  context.clearRect(0, 0, canvas.width, canvas.height)\n  context.font = `${size}px Apple Color Emoji`\n  context.textAlign = 'center'\n  context.textBaseline = 'middle'\n  context.fillText(text, (size * 2) / 2, (size * 2) / 2)\n\n  const trimCanvas = (canvas) => {\n    const rowBlank = (imageData, width, y) => {\n      for (let x = 0; x < width; ++x) {\n        if (imageData.data[y * width * 4 + x * 4 + 3] !== 0) return false\n      }\n      return true\n    }\n\n    const columnBlank = (imageData, width, x, top, bottom) => {\n      for (let y = top; y < bottom; ++y) {\n        if (imageData.data[y * width * 4 + x * 4 + 3] !== 0) return false\n      }\n      return true\n    }\n\n    const ctx = canvas.getContext('2d')\n    const width = canvas.width\n    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height)\n\n    let top = 0\n    let bottom = imageData.height\n    let left = 0\n    let right = imageData.width\n\n    while (top < bottom && rowBlank(imageData, width, top)) {\n      ++top\n    }\n    while (bottom - 1 > top && rowBlank(imageData, width, bottom - 1)) {\n      --bottom\n    }\n    while (left < right && columnBlank(imageData, width, left, top, bottom)) {\n      ++left\n    }\n    while (right - 1 > left && columnBlank(imageData, width, right - 1, top, bottom)) {\n      --right\n    }\n\n    const trimmed = ctx.getImageData(left, top, right - left, bottom - top)\n    const max = Math.max(trimmed.width, trimmed.height)\n\n    const copy = Object.assign(document.createElement('canvas'), {\n      width: max,\n      height: max\n    })\n\n    const copyCtx = copy.getContext('2d')!\n\n    copyCtx.putImageData(trimmed, (max - trimmed.width) / 2, (max - trimmed.height) / 2)\n\n    return copy\n  }\n\n  return trimCanvas(canvas).toDataURL('image/png')\n}\n","/**\n * @file Title surprise\n * @module service.titler\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { renderTextToDataURL } from '/@/utils/text-2-image'\n\n// matcher\nexport interface Titler {\n  day: number\n  month: number\n  year: number\n  title: string\n  favicon: string\n}\n\nconst matchTitler = (titlers: Array<Titler>) => {\n  const now = new Date()\n  const today = now.getDate()\n  const tomonth = now.getMonth() + 1\n  const toyear = now.getFullYear()\n  return titlers.find((egg) => {\n    const isToday = egg.day === today\n    const isTomonth = egg.month == null || egg.month === tomonth\n    const isToyear = egg.year == null || egg.year === toyear\n    return isToday && isTomonth && isToyear\n  })\n}\n\n// roll\nlet rollTimer: number\nconst titleInterval = 366\nconst setTitle = (title: string) => {\n  document.title = title\n  if (title.length <= 10) {\n    return false\n  }\n  const [first, ...content] = title.split('')\n  const newTitle = [...content, first].join('')\n  rollTimer = window.setTimeout(() => setTitle(newTitle), titleInterval)\n}\n\n// favicon\nconst getFavicon = () => {\n  return Array.from(document.getElementsByTagName('link'))\n    .find((node) => node.getAttribute('rel') == 'icon')\n    ?.getAttribute('href')\n}\nconst setFavicon = async (target) => {\n  Array.from(document.getElementsByTagName('link'))\n    .find((node) => node.getAttribute('rel') == 'icon')\n    ?.setAttribute('href', target)\n}\n\nconst reallyFavicon = getFavicon()!\nlet reallyTitle = document.title\n\nexport const resetTitler = () => {\n  document.title = reallyTitle\n  setFavicon(reallyFavicon)\n}\n\nexport const runTitler = async ({ favicon, title }) => {\n  reallyTitle = document.title\n  document.title = title\n  setFavicon(await renderTextToDataURL(favicon, 28))\n}\n","/**\n * @file emoji rain animation effect\n * @module service.emoji-233333\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport Emoji233333 from 'emoji-233333'\n\ndeclare global {\n  interface Window {\n    $Emoji233333: any\n  }\n}\n\nexport const exportEmojiRainToGlobal = () => {\n  window.$Emoji233333 = Emoji233333\n}\n","/**\n * @file sticky event hack lib\n * @module service.sticky\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport StickyEvents from 'sticky-events'\n\ndeclare global {\n  interface Window {\n    $StickyEvents: any\n  }\n}\n\nexport const exportStickyEventsToGlobal = () => {\n  window.$StickyEvents = StickyEvents\n}\n","/**\n * @file App exporter\n * @module service.exporter\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { App } from 'vue'\n\ndeclare global {\n  interface Window {\n    $app: App\n  }\n}\n\nexport const exportAppToGlobal = (app: App) => {\n  window.$app = app\n}\n","/**\n * @file Root store\n * @module store\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { createPinia } from 'pinia'\nimport { GlobalState } from '/@/app/state'\nimport { getSSRContext } from '/@/universal'\nimport { useArticleStore } from './article'\nimport { useCategoryStore } from './category'\nimport { useTagStore } from './tag'\nimport { useMetaStore } from './meta'\n\nexport interface UniversalStoreConfig {\n  globalState: GlobalState\n}\nexport const createUniversalStore = (config: UniversalStoreConfig) => {\n  const pinia = createPinia()\n  const doPreFetchTask = () => {\n    const initFetchTasks = [\n      useTagStore().fetchAll(),\n      useCategoryStore().fetchAll(),\n      useMetaStore().fetchAdminInfo(),\n      useMetaStore().fetchAppOptions()\n    ]\n\n    // fetch hot articles when desktop only\n    if (!config.globalState.userAgent.isMobile) {\n      initFetchTasks.push(useArticleStore().fetchHotList())\n    }\n\n    return Promise.all(initFetchTasks)\n  }\n\n  return {\n    state: pinia.state,\n    install: pinia.install,\n    prefetch: doPreFetchTask,\n    initInSSR() {\n      const contextStore = getSSRContext('store')\n      if (contextStore) {\n        pinia.state.value = contextStore\n      } else {\n        doPreFetchTask()\n      }\n    },\n    initInSPA() {\n      return doPreFetchTask()\n    }\n  }\n}\n","/**\n * @file Universal Link\n * @description Render Link with external/nofollow/noopener\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { AnchorHTMLAttributes, defineComponent, h } from 'vue'\n\nexport default defineComponent({\n  name: 'Ulink',\n  props: {\n    text: String,\n    external: {\n      type: Boolean,\n      default: true\n    },\n    blank: {\n      type: Boolean,\n      default: true\n    }\n  },\n  setup(props, context) {\n    return () => {\n      const { text, external, blank, ...linkAttrs } = props\n      const customAttrs: AnchorHTMLAttributes = {}\n\n      if (external) {\n        customAttrs.rel = 'external nofollow noopener'\n      }\n      if (blank) {\n        customAttrs.target = '_blank'\n      }\n\n      return h(\n        'a',\n        {\n          ...linkAttrs,\n          ...customAttrs\n        },\n        context.slots.default?.() || text\n      )\n    }\n  }\n})\n","/**\n * @file Universal image\n * @description Render image with CDN/Proxy/Defer\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineComponent, ref, h } from 'vue'\nimport { useEnhancer } from '/@/app/enhancer'\nimport { getFileCDNUrl, getFileProxyUrl } from '/@/transforms/url'\nimport { onClient } from '/@/universal'\n\nexport default defineComponent({\n  name: 'Uimage',\n  props: {\n    src: {\n      type: String,\n      required: true\n    },\n    cdn: Boolean,\n    proxy: Boolean,\n    defer: Boolean\n  },\n  setup(props) {\n    const { defer } = useEnhancer()\n    const deferRenderable = ref(false)\n    if (props.defer) {\n      onClient(() => {\n        defer.addTask(() => {\n          deferRenderable.value = true\n        })\n      })\n    }\n\n    return () => {\n      const { src, cdn, proxy, defer, ...restProps } = props\n\n      let imageSrc = src\n      if (cdn) {\n        imageSrc = getFileCDNUrl(src)\n      }\n      if (proxy) {\n        imageSrc = getFileProxyUrl(src)\n      }\n      if (defer && !deferRenderable.value) {\n        return null\n      }\n\n      return h('img', {\n        draggable: false,\n        ...restProps,\n        src: imageSrc\n      })\n    }\n  }\n})\n","<template>\n  <div class=\"empty\">\n    <slot>\n      <template v-if=\"placeholder\">{{ placeholder }}</template>\n      <template v-else>\n        <i18n :lkey=\"i18nKey || LANGUAGE_KEYS.EMPTY_PLACEHOLDER\" />\n      </template>\n    </slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, PropType } from 'vue'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  export default defineComponent({\n    name: 'Empty',\n    props: {\n      placeholder: String,\n      i18nKey: String as PropType<LANGUAGE_KEYS>\n    },\n    setup() {\n      return {\n        LANGUAGE_KEYS\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .empty {\n    position: relative;\n    display: flex;\n    width: 100%;\n    height: 100%;\n    min-height: 5em;\n    text-align: center;\n    justify-content: center;\n    align-items: center;\n    color: $text-dividers;\n    letter-spacing: 0.1em;\n  }\n</style>\n","<template>\n  <div v-show=\"loading\" class=\"spinner-box\">\n    <div class=\"spinner-inner\">\n      <div class=\"la-ball-beat\">\n        <div :style=\"spinnerStyle\" />\n        <div :style=\"spinnerStyle\" />\n        <div :style=\"spinnerStyle\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, h } from 'vue'\n  export default defineComponent({\n    name: 'Spin',\n    props: {\n      loading: {\n        type: Boolean,\n        default: true\n      },\n      color: {\n        type: String,\n        default: 'rgba(197, 197, 197, 0.4)'\n      },\n      height: {\n        type: String,\n        default: '15px'\n      },\n      width: {\n        type: String,\n        default: '15px'\n      },\n      margin: {\n        type: String,\n        default: '5px'\n      }\n    },\n    data() {\n      return {\n        spinnerStyle: {\n          backgroundColor: this.color,\n          height: this.height,\n          width: this.width,\n          margin: this.margin\n        }\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .spinner-box {\n    position: relative;\n    width: 100%;\n    min-height: 50px;\n    height: 100%;\n\n    @keyframes ball-beat {\n      50% {\n        opacity: 0.2;\n        transform: scale(0.75);\n      }\n      100% {\n        opacity: 1;\n        transform: scale(1);\n      }\n    }\n\n    > .spinner-inner {\n      width: 80px;\n      height: 30px;\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      margin-left: -40px;\n      margin-top: -15px;\n\n      > .la-ball-beat {\n        display: block;\n        position: relative;\n        box-sizing: border-box;\n        font-size: 0;\n        color: $white;\n        width: 80px;\n        height: 30px;\n\n        > div {\n          position: relative;\n          box-sizing: border-box;\n          display: inline-block;\n          float: none;\n          border: none;\n          width: 15px;\n          height: 15px;\n          margin: 5px;\n          background-color: $module-bg-hover;\n          animation: ball-beat 0.7s -0.15s infinite linear;\n\n          &:nth-child(2n-1) {\n            animation-delay: -0.5s;\n          }\n        }\n\n        &.la-sm {\n          width: 26px;\n          height: 8px;\n\n          > div {\n            width: 8px;\n            height: 8px;\n            margin: 3px;\n          }\n        }\n\n        &.la-2x {\n          width: 108px;\n          height: 36px;\n\n          > div {\n            width: 20px;\n            height: 20px;\n            margin: 8px;\n          }\n        }\n\n        &.la-3x {\n          width: 162px;\n          height: 54px;\n\n          > div {\n            width: 30px;\n            height: 30px;\n            margin: 12px;\n          }\n        }\n      }\n    }\n  }\n</style>\n","/**\n * @file placeholder\n * @description render placeholder or data\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineComponent, h, Transition, PropType } from 'vue'\nimport { LANGUAGE_KEYS } from '/@/language/key'\nimport Empty from './empty.vue'\nimport Spin from './spin.vue'\n\nexport enum Events {\n  AfterEnter = 'after-enter'\n}\n\n/**\n * @example\n *  <placeholder :loading=\"false\" :data=\"data.length\" :i18n-key=\"LANGUAGE_KEYS.XXX\">\n *    <component />\n *  </placeholder>\n * @example\n *  <placeholder :loading=\"false\" :data=\"data.length\" placeholder=\"empty\">\n *    <component />\n *  </placeholder>\n * @example\n *  <placeholder :loading=\"true\" :data=\"data.length\">\n *    <template #loading> skeleton </template>\n *    <template #placeholder> placeholder </template>\n *    <template #default> <component /> </template>\n *  </placeholder>\n */\nexport default defineComponent({\n  name: 'Placeholder',\n  props: {\n    data: {\n      type: [Array, Object, Boolean, Number],\n      default: undefined\n    },\n    transition: {\n      type: Boolean,\n      default: true\n    },\n    transitionName: {\n      type: String,\n      default: 'module'\n    },\n    placeholder: String,\n    i18nKey: String as PropType<LANGUAGE_KEYS>,\n    loading: Boolean\n  },\n  emits: [Events.AfterEnter],\n  setup(props, context) {\n    return () => {\n      const { data, placeholder, i18nKey, loading, transition, transitionName } = props\n      const isEmptyData =\n        data !== undefined && ((Array.isArray(data) && !(data as any).length) || !data)\n\n      const getPlaceholderView = () => {\n        return placeholder || i18nKey\n          ? h(Empty, { placeholder, i18nKey })\n          : context.slots.placeholder?.()\n      }\n\n      const getDataView = () => {\n        return isEmptyData ? getPlaceholderView() : context.slots.default?.()\n      }\n\n      const getLoadingView = () => {\n        return context.slots.loading?.() || h(Spin, { loading: true })\n      }\n\n      const getView = () => {\n        return loading ? getLoadingView() : getDataView()\n      }\n\n      if (transition) {\n        return h(\n          Transition,\n          {\n            name: transitionName,\n            mode: 'out-in',\n            onAfterEnter(...args) {\n              context.emit(Events.AfterEnter, ...args)\n            }\n          },\n          () => getView()\n        )\n      }\n\n      return getView()\n    }\n  }\n})\n","<template>\n  <div class=\"skeleton base\" :style=\"style\"></div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, CSSProperties } from 'vue'\n  export default defineComponent({\n    name: 'SkeletonBase',\n    props: {\n      width: {\n        type: Number\n      },\n      height: {\n        type: Number\n      },\n      circle: {\n        type: Boolean,\n        default: false\n      },\n      radius: {\n        type: Number,\n        default: 2\n      }\n    },\n    setup(props) {\n      const style = computed<CSSProperties>(() => ({\n        borderRadius: props.circle ? '100%' : `${props.radius}px`,\n        ...(props.width && { width: props.width + 'px' }),\n        ...(props.height && { height: props.height + 'px' })\n      }))\n\n      return {\n        style\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  $skeleton-background: $module-bg;\n  $skeleton-spinner: $module-bg-darker-3;\n\n  @keyframes placeHolderShimmer {\n    0% {\n      background-position: -468px 0;\n    }\n    100% {\n      background-position: 350px 50px;\n    }\n  }\n\n  .skeleton.base {\n    width: 100%;\n    height: 100%;\n    animation-duration: 1s;\n    animation-fill-mode: forwards;\n    animation-iteration-count: infinite;\n    animation-name: placeHolderShimmer;\n    animation-timing-function: linear;\n    background-color: $skeleton-spinner;\n    background-image: linear-gradient(\n      to right,\n      $skeleton-background 8%,\n      $skeleton-spinner 18%,\n      $skeleton-background 33%\n    );\n    background-repeat: repeat;\n    background-size: 800px 104px;\n  }\n</style>\n","<template>\n  <div class=\"skeleton line\" :style=\"style\">\n    <skeleton-base />\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, CSSProperties } from 'vue'\n  import SkeletonBase from './base.vue'\n  export default defineComponent({\n    name: 'SkeletonLine',\n    components: {\n      SkeletonBase\n    },\n    props: {\n      width: {\n        type: Number\n      },\n      height: {\n        type: Number\n      }\n    },\n    setup(props) {\n      const style = computed<CSSProperties>(() => ({\n        ...(props.width && { width: props.width + 'px' }),\n        ...(props.height && { height: props.height + 'px' })\n      }))\n      return { style }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  .skeleton.line {\n    width: 100%;\n    height: 100%;\n  }\n</style>\n","<template>\n  <div class=\"skeleton paragraph\" :style=\"style\">\n    <skeleton-line\n      v-for=\"(line, index) in lines\"\n      :key=\"index\"\n      :style=\"getLineStyle(index)\"\n      class=\"paragraph-line\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, CSSProperties } from 'vue'\n  import SkeletonLine from './line.vue'\n  export default defineComponent({\n    name: 'SkeletonParagraph',\n    components: {\n      SkeletonLine\n    },\n    props: {\n      lines: {\n        type: Number,\n        default: 1\n      },\n      width: {\n        type: Number\n      },\n      height: {\n        type: Number\n      },\n      align: {\n        type: Boolean,\n        default: false\n      },\n      lineHeight: {\n        type: String,\n        default: '1rem'\n      }\n    },\n    setup(props) {\n      const style = computed<CSSProperties>(() => ({\n        ...(props.width && { width: props.width + 'px' }),\n        ...(props.height && { height: props.height + 'px' })\n      }))\n\n      const getLineStyle = (index: number) => {\n        const style: CSSProperties = {\n          height: props.lineHeight,\n          marginBottom: index === props.lines - 1 ? '0' : `calc(${props.lineHeight} * 0.75)`\n        }\n        const position = index % 3\n        if (position) {\n          const margin = 15 * position\n          style.width = `${100 - margin}%`\n          style.marginLeft = props.align ? '0' : '6%'\n        }\n        return style\n      }\n\n      return {\n        style,\n        getLineStyle\n      }\n    }\n  })\n</script>\n","/**\n * @file responsive\n * @description Render children on desktop platform or mobile platform\n * @author Surmon <https://github.com/surmon-china>\n */\n\n/* eslint-disable vue/one-component-per-file */\nimport { defineComponent } from 'vue'\nimport { useGlobalState } from '/@/app/state'\n\n/**\n * @example <responsive desktop><component /></responsive>\n * @example <responsive mobile><component /></responsive>\n * @example <responsive both><component /></responsive>\n * @example\n *  <responsive>\n *    <template #desktop>Desktop</template>\n *    <template #mobile>Mobile</template>\n *  </responsive>\n */\nexport const Responsive = defineComponent({\n  name: 'Responsive',\n  props: {\n    both: Boolean,\n    desktop: Boolean,\n    mobile: Boolean\n  },\n  setup(props, context) {\n    const globalState = useGlobalState()\n\n    return () => {\n      // render\n      if (props.both) {\n        return context.slots.default?.()\n      }\n      // desktop\n      if (props.desktop && !globalState.userAgent.isMobile) {\n        return context.slots.default?.()\n      }\n      // mobile\n      if (props.mobile && globalState.userAgent.isMobile) {\n        return context.slots.default?.()\n      }\n\n      // slot mode\n      return globalState.userAgent.isMobile ? context.slots.mobile?.() : context.slots.desktop?.()\n    }\n  }\n})\n\nexport const DesktopOnly = defineComponent({\n  name: 'DesktopOnly',\n  setup(_, context) {\n    const globalState = useGlobalState()\n    return () => !globalState.userAgent.isMobile && context.slots.default?.()\n  }\n})\n","/**\n * @file client only\n * @description only render on client (browser)\n * @description Fork from: https://github.com/egoist/vue-client-only/blob/master/src/index.js\n * @description Fork from: https://github.com/kadirahq/react-no-ssr/blob/master/src/index.js\n * @description Fork from: https://github.com/nuxt/framework/blob/main/packages/nuxt3/src/app/components/client-only.mjs\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineComponent, ref, h, onMounted, Transition, cloneVNode } from 'vue'\nimport { useEnhancer } from '../../app/enhancer'\n\n/**\n * @description only render on client (browser)\n * @example\n * <client-only placeholder=\"loading...\">\n *    <component />\n * </client-only>\n * @example\n * <client-only :transition=\"true\" :delay=\"668\">\n *    <component />\n * </client-only>\n */\nexport const ClientOnly = defineComponent({\n  name: 'ClientOnly',\n  props: {\n    placeholder: String,\n    placeholderTag: {\n      type: String,\n      default: 'div'\n    },\n    transition: {\n      type: Boolean,\n      default: false\n    },\n    delay: {\n      type: Number,\n      default: 0\n    }\n  },\n  setup(props, context) {\n    const { globalState } = useEnhancer()\n    // SSR -> hydrated -> render -> no transition\n    const mounted = ref(globalState.isHydrated.value ? true : false)\n\n    onMounted(() => {\n      // SSR inited -> mounted -> render -> transition\n      if (!globalState.isHydrated.value) {\n        const setRender = () => {\n          mounted.value = true\n        }\n        props.delay ? setTimeout(setRender, props.delay) : setRender()\n      }\n    })\n\n    const renderResult = (result, resultKey?: string) => {\n      if (!props.transition) {\n        return result\n      }\n      if (Array.isArray(result) && result.length > 1) {\n        return result\n      }\n      const singleResult = Array.isArray(result) ? result[0] : result\n      return h(Transition, { name: 'client-only', mode: 'out-in' }, () =>\n        singleResult\n          ? cloneVNode(singleResult, { key: resultKey })\n          : h('div', { key: 'empty', class: 'client-only-empty' })\n      )\n    }\n\n    return () => {\n      if (mounted.value) {\n        return renderResult(context.slots.default?.(), 'result')\n      }\n\n      if (context.slots.placeholder) {\n        return renderResult(context.slots.placeholder(), 'placeholderSlot')\n      }\n\n      if (props.placeholderTag && props.placeholder) {\n        return renderResult(\n          h(props.placeholderTag, { class: 'client-only-placeholder' }, props.placeholder),\n          'placeholder'\n        )\n      }\n\n      return renderResult(null)\n    }\n  }\n})\n","/**\n * @file app interior extends\n * @module service.interior\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { App } from 'vue'\nimport Ulink from '/@/components/common/ulink'\nimport Uimage from '/@/components/common/uimage'\nimport Placeholder from '/@/components/common/placeholder'\nimport Spin from '/@/components/common/spin.vue'\nimport Empty from '/@/components/common/empty.vue'\n\nimport SkeletonBase from '/@/components/common/skeleton/base.vue'\nimport SkeletonLine from '/@/components/common/skeleton/line.vue'\nimport SkeletonParagraph from '/@/components/common/skeleton/paragraph.vue'\n\nimport { Responsive, DesktopOnly } from '/@/components/common/responsive'\nimport { ClientOnly } from '/@/components/common/client-only'\n\nexport default function (app: App) {\n  // components\n  app.component(Ulink.name, Ulink)\n  app.component(Uimage.name, Uimage)\n  app.component(Spin.name as string, Spin)\n  app.component(Empty.name as string, Empty)\n  app.component(Placeholder.name, Placeholder)\n\n  app.component(ClientOnly.name, ClientOnly)\n  app.component(Responsive.name, Responsive)\n  app.component(DesktopOnly.name, DesktopOnly)\n\n  app.component(SkeletonBase.name as string, SkeletonBase)\n  app.component(SkeletonLine.name as string, SkeletonLine)\n  app.component(SkeletonParagraph.name as string, SkeletonParagraph)\n}\n","<template>\n  <div class=\"error\" :class=\"{ dark: isDarkTheme }\">\n    <h1 class=\"code\">{{ error.code }}</h1>\n    <h3 class=\"message\">\n      <template v-if=\"error.message\">{{ error.message }}</template>\n      <i18n v-else :lkey=\"LANGUAGE_KEYS.NOT_FOUND\" />\n    </h3>\n    <p class=\"link\" @click=\"handleResolveRoute\">\n      <slot name=\"resolve-text\" />\n    </p>\n    <uimage cdn class=\"logo\" src=\"/images/logo.svg\" />\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, PropType } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { RenderError } from '/@/app/state'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n\n  export enum ErrorEvent {\n    Resolve = 'resolve'\n  }\n  export default defineComponent({\n    name: 'Error',\n    emits: [ErrorEvent.Resolve],\n    props: {\n      error: {\n        type: Object as PropType<RenderError>,\n        required: true\n      }\n    },\n    setup(props, context) {\n      const { isDarkTheme } = useEnhancer()\n      const handleResolveRoute = () => {\n        context.emit(ErrorEvent.Resolve)\n      }\n\n      return {\n        LANGUAGE_KEYS,\n        isDarkTheme,\n        handleResolveRoute\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .error {\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    position: fixed;\n    overflow: hidden;\n    z-index: $z-index-top;\n    text-align: center;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    background-color: $module-bg;\n    &.dark {\n      background-color: $module-bg-opaque;\n      .message {\n        color: $text-darker;\n      }\n    }\n\n    @keyframes error-item {\n      0% {\n        opacity: 0;\n        transform: translate3d(0, -30%, 0);\n      }\n      100% {\n        opacity: 1;\n        transform: translate3d(0, 0, 0);\n      }\n    }\n\n    .logo {\n      width: 8rem;\n      opacity: 0.1;\n      position: fixed;\n      bottom: 2rem;\n      filter: $theme-logo-rotate;\n    }\n\n    .code,\n    .link,\n    .message {\n      color: $text-secondary;\n      animation: error-item ease-out both 0.6s $transition-time-normal;\n    }\n\n    @keyframes code-wave {\n      0% {\n        opacity: 0;\n        background-position-y: 5rem;\n      }\n      100% {\n        opacity: 1;\n        background-position-y: 0;\n      }\n    }\n\n    @keyframes code-wave-play {\n      0% {\n        background-position-x: 14%;\n      }\n      100% {\n        background-position-x: 100%;\n      }\n    }\n\n    .code {\n      text-transform: uppercase;\n      font-size: 10em;\n      font-weight: normal;\n      margin: 0;\n      background-image: cdn-url('/images/page-error/wave.png');\n      background-size: cover;\n      background-repeat: repeat-x;\n      background-position: center;\n      -webkit-background-clip: text;\n      color: rgba(darken($white, 20%), 20%);\n      animation: error-item ease-out both 0.6s $transition-time-normal,\n        code-wave ease-out both 0.6s $transition-time-normal, code-wave-play linear 2s infinite;\n    }\n\n    .message {\n      font-weight: normal;\n      margin-top: 0;\n      margin-bottom: 2rem;\n    }\n\n    .link {\n      cursor: pointer;\n      border-bottom: 1px solid;\n      padding-bottom: $sm-gap;\n      margin-bottom: 4rem;\n      @include color-transition();\n      &:hover {\n        color: $text-darker;\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"captured\">\n    <error-component v-if=\"error\" :error=\"error\" @resolve=\"handleResolveRoute\">\n      <template #resolve-text>\n        <i18n :lkey=\"LANGUAGE_KEYS.BACK_TO_HOME_PAGE\" />\n      </template>\n    </error-component>\n    <template v-else>\n      <slot />\n    </template>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, onErrorCaptured } from 'vue'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { RouteName } from '/@/app/router'\n  import { getLayoutByRouteMeta } from '/@/services/layout'\n  import ErrorComponent from './error.vue'\n\n  export default defineComponent({\n    name: 'Captured',\n    components: {\n      ErrorComponent\n    },\n    setup(props, context) {\n      const { router, globalState } = useEnhancer()\n      const handleResolveRoute = () => {\n        router.push({ name: RouteName.Home }).then(() => {\n          // MARK: 顺序很重要！要先设置布局，再渲染，避免闪屏\n          globalState.setLayoutColumn(getLayoutByRouteMeta(router.currentRoute.value.meta))\n          globalState.setRenderError(null)\n        })\n      }\n\n      onErrorCaptured((_error: any) => {\n        globalState.setRenderError(_error)\n        return false\n      })\n\n      return {\n        error: globalState.renderError,\n        handleResolveRoute,\n        LANGUAGE_KEYS\n      }\n    }\n  })\n</script>\n","import { RouteName, CategorySlug } from '/@/app/router'\nimport { getPageRoute, getCategoryArchiveRoute } from '/@/transforms/route'\nimport { LANGUAGE_KEYS } from '/@/language/key'\nimport { VALUABLE_LINKS } from '/@/config/app.config'\n\nexport interface MenuItem {\n  id: string\n  icon: string\n  i18nKey: LANGUAGE_KEYS\n  separator?: boolean\n  hot?: boolean\n  route?: string\n  url?: string\n}\n\nexport const menus: Array<MenuItem> = [\n  {\n    id: RouteName.Home,\n    route: '/',\n    icon: 'icon-home-fill',\n    i18nKey: LANGUAGE_KEYS.PAGE_HOME\n  },\n  {\n    id: CategorySlug.Code,\n    route: getCategoryArchiveRoute(CategorySlug.Code),\n    icon: 'icon-code',\n    i18nKey: LANGUAGE_KEYS.CATEGORY_CODE\n  },\n  {\n    id: CategorySlug.Insight,\n    route: getCategoryArchiveRoute(CategorySlug.Insight),\n    icon: 'icon-thinking',\n    i18nKey: LANGUAGE_KEYS.CATEGORY_INSIGHT\n  },\n  {\n    id: 'github',\n    url: VALUABLE_LINKS.GITHUB,\n    icon: 'icon-github',\n    i18nKey: LANGUAGE_KEYS.PAGE_GITHUB\n  },\n  {\n    id: RouteName.Lens,\n    route: getPageRoute(RouteName.Lens),\n    icon: 'icon-lens',\n    i18nKey: LANGUAGE_KEYS.PAGE_LENS\n  },\n  {\n    id: RouteName.About,\n    route: getPageRoute(RouteName.About),\n    icon: 'icon-user',\n    i18nKey: LANGUAGE_KEYS.PAGE_ABOUT\n  },\n  {\n    id: RouteName.Job,\n    route: getPageRoute(RouteName.Job),\n    icon: 'icon-horse',\n    i18nKey: LANGUAGE_KEYS.PAGE_JOB\n  },\n  {\n    id: RouteName.Freelancer,\n    route: getPageRoute(RouteName.Freelancer),\n    icon: 'icon-tool',\n    i18nKey: LANGUAGE_KEYS.PAGE_FREELANCER\n  },\n  {\n    id: RouteName.Guestbook,\n    route: getPageRoute(RouteName.Guestbook),\n    icon: 'icon-comment',\n    i18nKey: LANGUAGE_KEYS.PAGE_GUESTBOOK\n  },\n  {\n    id: RouteName.App,\n    route: getPageRoute(RouteName.App),\n    separator: true,\n    icon: 'icon-app',\n    i18nKey: LANGUAGE_KEYS.PAGE_APP\n  },\n  {\n    id: RouteName.Merch,\n    route: getPageRoute(RouteName.Merch),\n    separator: true,\n    hot: true,\n    icon: 'icon-rubik',\n    i18nKey: LANGUAGE_KEYS.PAGE_MERCH\n  }\n]\n","<template>\n  <div :id=\"NAV_ELEMENT_ID\" class=\"aside-nav\">\n    <nav class=\"nav-list\" :class=\"{ en: !isZhLang }\">\n      <template v-for=\"menu in menus\" :key=\"menu.id\">\n        <span class=\"separator\" v-if=\"menu.separator\"></span>\n        <router-link\n          v-if=\"menu.route\"\n          class=\"item\"\n          :class=\"[menu.id, { hot: menu.hot }]\"\n          :to=\"menu.route\"\n          exact\n        >\n          <i class=\"iconfont\" :class=\"menu.icon\"></i>\n          <span class=\"text\">\n            <i18n :lkey=\"menu.i18nKey\" />\n          </span>\n          <span v-if=\"menu.hot\" class=\"superscript\">\n            <i class=\"iconfont icon-hot-fill\"></i>\n          </span>\n        </router-link>\n        <ulink\n          v-else-if=\"menu.url\"\n          class=\"item\"\n          :class=\"[menu.id, { hot: menu.hot }]\"\n          :href=\"menu.url\"\n        >\n          <i class=\"iconfont\" :class=\"menu.icon\"></i>\n          <span class=\"text\">\n            <i18n :lkey=\"menu.i18nKey\" />\n          </span>\n          <span v-if=\"menu.hot\" class=\"superscript\">\n            <i class=\"iconfont icon-hot-fill\"></i>\n          </span>\n        </ulink>\n      </template>\n      <!-- AD -->\n      <template v-for=\"(ad, index) in adConfig.PC_NAV\" :key=\"index\">\n        <span class=\"separator\"></span>\n        <ulink class=\"item\" :href=\"ad.url\">\n          <i class=\"iconfont\" :class=\"ad.icon\" :style=\"{ color: ad.color }\"></i>\n          <span class=\"text\" :style=\"{ color: ad.color }\">\n            <template v-if=\"ad.i18n\">\n              <i18n :zh=\"ad.i18n.zh\" :en=\"ad.i18n.en\" />\n            </template>\n            <template v-else>\n              {{ ad.text }}\n            </template>\n          </span>\n          <span class=\"superscript\">\n            <i class=\"iconfont icon-ad\"></i>\n          </span>\n        </ulink>\n      </template>\n    </nav>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { NAV_ELEMENT_ID } from '/@/constants/anchor'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { menus } from './menu'\n  export default defineComponent({\n    name: 'PCNav',\n    setup() {\n      const { adConfig, isZhLang } = useEnhancer()\n      return {\n        NAV_ELEMENT_ID,\n        menus,\n        adConfig,\n        isZhLang\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .aside-nav {\n    width: $navbar-width;\n    height: auto;\n    margin-right: $lg-gap;\n\n    .nav-list {\n      width: $navbar-width;\n      padding: 0;\n      margin: 0;\n      position: fixed;\n\n      &.en {\n        .item {\n          .text {\n            font-size: $font-size-h6;\n          }\n        }\n      }\n\n      .item {\n        display: block;\n        position: relative;\n        width: 100%;\n        height: 3em;\n        line-height: 3em;\n        padding: 0 $lg-gap;\n        text-decoration: none;\n        text-transform: uppercase;\n        font-weight: bold;\n        border-radius: $mini-radius;\n        color: $text-secondary;\n        font-family: 'webfont-normal', DINRegular;\n        letter-spacing: 0.5px;\n        margin-bottom: $sm-gap;\n        will-change: background-color;\n        transition: background-color $transition-time-fast * 0.6;\n        @include radius-box($sm-radius);\n\n        &:hover {\n          color: $primary-lighter;\n          background-color: $module-bg-translucent;\n        }\n\n        > .superscript {\n          margin-left: $sm-gap;\n\n          .iconfont {\n            width: auto;\n            margin-right: 0;\n            color: $red;\n          }\n        }\n\n        &.hot {\n          color: $red;\n        }\n\n        &.app {\n          color: $primary;\n          > .iconfont {\n            color: $primary;\n          }\n        }\n\n        &:last-child {\n          margin-bottom: 0;\n        }\n\n        &.link-active {\n          color: $primary;\n          background-color: $module-bg-lighter;\n\n          &.guestbook {\n            background: linear-gradient(to bottom, $module-bg-lighter, transparent);\n          }\n        }\n\n        .iconfont {\n          width: 1em;\n          margin-right: $gap;\n          display: inline-block;\n          font-weight: normal;\n        }\n      }\n\n      .separator {\n        display: block;\n        height: 0;\n        background-color: transparent;\n        border-top: 1px dotted $module-bg-darker-2;\n        margin-bottom: $sm-gap;\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"search\">\n    <div class=\"search-box\">\n      <input\n        id=\"keyword\"\n        class=\"search-input\"\n        required\n        type=\"search\"\n        name=\"search\"\n        maxlength=\"16\"\n        v-model.trim=\"keyword\"\n        :class=\"i18n.language\"\n        :placeholder=\"i18n.t(LANGUAGE_KEYS.SEARCH_PLACEHOLDER)\"\n        @keyup.enter=\"handleSearch\"\n      />\n      <button class=\"search-btn\" @click=\"handleSearch\">\n        <i class=\"iconfont icon-search\" />\n      </button>\n    </div>\n    <router-link class=\"archive-btn\" :to=\"{ name: RouteName.Archive }\">\n      <i class=\"iconfont icon-peachblossom\" />\n    </router-link>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, onMounted } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { RouteName } from '/@/app/router'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { isSearchArchive } from '/@/transforms/route'\n\n  export default defineComponent({\n    name: 'PCAsideSearch',\n    setup() {\n      const { i18n, route, router } = useEnhancer()\n      const keyword = ref('')\n\n      onMounted(() => {\n        if (isSearchArchive(route.name as string)) {\n          keyword.value = route.params.keyword as string\n        }\n      })\n\n      const handleSearch = () => {\n        const inputKeyword = keyword.value\n        const paramsKeyword = route.params.keyword as string\n        const isSearchPage = isSearchArchive(route.name as string)\n        if (inputKeyword && (!isSearchPage || paramsKeyword !== inputKeyword)) {\n          router.push({\n            name: RouteName.SearchArchive,\n            params: { keyword: inputKeyword }\n          })\n        }\n      }\n\n      return {\n        LANGUAGE_KEYS,\n        RouteName,\n        i18n,\n        keyword,\n        handleSearch\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .search {\n    padding: $sm-gap;\n    width: 100%;\n    height: 3em;\n    overflow: hidden;\n    display: flex;\n    justify-content: space-between;\n\n    .search-input,\n    .search-btn,\n    .archive-btn {\n      height: 2em;\n      line-height: 2em;\n      background-color: $module-bg-darker-1;\n      @include background-transition();\n\n      &:hover {\n        background-color: $module-bg-hover;\n      }\n    }\n\n    > .search-box {\n      display: flex;\n      flex-grow: 1;\n\n      > .search-input {\n        margin-right: 0;\n        flex-grow: 1;\n\n        &::-webkit-calendar-picker-indicator {\n          display: none;\n        }\n      }\n\n      > .search-btn {\n        width: 2em;\n        background-color: $module-bg-darker-3;\n        @include background-transition();\n\n        &:hover {\n          background-color: $module-bg-darker-4;\n        }\n      }\n    }\n\n    > .archive-btn {\n      display: inline-block;\n      text-align: center;\n      margin-left: $sm-gap;\n      width: 3em;\n\n      .iconfont {\n        font-size: $font-size-h4;\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"article\">\n    <p class=\"title\">\n      <i class=\"iconfont icon-hotfill\" />\n      <strong>\n        <i18n :lkey=\"LANGUAGE_KEYS.HOT_ARTICLE_LIST_TITLE\" />\n      </strong>\n    </p>\n    <placeholder\n      :data=\"articleStore.hotList.data\"\n      :loading=\"articleStore.hotList.fetching\"\n      :i18n-key=\"LANGUAGE_KEYS.ARTICLE_PLACEHOLDER\"\n    >\n      <template #loading>\n        <ul class=\"article-list-skeleton\" key=\"skeleton\">\n          <li v-for=\"item in 5\" :key=\"item\" class=\"item\">\n            <skeleton-line />\n          </li>\n        </ul>\n      </template>\n      <template #default>\n        <ul class=\"article-list\" key=\"list\">\n          <li v-for=\"item in articleStore.hotList.data\" :key=\"item.id\" class=\"item\">\n            <span class=\"index\"></span>\n            <router-link class=\"title\" :to=\"getArticleDetailRoute(item.id)\" :title=\"item.title\">\n              {{ item.title }}\n            </router-link>\n          </li>\n        </ul>\n      </template>\n    </placeholder>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { useArticleStore } from '/@/store/article'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { getArticleDetailRoute } from '/@/transforms/route'\n\n  export default defineComponent({\n    name: 'PCAsideArticle',\n    setup() {\n      const articleStore = useArticleStore()\n\n      return {\n        articleStore,\n        getArticleDetailRoute,\n        LANGUAGE_KEYS\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .article {\n    overflow: hidden;\n\n    > .title {\n      height: 3em;\n      line-height: 3em;\n      margin: 0;\n      padding: 0 $gap;\n      border-bottom: 1px dotted $module-bg-darker-1;\n      text-transform: uppercase;\n\n      .iconfont {\n        margin-right: $sm-gap;\n      }\n    }\n\n    .article-list-skeleton {\n      list-style: none;\n      padding: $gap;\n      margin: 0;\n\n      .item {\n        height: 1em;\n        margin-bottom: $gap;\n        &:last-child {\n          margin-bottom: 0;\n        }\n      }\n    }\n\n    .article-list {\n      list-style: none;\n      padding: $sm-gap 0;\n      margin-bottom: 0;\n      counter-reset: hot-article-list;\n\n      .item {\n        display: flex;\n        align-items: center;\n        height: 2.2rem;\n        padding: 0 $gap;\n        margin-bottom: $sm-gap;\n        color: $text-darker;\n\n        &:nth-child(1) {\n          .index {\n            color: $text-reversal;\n            background-color: $primary-translucent;\n          }\n        }\n\n        &:nth-child(2) {\n          .index {\n            color: $text-reversal;\n            background-color: rgba($accent, 0.6);\n          }\n        }\n\n        &:nth-child(3) {\n          .index {\n            color: $text-reversal;\n            background-color: rgba($red, 0.6);\n          }\n        }\n\n        &:last-child {\n          margin: 0;\n        }\n\n        .index {\n          $size: 1.5em;\n          flex-shrink: 0;\n          color: $text-disabled;\n          counter-increment: hot-article-list;\n          background-color: $module-bg-darker-1;\n          width: $size;\n          height: $size;\n          line-height: $size;\n          display: block;\n          text-align: center;\n          margin-right: $sm-gap;\n          font-size: 1rem;\n          font-weight: bold;\n          border-radius: $xs-radius;\n\n          &::before {\n            content: counter(hot-article-list);\n          }\n        }\n\n        .title {\n          display: block;\n          font-size: $font-size-h6;\n          border-top: 1px solid transparent;\n          border-bottom: 1px solid transparent;\n          @include text-overflow();\n\n          &:hover {\n            text-decoration: none;\n            border-bottom-color: initial;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"mammon\">\n    <swiper\n      class=\"swiper\"\n      direction=\"vertical\"\n      :initial-slide=\"index\"\n      :loop=\"true\"\n      :simulate-touch=\"false\"\n      :autoplay=\"{ delay: 2800, disableOnInteraction: false }\"\n      :pagination=\"{ clickable: true }\"\n      :set-wrapper-size=\"true\"\n      :auto-height=\"true\"\n      :mousewheel=\"true\"\n      :observe-parents=\"true\"\n      :preload-images=\"false\"\n      :lazy=\"true\"\n      @swiper=\"updateSwiper\"\n      @slide-change-transition-end=\"handleSlideChange\"\n    >\n      <swiper-slide\n        class=\"swiper-slide\"\n        :key=\"_index\"\n        v-for=\"(ad, _index) in adConfig.PC_ASIDE_SWIPER\"\n      >\n        <ulink class=\"content\" :href=\"ad.url\">\n          <uimage :src=\"ad.src\" alt=\"aliyun-ad\" />\n        </ulink>\n      </swiper-slide>\n    </swiper>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import SwiperClass, { Swiper, SwiperSlide } from '/@/services/swiper'\n\n  export enum AsideMammonEvent {\n    Ready = 'ready',\n    UpdateIndex = 'update:index',\n    IndexChange = 'index-change'\n  }\n  export default defineComponent({\n    name: 'PCAsideMammon',\n    components: {\n      Swiper,\n      SwiperSlide\n    },\n    props: {\n      index: {\n        type: Number,\n        default: 0\n      },\n      ready: {\n        type: Object\n      }\n    },\n    emits: [AsideMammonEvent.Ready, AsideMammonEvent.UpdateIndex, AsideMammonEvent.IndexChange],\n    setup(props, context) {\n      const { adConfig } = useEnhancer()\n      const swiper = ref<SwiperClass>()\n      const updateSwiper = (_swiper: SwiperClass) => {\n        swiper.value = _swiper\n        context.emit(AsideMammonEvent.Ready, swiper.value)\n      }\n\n      const handleSlideChange = () => {\n        const realIndex = swiper.value?.realIndex\n        context.emit(AsideMammonEvent.UpdateIndex, realIndex)\n        context.emit(AsideMammonEvent.IndexChange, realIndex)\n      }\n\n      return {\n        adConfig,\n        updateSwiper,\n        handleSlideChange\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .mammon {\n    width: 100%;\n    overflow: hidden;\n\n    .swiper {\n      height: 88px;\n\n      .swiper-wrapper {\n        &[style*='300ms'] {\n          .swiper-slide-active {\n            @include blur-filter('vertical-small');\n          }\n        }\n\n        .swiper-slide {\n          .content {\n            width: 100%;\n            height: 100%;\n\n            img {\n              width: 100%;\n              height: auto;\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"tag\">\n    <placeholder\n      :data=\"tagStore.tags.length\"\n      :fetching=\"tagStore.fetching\"\n      :i18n-key=\"LANGUAGE_KEYS.TAG_PLACEHOLDER\"\n    >\n      <template #loading>\n        <ul class=\"tag-list-skeleton\" key=\"skeleton\">\n          <li v-for=\"item in 14\" :key=\"item\" class=\"item\">\n            <skeleton-line />\n          </li>\n        </ul>\n      </template>\n      <template #default>\n        <div class=\"tag-list\" key=\"list\">\n          <router-link\n            class=\"item\"\n            :title=\"tag.description\"\n            :to=\"getTagArchiveRoute(tag.slug)\"\n            :key=\"index\"\n            v-for=\"(tag, index) in tagStore.tags\"\n          >\n            <i class=\"iconfont\" :class=\"getTagIcon(tag)\" />\n            <span class=\"name\">\n              <i18n :zh=\"tag.name\" :en=\"tag.slug\" />\n              <span class=\"count\">({{ tag.count || 0 }})</span>\n            </span>\n          </router-link>\n        </div>\n      </template>\n    </placeholder>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { useTagStore } from '/@/store/tag'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { getTagArchiveRoute } from '/@/transforms/route'\n  import { getExtendsValue } from '/@/transforms/state'\n\n  export default defineComponent({\n    name: 'PCAsideTag',\n    setup() {\n      const tagStore = useTagStore()\n      const getTagIcon = (tag: any) => {\n        return getExtendsValue(tag, 'icon') || 'icon-tag'\n      }\n\n      return {\n        LANGUAGE_KEYS,\n        tagStore,\n        getTagIcon,\n        getTagArchiveRoute\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @use 'sass:math';\n  @import 'src/styles/init.scss';\n\n  .tag {\n    margin-bottom: 0;\n    overflow-y: auto;\n    width: 100%;\n    border-top: $gap solid transparent;\n    border-bottom: $gap solid transparent;\n\n    .tag-list-skeleton {\n      display: flex;\n      flex-wrap: wrap;\n      list-style: none;\n      padding: 0;\n      margin: 0 $gap;\n      overflow: hidden;\n\n      .item {\n        width: calc(50% - #{math.div($gap, 2)});\n        height: 1.4em;\n        margin-right: 0;\n        margin-bottom: $gap;\n\n        &:nth-child(2n-1) {\n          margin-right: $gap;\n        }\n        &:nth-child(4n-1) {\n          width: 30%;\n          margin-right: $gap;\n        }\n        &:nth-child(4n) {\n          width: calc(70% - #{$gap});\n        }\n        &:nth-last-child(1),\n        &:nth-last-child(2) {\n          margin-bottom: 0;\n        }\n      }\n    }\n\n    .tag-list {\n      list-style: none;\n      padding: 0;\n      overflow: hidden;\n      margin-left: $gap;\n      margin-top: -$gap;\n\n      .item {\n        $height: 2em;\n        display: inline-flex;\n        margin-right: $sm-gap;\n        margin-top: $gap;\n        height: $height;\n        line-height: $height;\n        font-size: $font-size-h6;\n        text-transform: capitalize;\n        font-family: $font-family-normal;\n        @include radius-box($xs-radius);\n\n        .iconfont {\n          width: 2em;\n          text-align: center;\n          background-color: $module-bg-darker-1;\n          @include background-transition();\n        }\n\n        .name {\n          display: block;\n          padding: 0 $sm-gap;\n          @include background-transition();\n\n          .count {\n            margin-left: $xs-gap;\n          }\n        }\n\n        &.link-active {\n          .iconfont {\n            color: $module-bg-opaque;\n            background-color: $primary-translucent;\n          }\n          .name {\n            background-color: $primary;\n            color: $text-reversal;\n          }\n        }\n\n        &:not(.link-active) {\n          .name {\n            background-color: $module-bg-hover;\n          }\n\n          &:hover {\n            .iconfont {\n              background-color: $module-bg-hover;\n            }\n            .name {\n              background-color: $module-bg-darker-3;\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"nav\" v-if=\"article\">\n    <button\n      class=\"link\"\n      :title=\"article.title\"\n      @click=\"handleLink(ANCHORS.ARTICLE_CONTENT_ELEMENT_ID)\"\n    >\n      <i class=\"iconfont icon-read\"></i>\n      <span v-if=\"headings.length\" class=\"title\">{{ article.title }}</span>\n      <span v-else class=\"title\">\n        <i18n>\n          <template #zh>正文（共 {{ article.content.length }} 字）</template>\n          <template #en>Article content ({{ article.content.length }} words)</template>\n        </i18n>\n      </span>\n    </button>\n    <div class=\"link\" v-if=\"headings.length\">\n      <i class=\"iconfont icon-mood\"></i>\n      <i18n>\n        <template #zh>共 {{ article.content.length }} 字，需阅读 {{ readTime }} 分钟</template>\n        <template #en>{{ article.content.length }} words, take {{ readTime }} minutes</template>\n      </i18n>\n    </div>\n    <div class=\"catalogue\" v-if=\"headings.length\">\n      <ul class=\"list\" :class=\"`indent-${minHeadingLevel}`\">\n        <li\n          class=\"item\"\n          :key=\"index\"\n          :title=\"heading.text\"\n          :class=\"`level-${heading.level}`\"\n          v-for=\"(heading, index) in headings\"\n          @click=\"handleLink(heading.id)\"\n        >\n          <i class=\"level iconfont\" :class=\"`icon-h-${heading.level}`\"></i>\n          <span class=\"text\">{{ heading.text }}</span>\n        </li>\n      </ul>\n    </div>\n    <button class=\"link\" @click=\"handleLink(ANCHORS.ARTICLE_SHARE_ELEMENT_ID)\">\n      <i class=\"iconfont icon-share\"></i>\n      <i18n zh=\"分享\" en=\"Share\" />\n    </button>\n    <button class=\"link\" @click=\"handleLink(ANCHORS.ARTICLE_META_ELEMENT_ID)\">\n      <i class=\"iconfont icon-clock\"></i>\n      <i18n zh=\"元始\" en=\"Meta\" />\n      <span class=\"separator\">|</span>\n      <span class=\"meta\">\n        <i class=\"iconfont icon-eye\"></i>\n        <span>{{ article.meta.views }}</span>\n      </span>\n      <span class=\"separator\">|</span>\n      <span class=\"meta\">\n        <i class=\"like-icon iconfont icon-heart\"></i>\n        <span>{{ article.meta.likes }}</span>\n      </span>\n    </button>\n    <button class=\"link\" @click=\"handleLink(ANCHORS.ARTICLE_RELETED_ELEMENT_ID)\">\n      <i class=\"iconfont icon-category\"></i>\n      <i18n zh=\"相关文章\" en=\"Related articles\" />\n      <span>&nbsp;({{ article.related.length }})</span>\n    </button>\n    <button class=\"link\" @click=\"handleLink(ANCHORS.COMMENT_ELEMENT_ID)\">\n      <i class=\"iconfont icon-comment\"></i>\n      <i18n zh=\"评论\" en=\"Comments\" />\n      <span>&nbsp;({{ article.meta.comments }})</span>\n    </button>\n    <button class=\"link\" @click=\"handleLink(ANCHORS.COMMENT_PUBLISHER_ELEMENT_ID)\">\n      <i class=\"iconfont icon-edit\"></i>\n      <i18n zh=\"发布评论\" en=\"Pulish comment\" />\n    </button>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed } from 'vue'\n  import * as ANCHORS from '/@/constants/anchor'\n  import { useArticleDetailStore } from '/@/store/article'\n  import { scrollToElementAnchor } from '/@/utils/scroller'\n\n  export default defineComponent({\n    name: 'PCAsideNav',\n    setup() {\n      const articleDetailStore = useArticleDetailStore()\n      const article = computed(() => articleDetailStore.article)\n      const headings = computed(() => {\n        const result = [...(articleDetailStore.defaultContent?.headings || [])]\n        if (articleDetailStore.isLongContent && articleDetailStore.renderedFullContent) {\n          result.push(...(articleDetailStore.moreContent?.headings || []))\n        }\n        return result\n      })\n\n      const minHeadingLevel = computed(() => {\n        return Math.min(...headings.value.map((heading) => heading.level))\n      })\n\n      const readTime = computed(() => {\n        const words = article.value?.content.length || 0\n        const minutes = Math.round(words / 400)\n        return minutes < 1 ? 1 : minutes\n      })\n\n      const handleLink = (elementID: string) => {\n        scrollToElementAnchor(elementID)\n      }\n\n      return {\n        ANCHORS,\n        article,\n        headings,\n        minHeadingLevel,\n        readTime,\n        handleLink\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .nav {\n    padding: $gap;\n    display: flex;\n    flex-direction: column;\n\n    .link,\n    .catalogue {\n      display: block;\n      width: 100%;\n      border: 1px dashed $module-bg-hover;\n      border-radius: $sm-radius;\n      margin-bottom: $gap;\n      text-align: left;\n    }\n\n    .link {\n      flex-shrink: 0;\n      padding: 0 $gap;\n      height: 3rem;\n      line-height: 3rem;\n      @include text-overflow();\n      &:last-child {\n        margin-bottom: 0;\n      }\n\n      &:hover {\n        color: $primary;\n        border-color: $primary;\n      }\n\n      .iconfont {\n        margin-right: $sm-gap;\n      }\n\n      .title {\n        font-weight: bold;\n      }\n\n      .separator {\n        margin: 0 $gap;\n        color: $text-dividers;\n      }\n\n      .meta {\n        .like-icon {\n          color: $red;\n        }\n      }\n    }\n\n    .catalogue {\n      padding: $sm-gap $gap;\n      overflow-y: auto;\n      max-height: 60%;\n\n      .list {\n        padding: 0;\n        margin: 0;\n        list-style: none;\n        padding-left: $xs-gap;\n\n        &.indent-2 {\n          margin-left: -$font-size-h4;\n        }\n        &.indent-3 {\n          margin-left: -$font-size-h4 * 2;\n        }\n        &.indent-4 {\n          margin-left: -$font-size-h4 * 3;\n        }\n        &.indent-5 {\n          margin-left: -$font-size-h4 * 4;\n        }\n        &.indent-6 {\n          margin-left: -$font-size-h4 * 5;\n        }\n\n        .item {\n          cursor: pointer;\n          line-height: 2.4em;\n          @include text-overflow();\n          &:hover {\n            color: $primary;\n            .iconfont {\n              color: $primary;\n            }\n\n            .text {\n              font-weight: bold;\n              border-color: $primary;\n            }\n          }\n\n          .level {\n            margin-right: $xs-gap;\n            color: $text-disabled;\n          }\n\n          .text {\n            padding-bottom: 3px;\n            border-bottom: 1px dotted $text-dividers;\n          }\n\n          &.level-2 {\n            padding-left: $font-size-h4;\n          }\n          &.level-3 {\n            padding-left: $font-size-h4 * 2;\n          }\n          &.level-4 {\n            padding-left: $font-size-h4 * 3;\n          }\n          &.level-5 {\n            padding-left: $font-size-h4 * 4;\n          }\n          &.level-6 {\n            padding-left: $font-size-h4 * 5;\n          }\n        }\n      }\n\n      &:hover {\n        border-color: $primary;\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"calendar\">\n    <!-- header -->\n    <div class=\"header\">\n      <button class=\"item arrow\" @click=\"toPrevMonth\">\n        <i class=\"iconfont icon-prev\"></i>\n      </button>\n      <span class=\"item year-month\">{{ headerText }}</span>\n      <button class=\"item arrow\" @click=\"toNextMonth\">\n        <i class=\"iconfont icon-next\"></i>\n      </button>\n    </div>\n    <!-- weekdays -->\n    <ul class=\"weekdays\">\n      <li v-for=\"(day, index) in weekDayTexts\" :key=\"index\">{{ day }}</li>\n    </ul>\n    <!-- days -->\n    <ul class=\"days\">\n      <li v-for=\"(item, index) in tableView.table\" :key=\"index\">\n        <span\n          class=\"item\"\n          :class=\"{\n            today: isToday(item),\n            other: item.month !== tableView.month\n          }\"\n          @click=\"handleDayClick(item)\"\n        >\n          <slot v-bind=\"item\">{{ item.day }}</slot>\n        </span>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, reactive, computed } from 'vue'\n  import { useEnhancer } from '../../app/enhancer'\n  import {\n    dateToHuman,\n    humanToDate,\n    cloneDate,\n    isSameHumanDay,\n    textHumanizer,\n    humanDateToYMD,\n    HumanDate,\n    TEXT_MAP\n  } from '/@/transforms/moment'\n\n  export default defineComponent({\n    name: 'PcAsideCalendar',\n    setup(_, context) {\n      const { i18n, isZhLang } = useEnhancer()\n      const today = dateToHuman(new Date())\n      const tableView = reactive({\n        month: 0,\n        year: 1970,\n        table: [] as Array<HumanDate>\n      })\n\n      const weekDayTexts = computed(() => {\n        return textHumanizer(i18n.language.value as any)(TEXT_MAP.WEEKDAYS)\n      })\n\n      const headerText = computed(() => {\n        const isSameTodayTable = tableView.month === today.month && tableView.year === today.year\n\n        if (isZhLang.value) {\n          const yearText = `${tableView.year} 年`\n          const monthText = ` ${tableView.month} 月`\n          const dayText = isSameTodayTable ? ` ${today.day} 日` : ''\n          return yearText + monthText + dayText\n        }\n\n        return humanDateToYMD(isSameTodayTable ? today : tableView, ' / ')\n      })\n\n      const setTable = (humanDate: Omit<HumanDate, 'day' | 'week'>) => {\n        const table: HumanDate[] = []\n        const firstDayDate = humanToDate({ ...humanDate, day: 1 })\n        const firstDayWeek = dateToHuman(firstDayDate).week\n\n        // before days\n        for (let i = firstDayWeek - 1; i >= 0; i--) {\n          const date = cloneDate(firstDayDate)\n          date.setDate(date.getDate() - i)\n          table.push(dateToHuman(date))\n        }\n\n        // after days\n        const todoDays = 35 - table.length\n        for (let i = 1; i <= todoDays; i++) {\n          const date = cloneDate(firstDayDate)\n          date.setDate(date.getDate() + i)\n          table.push(dateToHuman(date))\n        }\n\n        Object.assign(tableView, {\n          year: humanDate.year,\n          month: humanDate.month,\n          table\n        })\n      }\n\n      const toPrevMonth = () => {\n        const isPrevYear = tableView.month - 1 <= 0\n        setTable({\n          year: tableView.year - (isPrevYear ? 1 : 0),\n          month: isPrevYear ? 12 : tableView.month - 1\n        })\n      }\n\n      const toNextMonth = () => {\n        const isNextYear = tableView.month + 1 >= 13\n        setTable({\n          year: tableView.year + (isNextYear ? 1 : 0),\n          month: isNextYear ? 1 : tableView.month + 1\n        })\n      }\n\n      const handleDayClick = (date: HumanDate) => {\n        if (date.month < tableView.month) {\n          toPrevMonth()\n        } else if (date.month > tableView.month) {\n          toNextMonth()\n        }\n      }\n\n      // init table\n      setTable({\n        year: today.year,\n        month: today.month\n      })\n\n      return {\n        tableView,\n        headerText,\n        weekDayTexts,\n        toPrevMonth,\n        toNextMonth,\n        handleDayClick,\n        isToday: (target) => isSameHumanDay(target, today)\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .calendar {\n    min-height: 17em;\n\n    > .header {\n      padding: 0;\n      margin-bottom: $gap;\n      overflow: hidden;\n      display: flex;\n      justify-content: space-between;\n\n      .item {\n        height: 2em;\n        line-height: 2em;\n        text-align: center;\n\n        &.arrow {\n          width: 2em;\n          background-color: $module-bg-darker-1;\n          border-radius: $xs-radius;\n          cursor: pointer;\n          @include background-transition();\n\n          &:hover {\n            background-color: $module-bg-hover;\n          }\n        }\n\n        &.year-month {\n          font-weight: bold;\n        }\n      }\n    }\n\n    > .days,\n    > .weekdays {\n      list-style: none;\n      padding: 0;\n      margin: 0;\n      overflow: hidden;\n      margin-bottom: $sm-gap;\n\n      > li {\n        display: block;\n        float: left;\n        width: 14.28%;\n        text-align: center;\n      }\n    }\n\n    > .weekdays {\n      height: 2em;\n      line-height: 2em;\n    }\n\n    > .days-loading {\n      width: 100%;\n      height: 14rem;\n    }\n\n    > .days {\n      min-height: 10em;\n      margin-bottom: 0;\n      position: relative;\n\n      > li {\n        line-height: 2.5em;\n\n        > .item {\n          display: block;\n          border-radius: 100%;\n          @include background-transition();\n\n          > a {\n            display: block;\n          }\n\n          &:hover {\n            background-color: $module-bg-darker-1;\n          }\n\n          &.today {\n            background-color: $module-bg-hover;\n          }\n\n          &.active {\n            color: $text-reversal;\n            background-color: $primary;\n          }\n\n          &.other {\n            opacity: 0.3;\n            cursor: initial;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <aside :id=\"ASIDE_ELEMENT_ID\" class=\"aside\" ref=\"element\">\n    <div class=\"module\">\n      <aside-search />\n    </div>\n    <div class=\"module\">\n      <aside-article />\n    </div>\n    <client-only transition>\n      <div class=\"module mammon\">\n        <aside-mammon\n          @index-change=\"handleStandingAdSlideChange\"\n          @ready=\"handleStandingAdSwiperReady\"\n        />\n      </div>\n    </client-only>\n    <div class=\"module calendar\">\n      <calendar>\n        <template #default=\"humanDate\">\n          <router-link\n            class=\"date-link\"\n            v-if=\"canPushRouteWithDay(humanDate)\"\n            :to=\"getDateRoute(humanDate)\"\n          >\n            {{ humanDate.day }}\n          </router-link>\n          <span v-else>{{ humanDate.day }}</span>\n        </template>\n      </calendar>\n    </div>\n    <div class=\"module mammon-square\">\n      <client-only>\n        <Adsense\n          ins-class=\"adsbygoogle\"\n          ins-style=\"display:inline-block;width:250px;height:250px\"\n          data-ad-slot=\"6138120718\"\n          class=\"content\"\n        />\n      </client-only>\n    </div>\n    <div :id=\"ASIDE_STICKY_ELEMENT_ID\" class=\"aside-sticky-box\">\n      <client-only>\n        <div class=\"module mammon\" v-if=\"renderStickyAd\">\n          <aside-mammon :index=\"adIndex\" @index-change=\"handleStickyAdIndexChange\" />\n        </div>\n      </client-only>\n      <div class=\"module\">\n        <client-only v-if=\"isArticlePage\">\n          <aside-nav class=\"sticky-module\" />\n        </client-only>\n        <aside-tag class=\"sticky-module\" v-else />\n      </div>\n    </div>\n  </aside>\n</template>\n\n<script lang=\"ts\">\n  import { useRoute } from 'vue-router'\n  import { defineComponent, ref, computed, onMounted, onBeforeUnmount, nextTick } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import SwiperClass from '/@/services/swiper'\n  import { ASIDE_ELEMENT_ID, MAIN_CONTENT_ELEMENT_ID } from '/@/constants/anchor'\n  import { getDateArchiveRoute, isArticleDetail } from '/@/transforms/route'\n  import { humanDateToYMD, dateToHuman, HumanDate } from '/@/transforms/moment'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import AsideSearch from './search.vue'\n  import AsideArticle from './article.vue'\n  import AsideMammon from './mammon.vue'\n  import AsideTag from './tag.vue'\n  import AsideNav from './nav.vue'\n  import Calendar from '/@/components/widget/calendar.vue'\n\n  const ASIDE_STICKY_ELEMENT_ID = 'aside-sticky-module'\n\n  export default defineComponent({\n    name: 'PCAside',\n    components: {\n      AsideSearch,\n      AsideArticle,\n      AsideMammon,\n      Calendar,\n      AsideTag,\n      AsideNav\n    },\n    setup() {\n      const route = useRoute()\n      const { i18n } = useEnhancer()\n      const isArticlePage = computed(() => isArticleDetail(route.name))\n\n      // polyfill sticky event\n      let stickyEvents: any = null\n      const today = dateToHuman(new Date())\n      const element = ref<HTMLDivElement>(null as any)\n      const adIndex = ref(0)\n      const renderStickyAd = ref(false)\n      const swiper = ref<SwiperClass>()\n\n      const canPushRouteWithDay = (targetDate: HumanDate) => {\n        if (targetDate.year > today.year) {\n          return false\n        }\n        if (targetDate.month > today.month) {\n          return false\n        }\n        if (\n          targetDate.year == today.year &&\n          targetDate.month == today.month &&\n          targetDate.day > today.day\n        ) {\n          return false\n        }\n        return true\n      }\n\n      const getDateRoute = (humanDate: HumanDate) => {\n        return getDateArchiveRoute(humanDateToYMD(humanDate))\n      }\n\n      const handleStandingAdSwiperReady = (_swiper: SwiperClass) => {\n        swiper.value = _swiper\n      }\n      const handleStandingAdSlideChange = (index: number) => {\n        adIndex.value = index\n      }\n      const handleStickyAdIndexChange = (index: number) => {\n        swiper.value?.slideToLoop(index)\n      }\n\n      const handleStickyStateChange = (event) => {\n        // workaround: when (main container height >= aside height) & isSticky -> render sticky ad\n        const asideElementHeight = element.value.clientHeight\n        const targetElement = document.getElementById(MAIN_CONTENT_ELEMENT_ID)?.children?.[0]\n        if (targetElement) {\n          const mainContentElementHeight = targetElement.clientHeight\n          const isFeasible = mainContentElementHeight >= asideElementHeight\n          renderStickyAd.value = isFeasible && event.detail.isSticky\n        }\n      }\n\n      onMounted(() => {\n        nextTick(() => {\n          stickyEvents = new window.$StickyEvents({\n            enabled: true,\n            stickySelector: `#${ASIDE_STICKY_ELEMENT_ID}`\n          })\n          stickyEvents.stickyElements?.[0]?.addEventListener(\n            window.$StickyEvents.CHANGE,\n            handleStickyStateChange\n          )\n        })\n      })\n\n      onBeforeUnmount(() => {\n        stickyEvents.stickyElements?.[0]?.removeEventListener(\n          window.$StickyEvents.CHANGE,\n          handleStickyStateChange\n        )\n        stickyEvents.disableEvents(false)\n        stickyEvents = null\n      })\n\n      return {\n        isArticlePage,\n        LANGUAGE_KEYS,\n        ASIDE_ELEMENT_ID,\n        ASIDE_STICKY_ELEMENT_ID,\n        t: i18n.t,\n        adIndex,\n        renderStickyAd,\n        element,\n        canPushRouteWithDay,\n        getDateRoute,\n        handleStandingAdSwiperReady,\n        handleStandingAdSlideChange,\n        handleStickyAdIndexChange\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .aside {\n    display: block;\n    width: $aside-width;\n    margin: 0;\n    margin-left: $lg-gap;\n\n    .module {\n      margin-bottom: $lg-gap;\n      @include radius-box($sm-radius);\n      @include common-bg-module();\n\n      &.calendar {\n        padding: $gap;\n\n        .date-link {\n          display: block;\n          border-radius: 100%;\n\n          &.link-active {\n            background-color: $primary;\n            color: $text-reversal;\n          }\n        }\n      }\n\n      &.mammon {\n        width: 100%;\n      }\n\n      &.mammon-square {\n        height: $aside-width;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n\n        .content {\n          height: 250px;\n          width: 250px;\n          overflow: hidden;\n        }\n      }\n\n      .sticky-module {\n        max-height: calc(100vh - 88px - #{$header-height + $lg-gap + $lg-gap + $lg-gap});\n      }\n    }\n\n    .aside-sticky-box {\n      position: sticky;\n      top: $header-height + $lg-gap;\n      width: $aside-width;\n    }\n  }\n</style>\n","<template>\n  <header :id=\"HEADER_ELEMENT_ID\" class=\"header\" :class=\"{ 'enable-nav': isEnabledNav }\">\n    <div class=\"header-container container\">\n      <div class=\"header-header\">\n        <uimage cdn src=\"/images/logo.svg\" class=\"header-logo\" />\n        <span class=\"header-slogan\">\n          <i18n :lkey=\"LANGUAGE_KEYS.APP_SLOGAN\" />\n        </span>\n        <router-link to=\"/\" class=\"header-link\" :title=\"t(LANGUAGE_KEYS.APP_SLOGAN)\" />\n      </div>\n      <div class=\"toolbox\">\n        <button class=\"button menu\" v-if=\"isEnabledNav\">\n          <i class=\"iconfont icon-top-menu\"></i>\n        </button>\n        <button\n          class=\"button language\"\n          title=\"Switch language\"\n          :class=\"language\"\n          @click=\"tooggleLanguage\"\n        >\n          {{ language || '-' }}\n        </button>\n        <button class=\"button theme\" :class=\"theme\" @click=\"toggleTheme\">\n          <i class=\"iconfont\" :class=\"themeIcon\"></i>\n        </button>\n      </div>\n    </div>\n    <div class=\"header-nav\">\n      <nav class=\"nav-list container\">\n        <template v-for=\"(menu, index) in menus\" :key=\"menu.id\">\n          <span class=\"separator\" v-if=\"index > 0\"></span>\n          <router-link\n            v-if=\"menu.route\"\n            class=\"item\"\n            :class=\"[menu.id, { hot: menu.hot }]\"\n            :to=\"menu.route\"\n            exact\n          >\n            <i class=\"iconfont\" :class=\"menu.icon\"></i>\n            <span class=\"text\">\n              <i18n :lkey=\"menu.i18nKey\" />\n            </span>\n            <span v-if=\"menu.hot\" class=\"superscript\">\n              <i class=\"iconfont icon-hot-fill\"></i>\n            </span>\n          </router-link>\n          <ulink\n            v-else-if=\"menu.url\"\n            class=\"item\"\n            :class=\"[menu.id, { hot: menu.hot }]\"\n            :href=\"menu.url\"\n          >\n            <i class=\"iconfont\" :class=\"menu.icon\"></i>\n            <span class=\"text\">\n              <i18n :lkey=\"menu.i18nKey\" />\n            </span>\n            <span v-if=\"menu.hot\" class=\"superscript\">\n              <i class=\"iconfont icon-hot-fill\"></i>\n            </span>\n          </ulink>\n        </template>\n      </nav>\n    </div>\n  </header>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed } from 'vue'\n  import { HEADER_ELEMENT_ID } from '/@/constants/anchor'\n  import { Theme } from '/@/services/theme'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { GAEventActions, GAEventTags } from '/@/constants/gtag'\n  import { menus } from './menu'\n\n  export default defineComponent({\n    name: 'PCHeader',\n    setup() {\n      const { i18n, gtag, theme, globalState } = useEnhancer()\n      // 非常规布局则启用菜单\n      const isEnabledNav = computed(() => !globalState.layoutColumn.value.isNormal)\n\n      const themeValue = theme.theme\n      const themeIcon = computed(() => {\n        const themeIconMap = {\n          [Theme.Default]: 'icon-sun',\n          [Theme.Dark]: 'icon-moon'\n        }\n        return themeIconMap[themeValue.value]\n      })\n\n      const toggleTheme = () => {\n        theme.toggle()\n        gtag?.event('切换主题', {\n          event_category: GAEventActions.Toggle,\n          event_label: GAEventTags.Tool\n        })\n      }\n\n      const tooggleLanguage = () => {\n        i18n.toggle()\n        gtag?.event('系统语言', {\n          event_category: GAEventActions.Toggle,\n          event_label: GAEventTags.Tool\n        })\n      }\n\n      return {\n        menus,\n        HEADER_ELEMENT_ID,\n        LANGUAGE_KEYS,\n        isEnabledNav,\n        t: i18n.t,\n        language: i18n.language,\n        tooggleLanguage,\n        theme: themeValue,\n        themeIcon,\n        toggleTheme\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .header {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: $header-height;\n    z-index: $z-index-header;\n    background-color: $module-bg;\n    @include backdrop-blur();\n\n    &.enable-nav:hover {\n      .header-nav {\n        @include visible();\n      }\n    }\n\n    .header-container {\n      height: 100%;\n      display: flex;\n      justify-content: space-between;\n\n      .header-header {\n        height: 100%;\n        display: flex;\n        position: relative;\n        align-items: center;\n        padding-left: $sm-gap;\n        width: 29em;\n        overflow: hidden;\n\n        @keyframes logo-blink {\n          0% {\n            mask-position: -30%;\n          }\n          100% {\n            mask-position: 666%;\n          }\n        }\n\n        .header-logo {\n          width: 11rem;\n          margin-right: $gap * 4;\n          filter: $theme-logo-rotate;\n          .logo-st {\n            fill: $primary;\n          }\n        }\n\n        .header-slogan {\n          color: $primary;\n          font-family: 'webfont-normal', DINRegular;\n        }\n\n        .header-link {\n          position: absolute;\n          width: 100%;\n          height: 100%;\n        }\n      }\n\n      .toolbox {\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        justify-content: center;\n        opacity: 0.6;\n        @include visibility-transition();\n        &:hover {\n          opacity: 1;\n        }\n\n        .button {\n          position: relative;\n          display: block;\n          text-transform: uppercase;\n          margin: 0 $gap;\n          width: 2rem;\n          height: 2rem;\n\n          &::before {\n            content: '';\n            display: block;\n            width: 50%;\n            height: 2px;\n            position: absolute;\n            left: 25%;\n            bottom: -2px;\n          }\n\n          &.menu {\n            cursor: none;\n            &::before {\n              background-color: $black;\n            }\n          }\n\n          &.theme {\n            &::before {\n              background-color: $primary;\n            }\n          }\n\n          &.language {\n            font-weight: bold;\n\n            &.en {\n              &::before {\n                background-color: $en-primary;\n              }\n            }\n            &.zh {\n              &::before {\n                background-color: $zh-primary;\n              }\n            }\n          }\n        }\n      }\n    }\n\n    .header-nav {\n      width: 100%;\n      height: 4rem;\n      background-color: $primary-lighter;\n      @include hidden();\n      @include visibility-transition();\n\n      .nav-list {\n        height: 100%;\n        display: flex;\n        justify-content: space-evenly;\n        align-items: center;\n\n        .separator {\n          height: 10%;\n          width: 1px;\n          background-color: $module-bg-translucent;\n        }\n\n        .item {\n          text-transform: uppercase;\n          color: $text-reversal;\n          @include visibility-transition();\n          opacity: 0.7;\n          &:hover {\n            opacity: 1;\n          }\n\n          &.link-active {\n            .text {\n              padding-bottom: 4px;\n              border-bottom: 2px solid;\n            }\n          }\n\n          > .iconfont {\n            margin-right: $sm-gap;\n          }\n\n          .superscript {\n            margin-left: $xs-gap;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <footer :id=\"FOOTER_ELEMENT_ID\" class=\"footer\">\n    <div class=\"container\">\n      <ulink class=\"ipc\" :href=\"VALUABLE_LINKS.FUCK_IPC\" v-if=\"false\">\n        陕 ICP 备 13004859 号-2\n      </ulink>\n      <a class=\"sitemap-btn\" target=\"_blank\" :href=\"VALUABLE_LINKS.SITE_MAP\">\n        <i18n :lkey=\"LANGUAGE_KEYS.SITE_MAP_XML\" />\n      </a>\n      <span class=\"separator\">|</span>\n      <i18n zh=\"由 \" en=\"Powered By \" />\n      <ulink class=\"item\" :href=\"VALUABLE_LINKS.GITHUB_BLOG_LIST\"> NodePress </ulink>\n      <i18n zh=\"、\" en=\", \" />\n      <ulink class=\"item\" :href=\"VALUABLE_LINKS.SURMON_ME\"> Vue </ulink>\n      <i18n zh=\" 和 日月星辰 强力驱动\" en=\" and solitarily\" />\n      <span class=\"separator\">|</span>\n      <i18n>\n        <template #zh>\n          <router-link :to=\"aboutPageUrl\" key=\"zh\">吾之臂躯</router-link>\n          <span> 行针步线</span>\n        </template>\n        <template #en>\n          <span>Designed By </span>\n          <router-link :to=\"aboutPageUrl\" key=\"en\">Me</router-link>\n        </template>\n      </i18n>\n    </div>\n  </footer>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { RouteName } from '/@/app/router'\n  import { FOOTER_ELEMENT_ID } from '/@/constants/anchor'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { getPageRoute } from '/@/transforms/route'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n\n  export default defineComponent({\n    name: 'PcFooter',\n    setup() {\n      return {\n        FOOTER_ELEMENT_ID,\n        VALUABLE_LINKS,\n        LANGUAGE_KEYS,\n        aboutPageUrl: getPageRoute(RouteName.About)\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .footer {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    height: $footer-height;\n    margin-top: $lg-gap;\n    @include common-bg-module();\n\n    .container {\n      color: $text-secondary;\n      font-size: $font-size-h6;\n      text-align: center;\n      text-transform: uppercase;\n\n      a {\n        border-bottom: 1px solid transparent;\n        &:hover {\n          border-color: initial;\n        }\n      }\n\n      .separator {\n        margin: 0 $sm-gap;\n      }\n\n      .ipc {\n        margin-right: $xs-gap;\n      }\n    }\n  }\n</style>\n","<template>\n  <li class=\"flower-item\" :style=\"styles\" :class=\"{ playing: state.playing }\">\n    {{ options.text }}\n  </li>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, reactive, nextTick, onMounted, onBeforeUnmount } from 'vue'\n\n  enum Event {\n    Ended = 'ended'\n  }\n\n  export default defineComponent({\n    name: 'WallFlowerItem',\n    props: {\n      options: {\n        type: Object,\n        required: true\n      },\n      zIndex: {\n        type: Number,\n        required: true\n      }\n    },\n    emits: [Event.Ended],\n    setup(props, context) {\n      const state = reactive({\n        // 播放时长\n        delay: 1,\n        // 定时器\n        timer: null as number | null,\n        // 播放状态\n        playing: false\n      })\n\n      const styles = computed(() => ({\n        top: props.options.y + 'px',\n        left: props.options.x + 'px',\n        'z-index': 99999 + props.zIndex\n      }))\n\n      const startAnimation = () => {\n        nextTick(() => {\n          // Start animation\n          setTimeout(() => {\n            state.playing = true\n          })\n\n          // End animation\n          state.timer = window.setTimeout(() => {\n            state.playing = false\n            nextTick(() => {\n              context.emit(Event.Ended, props.options.id)\n            })\n          }, state.delay * 1000)\n        })\n      }\n\n      startAnimation()\n      onMounted(startAnimation)\n      onBeforeUnmount(() => {\n        if (state.timer) {\n          clearTimeout(state.timer)\n          state.timer = null\n        }\n      })\n\n      return { state, styles }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .flower-item {\n    opacity: 1;\n    position: fixed;\n    display: block;\n    transform: translate3d(-50%, -50%, 0);\n    transition: opacity 0.5s;\n    color: $primary;\n    font-family: 'webfont-bolder', $font-family-normal;\n    font-size: $font-size-h3;\n\n    @keyframes flower-playing {\n      0% {\n        transform: translate3d(-50%, -50%, 0);\n      }\n      80% {\n        transform: translate3d(-50%, -400%, 0);\n        opacity: 0.8;\n      }\n      100% {\n        transform: translate3d(-50%, -500%, 0);\n        opacity: 0;\n      }\n    }\n\n    &.playing {\n      animation: flower-playing 1s ease 0s forwards;\n    }\n  }\n</style>\n","<template>\n  <div id=\"wallflower\">\n    <ul v-if=\"state.flowers.length\" class=\"garden-box\">\n      <flower\n        v-for=\"(flower, index) in state.flowers\"\n        :key=\"flower.id\"\n        :z-index=\"index + 1\"\n        :options=\"flower\"\n        @ended=\"handleAnimationEnd\"\n      />\n    </ul>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, reactive, onMounted, onBeforeUnmount } from 'vue'\n  import Flower from './flower.vue'\n\n  const FLOWERS = [\n    '富强',\n    '民主',\n    '文明',\n    '和谐',\n    '自由',\n    '平等',\n    '公正',\n    '法治',\n    '爱国',\n    '敬业',\n    '诚信',\n    '友善'\n  ]\n\n  export interface IFlower {\n    id: number\n    x: number\n    y: number\n    text: string\n  }\n\n  export default defineComponent({\n    name: 'WallFlowerGarden',\n    components: {\n      Flower\n    },\n    setup() {\n      const state = reactive({\n        id: 0,\n        flowers: [] as IFlower[],\n        contentIndex: -1\n      })\n\n      const handleClick = (event: MouseEvent) => {\n        state.contentIndex++\n        if (state.contentIndex >= FLOWERS.length) {\n          state.contentIndex = 0\n        }\n        state.flowers.push({\n          id: ++state.id,\n          x: event.x || event.clientX,\n          y: event.y || event.clientY,\n          text: FLOWERS[state.contentIndex]\n        } as IFlower)\n      }\n\n      onMounted(() => window.addEventListener('click', handleClick))\n      onBeforeUnmount(() => window.removeEventListener('click', handleClick))\n\n      const handleAnimationEnd = (id: number) => {\n        const targetIndex = state.flowers.findIndex((flower) => flower.id === id)\n        if (targetIndex > -1) {\n          state.flowers.splice(targetIndex, 1)\n        }\n      }\n\n      return {\n        state,\n        handleAnimationEnd\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  #wallflower {\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    padding: 0;\n    list-style: none;\n    z-index: $z-index-underground;\n\n    .garden-box {\n      width: 100%;\n      height: 100%;\n    }\n  }\n</style>\n","/**\n * @file Wallpaper state\n * @module store.wallpaper\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineStore } from 'pinia'\nimport { TunnelModule } from '/@/constants/tunnel'\nimport { Language } from '/@/language/data'\nimport tunnel from '/@/services/tunnel'\n\nexport const WALLPAPER_API_PATH = '/wallpaper/list'\n\nexport const useWallpaperStore = defineStore('wallpaper', {\n  state: () => ({\n    fetching: false,\n    wallpapers: null as any as {\n      [lang in Language]: Array<any>\n    }\n  }),\n  getters: {\n    papers: (state) => {\n      return (language: Language) => state.wallpapers?.[language]\n    }\n  },\n  actions: {\n    fetchPapers() {\n      // return data when exists\n      if (this.wallpapers) {\n        return Promise.resolve()\n      }\n\n      this.fetching = true\n      return tunnel\n        .dispatch(TunnelModule.Wallpaper)\n        .then((response) => {\n          this.wallpapers = response\n        })\n        .finally(() => {\n          this.fetching = false\n        })\n    }\n  }\n})\n","<template>\n  <div class=\"wall\">\n    <transition name=\"module\" mode=\"out-in\">\n      <div\n        ref=\"picture-box\"\n        :key=\"currentWallpaper.humanizedImageUrl\"\n        class=\"picture-box\"\n        :title=\"currentWallpaper.copyright\"\n        :style=\"{\n          backgroundImage: `url(${currentWallpaper.humanizedImageUrl})`\n        }\"\n      />\n    </transition>\n    <div class=\"story-box\">\n      <template v-if=\"currentWallpaper.title\">\n        <h2 class=\"title\">{{ currentWallpaper.title }}</h2>\n        <p class=\"sub-title\">{{ currentWallpaper.copyright }}</p>\n      </template>\n      <template v-else>\n        <h2 class=\"title lonely\">{{ currentWallpaper.copyright }}</h2>\n      </template>\n      <p class=\"desc\">{{ currentWallpaper.desc }}</p>\n      <div class=\"tools\">\n        <transition name=\"module\">\n          <ulink\n            key=\"location\"\n            class=\"location\"\n            :href=\"currentWallpaper.humanizedCopyrightUrl\"\n            :title=\"currentWallpaper.bsTitle\"\n          >\n            <i class=\"iconfont icon-location\"></i>\n            <span class=\"text\" v-if=\"currentWallpaper.bsTitle\">{{ currentWallpaper.bsTitle }}</span>\n          </ulink>\n        </transition>\n        <button class=\"button\" title=\"Prev\" :disabled=\"index <= 0\" @click=\"index--\">\n          <i class=\"iconfont icon-prev\"></i>\n        </button>\n        <button\n          class=\"button\"\n          title=\"Next\"\n          :disabled=\"index >= wallpapers.length - 1\"\n          @click=\"index++\"\n        >\n          <i class=\"iconfont icon-next\"></i>\n        </button>\n        <button class=\"button\" title=\"Close\" @click=\"handleClose\">\n          <i class=\"iconfont icon-cancel\"></i>\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, computed } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useWallpaperStore } from '/@/store/wallpaper'\n  import { Language } from '/@/language/data'\n\n  export enum WallpaperWallEvent {\n    Close = 'close'\n  }\n\n  export default defineComponent({\n    name: 'WallpaperWall',\n    emits: [WallpaperWallEvent.Close],\n    setup(_, context) {\n      const { i18n } = useEnhancer()\n      const wallpaperStore = useWallpaperStore()\n      const index = ref(0)\n      const wallpapers = computed(() => wallpaperStore.papers(i18n.language.value as Language))\n      const currentWallpaper = computed(\n        () => wallpapers.value?.length && wallpapers.value?.[index.value]\n      )\n\n      const handleClose = () => context.emit(WallpaperWallEvent.Close)\n\n      return {\n        index,\n        wallpapers,\n        currentWallpaper,\n        handleClose\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .wall {\n    position: relative;\n    overflow: auto;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    align-items: center;\n    width: 88vw;\n    height: 88vh;\n\n    .picture-box {\n      width: 100%;\n      height: 100%;\n      overflow: hidden;\n      background-repeat: no-repeat;\n      background-size: cover;\n    }\n\n    .story-box {\n      position: absolute;\n      padding: 2rem 4rem;\n      background-color: $module-bg-translucent;\n      bottom: 0;\n      width: 100%;\n      height: auto;\n\n      .title,\n      .sub-title,\n      .desc {\n        @include title-shadow();\n      }\n\n      .title {\n        margin-top: 0;\n        &.lonely {\n          margin-bottom: 3rem;\n        }\n      }\n\n      .desc {\n        line-height: 2rem;\n        margin-bottom: $gap * 2;\n      }\n\n      .tools {\n        .location,\n        .button {\n          display: block;\n          float: left;\n          line-height: 2.5;\n          padding: 0 $gap;\n          margin-right: $gap;\n          background-color: $module-bg;\n          @include background-transition();\n          @include radius-box($xs-radius);\n\n          &[disabled] {\n            opacity: 0.6;\n          }\n\n          &:not([disabled]) {\n            &:hover {\n              background-color: $module-bg-darker-1;\n            }\n          }\n        }\n\n        .location {\n          .text {\n            margin-left: $xs-gap;\n            border-bottom: 1px solid $text;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div id=\"wallpaper\" :class=\"{ dark: isDarkTheme }\">\n    <div class=\"switcher\" @click=\"toggleWallpaper\">\n      <div class=\"up\">\n        <span class=\"title\" :class=\"language\">\n          <i18n :lkey=\"LANGUAGE_KEYS.WALLPAPER\" />\n        </span>\n      </div>\n      <div class=\"down\"></div>\n    </div>\n  </div>\n  <client-only>\n    <popup :visible=\"isOnWallpaper\" @close=\"toggleWallpaper\">\n      <wallpapers @close=\"toggleWallpaper\" />\n    </popup>\n  </client-only>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, onMounted } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useWallpaperStore } from '/@/store/wallpaper'\n  import { GAEventActions, GAEventTags } from '/@/constants/gtag'\n  import { Language } from '/@/language/data'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import Wallpapers from './wall.vue'\n\n  export default defineComponent({\n    name: 'Wallpaper',\n    components: {\n      Wallpapers\n    },\n    setup() {\n      const { i18n, gtag, globalState, isDarkTheme } = useEnhancer()\n      const wallpaperStore = useWallpaperStore()\n      const isOnWallpaper = computed(() => globalState.switchBox.wallpaper)\n      const wallpapers = computed(() => wallpaperStore.papers(i18n.language.value as Language))\n\n      const toggleWallpaper = () => {\n        if (wallpapers.value?.length) {\n          globalState.switchTogglers.wallpaper()\n        } else {\n          alert('Something was wrong！')\n        }\n        if (globalState.switchBox.wallpaper) {\n          gtag?.event('今日壁纸', {\n            event_category: GAEventActions.Toggle,\n            event_label: GAEventTags.Tool\n          })\n        }\n      }\n\n      onMounted(() => {\n        wallpaperStore.fetchPapers()\n      })\n\n      return {\n        LANGUAGE_KEYS,\n        language: i18n.language,\n        isDarkTheme,\n        isOnWallpaper,\n        toggleWallpaper\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  #wallpaper {\n    $offset: 6px;\n    position: fixed;\n    left: 0;\n    top: 70%;\n    cursor: pointer;\n\n    &.dark {\n      .switcher {\n        .up {\n          .title {\n            color: $text-reversal;\n          }\n        }\n      }\n    }\n\n    .switcher {\n      width: 4rem;\n      height: 8rem;\n      opacity: 0.6;\n      display: block;\n      position: relative;\n      transform: translateX(-$offset * 2);\n      transition: opacity $transition-time-fast, transform $transition-time-fast;\n\n      &:hover {\n        opacity: 0.8;\n        transform: translateX(-$offset);\n      }\n\n      @keyframes wallpaper-y {\n        0% {\n          transform: translateY(-$offset);\n        }\n        50% {\n          transform: translateY($offset);\n        }\n        100% {\n          transform: translateY(-$offset);\n        }\n      }\n\n      > .up,\n      > .down {\n        width: 3rem;\n        height: 6.8rem;\n        position: absolute;\n        border-top-right-radius: $xs-radius;\n        border-bottom-right-radius: $xs-radius;\n      }\n\n      .down {\n        top: 0;\n        left: $offset;\n        z-index: $z-index-normal + 1;\n        background-color: $primary;\n        animation: wallpaper-y 1.5s 0.75s infinite;\n      }\n\n      .up {\n        top: 0;\n        left: 0;\n        z-index: $z-index-normal + 2;\n        background-color: $yellow;\n        animation: wallpaper-y 1.5s 0s infinite;\n\n        .title {\n          display: block;\n          width: 100%;\n          height: 100%;\n          line-height: 2rem;\n          font-family: 'webfont-bolder', DINRegular;\n          writing-mode: tb-rl;\n          color: $primary;\n\n          &.zh {\n            letter-spacing: -2.5px;\n          }\n\n          &.en {\n            text-align: center;\n            font-weight: bold;\n            letter-spacing: 2px;\n            text-transform: uppercase;\n            font-size: $font-size-small;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div id=\"background\">\n    <div class=\"image\" :class=\"{ dark: isDarkTheme }\"></div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { useEnhancer } from '../../app/enhancer'\n  export default defineComponent({\n    name: 'Background',\n    setup() {\n      const { isDarkTheme } = useEnhancer()\n      return { isDarkTheme }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  #background {\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    z-index: $z-index-underground;\n    background-color: $body-bg;\n\n    .image {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      opacity: 0.3;\n      background: cdn-url('/images/background.png');\n\n      &.dark {\n        opacity: 0.2;\n      }\n    }\n  }\n</style>\n","<template>\n  <div id=\"player\" v-if=\"music\">\n    <div class=\"cd\">\n      <img class=\"image\" :src=\"currentSong?.cover_art_url\" />\n      <button class=\"toggle-button\" :disabled=\"!music.state.ready\" @click=\"music.togglePlay\">\n        <i\n          class=\"iconfont\"\n          :class=\"music.state.playing ? 'icon-music-pause' : 'icon-music-play'\"\n        ></i>\n      </button>\n    </div>\n    <div class=\"panel\">\n      <div class=\"control\">\n        <button class=\"prev-song button\" :disabled=\"!music.state.ready\" @click=\"music.prevSong\">\n          <i class=\"iconfont icon-music-prev\"></i>\n        </button>\n        <button class=\"next-song button\" :disabled=\"!music.state.ready\" @click=\"music.nextSong\">\n          <i class=\"iconfont icon-music-next\"></i>\n        </button>\n        <button\n          class=\"muted-toggle button\"\n          :disabled=\"!music.state.ready\"\n          @click=\"music.toggleMuted\"\n        >\n          <i class=\"iconfont\" :class=\"muted ? 'icon-music-muted' : 'icon-music-unmuted'\"></i>\n        </button>\n      </div>\n      <div class=\"song\">\n        <router-link class=\"link\" :to=\"getPageRoute(RouteName.Music)\">\n          <span v-if=\"currentSong\"\n            >{{ currentSong.name }} By {{ currentSong.artist }} |\n            {{ currentSong.album || 'unknow' }}</span\n          >\n          <i18n v-else :lkey=\"LANGUAGE_KEYS.MUSIC_PLACEHOLDER\" />\n        </router-link>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { isClient } from '/@/app/environment'\n  import { RouteName } from '/@/app/router'\n  import { useI18n } from '/@/services/i18n'\n  import { useMusic } from '/@/services/music'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { getPageRoute } from '/@/transforms/route'\n\n  export default defineComponent({\n    name: 'PlayerControl',\n    setup() {\n      const i18n = useI18n()\n      const music = isClient ? useMusic() : null\n\n      return {\n        LANGUAGE_KEYS,\n        RouteName,\n        t: i18n.t,\n        music,\n        muted: music?.muted,\n        currentSong: music?.currentSong,\n        getPageRoute\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @use 'sass:math';\n  @import 'src/styles/init.scss';\n\n  #player {\n    $size: 5rem;\n    position: fixed;\n    right: 0;\n    top: 20%;\n    z-index: $z-index-toolbox;\n    opacity: 0.4;\n    transform: translateX(16rem);\n    transition: opacity $transition-time-fast, transform $transition-time-normal ease-in-out;\n    height: $size;\n    display: flex;\n    align-items: center;\n    background-color: $module-bg-opaque;\n    &:hover {\n      opacity: 1;\n      transform: translateX(0);\n    }\n\n    .cd {\n      position: relative;\n      display: block;\n      width: $size;\n      height: $size;\n      overflow: hidden;\n      border-top-left-radius: $sm-radius;\n      border-bottom-left-radius: $sm-radius;\n      border-left: 4px solid $primary;\n      background-color: $module-bg-darker-1;\n      background: linear-gradient(60deg, $primary, $red, $yellow, $accent, $primary) border-box;\n\n      .image {\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n        background-color: $module-bg-darker-1;\n        background-image: cdn-url('/images/page-music/background.jpg');\n        background-size: cover;\n      }\n\n      .toggle-button {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        border-radius: 100%;\n        font-size: $font-size-h1;\n        color: $white;\n      }\n    }\n\n    .panel {\n      padding: $gap;\n\n      .control {\n        display: flex;\n        justify-content: flex-start;\n        margin-bottom: $xs-gap;\n\n        > .button {\n          margin-right: $lg-gap;\n\n          &:hover {\n            .iconfont {\n              color: $link-color-hover;\n            }\n          }\n        }\n      }\n\n      .song {\n        max-width: 11rem;\n        @include text-overflow();\n\n        .link {\n          color: $text-secondary;\n          @include color-transition();\n\n          &:hover {\n            color: $link-color-hover;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div id=\"toolbox\">\n    <div class=\"container\">\n      <div class=\"tools\">\n        <ulink class=\"rss\" :href=\"VALUABLE_LINKS.RSS\" @mousedown=\"handleRSS\">\n          <i class=\"iconfont icon-rss\" />\n        </ulink>\n        <a class=\"feedback\" target=\"_blank\" :href=\"mailUrl\" :title=\"t(LANGUAGE_KEYS.FEEDBACK)\">\n          <i class=\"iconfont icon-mail-plane\" />\n        </a>\n        <button\n          class=\"to-page-top\"\n          :title=\"t(LANGUAGE_KEYS.TO_TOP)\"\n          @click=\"scrollToTop\"\n          @mouseover=\"setTopButtonState(true, true)\"\n          @mouseleave=\"setTopButtonState(false)\"\n        >\n          <i class=\"iconfont icon-totop\" />\n        </button>\n        <button\n          class=\"to-page-bottom\"\n          :title=\"t(LANGUAGE_KEYS.TO_BOTTOM)\"\n          @click=\"toBottom\"\n          @mouseover=\"setBottomButtonState(true, true)\"\n          @mouseleave=\"setBottomButtonState(false)\"\n        >\n          <i class=\"iconfont icon-tobottom\" />\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { GAEventActions, GAEventTags } from '/@/constants/gtag'\n  import { scrollTo, Easing } from '/@/utils/scroller'\n  import { scrollToTop } from '/@/utils/effects'\n  import { META, VALUABLE_LINKS } from '/@/config/app.config'\n\n  export default defineComponent({\n    name: 'Toolbox',\n    setup() {\n      const { i18n, gtag } = useEnhancer()\n\n      const animationFrameID = ref(0)\n      const isTopButtonMouseOver = ref(false)\n      const isBottomButtonMouseOver = ref(false)\n\n      const slowMoveToAnyWhere = () => {\n        const step = () => {\n          let targetScrollY = window.scrollY\n          const currentScrollY = document.body.scrollHeight - window.innerHeight\n          if (isBottomButtonMouseOver.value) {\n            targetScrollY += 1\n          }\n          if (isTopButtonMouseOver.value) {\n            targetScrollY -= 1\n          }\n          if (targetScrollY < 0) {\n            targetScrollY = 0\n          } else if (targetScrollY >= currentScrollY) {\n            targetScrollY = currentScrollY\n          }\n          const canScrollTo = targetScrollY > 0 && targetScrollY < currentScrollY\n          if (!canScrollTo) {\n            return false\n          }\n          window.scrollTo(0, targetScrollY)\n          if (isBottomButtonMouseOver.value || isTopButtonMouseOver.value) {\n            animationFrameID.value = window.requestAnimationFrame(step)\n          } else {\n            window.cancelAnimationFrame(animationFrameID.value)\n            return false\n          }\n        }\n        animationFrameID.value = window.requestAnimationFrame(step)\n      }\n\n      return {\n        VALUABLE_LINKS,\n        LANGUAGE_KEYS,\n        t: i18n.translate,\n        mailUrl: `mailto:${META.email}`,\n        scrollToTop,\n        toBottom() {\n          scrollTo(window.scrollY + window.innerHeight, 300, { easing: Easing.easeIn })\n        },\n        setTopButtonState(state: boolean, isStartSlow = false) {\n          isTopButtonMouseOver.value = state\n          window.cancelAnimationFrame(animationFrameID.value)\n          isStartSlow && slowMoveToAnyWhere()\n        },\n        setBottomButtonState(state: boolean, isStartSlow = false) {\n          isBottomButtonMouseOver.value = state\n          window.cancelAnimationFrame(animationFrameID.value)\n          isStartSlow && slowMoveToAnyWhere()\n        },\n        handleRSS() {\n          gtag?.event('RSS 订阅', {\n            event_category: GAEventActions.Click,\n            event_label: GAEventTags.Tool\n          })\n        }\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  #toolbox {\n    position: fixed;\n    z-index: $z-index-toolbox;\n    width: 100%;\n    bottom: 30rem;\n\n    .container {\n      $size: $lg-gap * 2.8;\n      position: relative;\n\n      .tools {\n        position: absolute;\n        right: -12rem;\n        width: $size;\n        overflow: hidden;\n\n        &:first-child {\n          border-top-left-radius: $xs-radius;\n          border-top-right-radius: $xs-radius;\n        }\n        &:last-child {\n          border-bottom-left-radius: $xs-radius;\n          border-bottom-right-radius: $xs-radius;\n        }\n\n        .rss,\n        .to-page-top,\n        .to-page-bottom,\n        .feedback {\n          display: block;\n          width: $size;\n          height: $size;\n          line-height: $size;\n          text-align: center;\n          @include common-bg-module($transition-time-fast);\n        }\n\n        @keyframes default-btn-bg {\n          0% {\n            color: $white;\n            background: $accent;\n          }\n          20% {\n            color: $white;\n            background: $red;\n          }\n          40% {\n            color: $white;\n            background: $primary;\n          }\n          60% {\n            color: $text;\n            background: $yellow;\n          }\n          80% {\n            color: $text;\n            background: $white;\n          }\n          100% {\n            color: $white;\n            background: $black;\n          }\n        }\n\n        .rss {\n          color: $rss-primary;\n          &:hover {\n            background-color: $rss-primary;\n            color: $white;\n          }\n        }\n\n        .feedback {\n          background-color: $primary-lighter;\n          color: $white;\n          &:hover {\n            background-color: $primary;\n          }\n        }\n\n        .to-page-bottom {\n          height: $size * 0.618;\n          line-height: $size * 0.618;\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"pc-main\">\n    <background />\n    <client-only>\n      <wallflower />\n    </client-only>\n    <template v-if=\"!layoutColumn.isFull\">\n      <share class=\"main-share\" />\n      <wallpaper />\n      <toolbox />\n      <client-only>\n        <player />\n      </client-only>\n    </template>\n    <header-view />\n    <main\n      :id=\"MAIN_ELEMENT_ID\"\n      class=\"main-container\"\n      :class=\"{ 'full-page': layoutColumn.isFull }\"\n    >\n      <nav-view v-if=\"layoutColumn.isNormal\" />\n      <div\n        :id=\"MAIN_CONTENT_ELEMENT_ID\"\n        class=\"main-content\"\n        :class=\"{\n          'layout-normal': layoutColumn.isNormal,\n          'layout-wide': layoutColumn.isWide,\n          'layout-full': layoutColumn.isFull\n        }\"\n      >\n        <slot />\n      </div>\n      <aside-view v-if=\"layoutColumn.isNormal\" />\n    </main>\n    <footer-view />\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { useGlobalState } from '/@/app/state'\n  import { MAIN_ELEMENT_ID, MAIN_CONTENT_ELEMENT_ID } from '/@/constants/anchor'\n  import NavView from './nav.vue'\n  import AsideView from './aside/index.vue'\n  import HeaderView from './header.vue'\n  import FooterView from './footer.vue'\n  import Wallflower from '/@/components/widget/wallflower/garden.vue'\n  import Wallpaper from '/@/components/widget/wallpaper/main.vue'\n  import Background from '/@/components/widget/background.vue'\n  import Player from '/@/components/widget/player.vue'\n  import Share from '/@/components/widget/share.vue'\n  import Toolbox from '/@/components/widget/toolbox.vue'\n\n  export default defineComponent({\n    name: 'PCMain',\n    components: {\n      Share,\n      Wallpaper,\n      Player,\n      Toolbox,\n      Wallflower,\n      Background,\n      HeaderView,\n      FooterView,\n      AsideView,\n      NavView\n    },\n    setup() {\n      const globalState = useGlobalState()\n      return {\n        MAIN_ELEMENT_ID,\n        MAIN_CONTENT_ELEMENT_ID,\n        layoutColumn: globalState.layoutColumn\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .pc-main {\n    padding-top: $header-height + $lg-gap;\n\n    @media screen and (max-width: 1200px) {\n      #theme,\n      #language,\n      .main-share {\n        display: none !important;\n      }\n    }\n\n    .main-share {\n      position: fixed;\n      top: 12%;\n      left: 0;\n      height: auto;\n      max-width: 4rem;\n      display: flex;\n      flex-direction: column;\n      opacity: 0.4;\n\n      &:hover {\n        opacity: 1;\n      }\n\n      ::v-deep(.share-ejector) {\n        $height: 2.1em;\n        width: 3rem;\n        height: $height;\n        line-height: $height;\n        font-size: $font-size-h4;\n        border-top-right-radius: $xs-radius;\n        border-bottom-right-radius: $xs-radius;\n        transition: width $transition-time-fast;\n        &:hover {\n          width: 120%;\n        }\n      }\n    }\n\n    .main-container {\n      position: relative;\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n      width: $container-width;\n\n      &.full-page {\n        width: 100%;\n      }\n\n      .main-content {\n        width: $main-width;\n        position: relative;\n        overflow: hidden;\n        transition: none;\n\n        &:-moz-full-screen {\n          overflow-y: auto;\n        }\n\n        &:-webkit-full-screen {\n          overflow-y: auto;\n        }\n\n        &:fullscreen {\n          overflow-y: auto;\n        }\n\n        &.layout-normal {\n          flex-grow: 1;\n        }\n\n        &.layout-wide {\n          width: 100%;\n          margin: 0;\n        }\n\n        &.layout-full {\n          width: 100%;\n          margin: -$lg-gap 0;\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <header class=\"header\">\n    <div class=\"search\" :class=\"{ actived: searchState.open }\">\n      <input\n        class=\"input\"\n        ref=\"inputElement\"\n        type=\"text\"\n        maxlength=\"16\"\n        required\n        :placeholder=\"t(LANGUAGE_KEYS.SEARCH_PLACEHOLDER)\"\n        v-model.trim=\"searchState.keyword\"\n        @keyup.enter.stop.prevent=\"submitSearch\"\n      />\n      <span class=\"close\" @click.stop.prevent=\"cancelSearch\">\n        <i class=\"iconfont icon-cancel\"></i>\n      </span>\n    </div>\n    <transition name=\"module\">\n      <div v-if=\"searchState.open\" class=\"search-mask\"></div>\n    </transition>\n    <nav class=\"navbar\">\n      <a href class=\"navbar-menu\" @click.stop.prevent=\"toggleSidebar\">\n        <i class=\"iconfont icon-menu\"></i>\n      </a>\n      <router-link to=\"/\" class=\"navbar-logo\">\n        <uimage cdn src=\"/images/logo.svg\" />\n      </router-link>\n      <a href class=\"navbar-search\" @click.stop.prevent=\"openSearch\">\n        <i class=\"iconfont icon-search\"></i>\n      </a>\n    </nav>\n  </header>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, reactive, ref, watch, onMounted, nextTick } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { RouteName } from '/@/app/router'\n  import { isSearchArchive } from '/@/transforms/route'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n\n  export default defineComponent({\n    name: 'MobileHeader',\n    setup() {\n      const { i18n, route, router, globalState } = useEnhancer()\n      const isOpenedSidebar = computed(() => globalState.switchBox.mobileSidebar)\n      const inputElement = ref<HTMLInputElement>(null as any)\n      const searchState = reactive({\n        open: false,\n        keyword: ''\n      })\n\n      onMounted(() => {\n        if (isSearchArchive(route.name as string)) {\n          searchState.keyword = route.params.keyword as string\n        }\n      })\n\n      const toggleSidebar = globalState.switchTogglers.mobileSidebar\n      const openSearch = () => {\n        searchState.open = true\n        nextTick(inputElement.value.focus)\n      }\n      const cancelSearch = () => {\n        searchState.open = false\n      }\n      const submitSearch = () => {\n        const keyword = searchState.keyword.trim()\n        if (keyword) {\n          router.push({\n            name: RouteName.SearchArchive,\n            params: { keyword }\n          })\n        }\n      }\n\n      watch(\n        () => router.currentRoute.value,\n        () => {\n          nextTick(() => {\n            cancelSearch()\n            toggleSidebar(false)\n          })\n        }\n      )\n\n      return {\n        t: i18n.t,\n        LANGUAGE_KEYS,\n        searchState,\n        inputElement,\n        openSearch,\n        submitSearch,\n        cancelSearch,\n        isOpenedSidebar,\n        toggleSidebar\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  header {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: $mobile-header-height;\n    background-color: $module-bg;\n    z-index: $z-index-header;\n    @include backdrop-blur();\n\n    .search-mask {\n      position: fixed;\n      z-index: $z-index-normal;\n      top: 0;\n      left: 0;\n      width: 100vw;\n      height: 100vh;\n      touch-action: none;\n      background-color: $module-bg-translucent;\n      @include backdrop-blur(3px);\n    }\n\n    .search {\n      position: absolute;\n      display: flex;\n      z-index: $z-index-normal + 1;\n      width: 100%;\n      height: $mobile-header-height;\n      top: 0;\n      left: 0;\n      opacity: 0;\n      background-color: $text-reversal;\n      transform: translateY(-100%);\n\n      > .input {\n        width: 80%;\n        height: 100%;\n        padding: 1em;\n      }\n\n      > .close {\n        width: 20%;\n        height: 100%;\n        line-height: $mobile-header-height;\n        text-align: center;\n      }\n\n      &.actived {\n        opacity: 1;\n        transform: translateY(0%);\n      }\n    }\n\n    .navbar {\n      width: 100%;\n      height: $mobile-header-height;\n      display: flex;\n      position: relative;\n      align-items: center;\n      justify-content: space-between;\n\n      .navbar-menu,\n      .navbar-search {\n        height: 100%;\n        width: 20%;\n        line-height: $mobile-header-height;\n        text-align: center;\n      }\n\n      .navbar-logo {\n        width: 30%;\n      }\n    }\n  }\n</style>\n","<template>\n  <footer class=\"footer\">\n    <div class=\"footer-content\">©{{ year }}&nbsp;&nbsp;{{ title }}</div>\n  </footer>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed } from 'vue'\n  import { META } from '/@/config/app.config'\n  export default defineComponent({\n    name: 'MobileFooter',\n    setup() {\n      return {\n        title: META.title,\n        year: new Date().getFullYear()\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .footer {\n    margin: 0;\n    @include common-bg-module();\n\n    .footer-content {\n      width: 100%;\n      height: $mobile-footer-height;\n      line-height: $mobile-footer-height;\n      font-size: $font-size-h6;\n      text-align: center;\n      text-transform: uppercase;\n    }\n  }\n</style>\n","<template>\n  <aside class=\"aside\" :class=\"{ open: open }\">\n    <div class=\"aside-user\">\n      <div class=\"avatar\">\n        <uimage :src=\"gravatar\" alt=\"Surmon\" />\n      </div>\n      <div class=\"profile\">\n        <h3 class=\"name\">Surmon</h3>\n        <p class=\"slogan\">\n          <i18n :lkey=\"LANGUAGE_KEYS.APP_SLOGAN\" />\n        </p>\n      </div>\n    </div>\n    <div class=\"aside-nav\">\n      <nav class=\"nav-list\">\n        <router-link to=\"/\" class=\"item\" exact>\n          <i class=\"iconfont icon-home-fill\"></i>\n          <i18n :lkey=\"LANGUAGE_KEYS.PAGE_HOME\" />\n        </router-link>\n        <router-link class=\"item\" :to=\"getCategoryArchiveRoute(CategorySlug.Code)\">\n          <i class=\"iconfont icon-code\"></i>\n          <i18n :lkey=\"LANGUAGE_KEYS.CATEGORY_CODE\" />\n        </router-link>\n        <router-link class=\"item\" :to=\"getCategoryArchiveRoute(CategorySlug.Insight)\">\n          <i class=\"iconfont icon-thinking\"></i>\n          <i18n :lkey=\"LANGUAGE_KEYS.CATEGORY_INSIGHT\" />\n        </router-link>\n        <ulink class=\"item\" :href=\"VALUABLE_LINKS.GITHUB\">\n          <i class=\"iconfont icon-github\"></i>\n          <i18n :lkey=\"LANGUAGE_KEYS.PAGE_GITHUB\" />\n        </ulink>\n        <router-link class=\"item\" :to=\"getPageRoute(RouteName.Archive)\">\n          <i class=\"iconfont icon-peachblossom\"></i>\n          <i18n :lkey=\"LANGUAGE_KEYS.PAGE_ARCHIVE\" />\n        </router-link>\n        <router-link class=\"item\" :to=\"getPageRoute(RouteName.Lens)\">\n          <i class=\"iconfont icon-lens\"></i>\n          <i18n :lkey=\"LANGUAGE_KEYS.PAGE_LENS\" />\n        </router-link>\n        <router-link class=\"item\" :to=\"getPageRoute(RouteName.About)\">\n          <i class=\"iconfont icon-user\"></i>\n          <i18n :lkey=\"LANGUAGE_KEYS.PAGE_ABOUT\" />\n        </router-link>\n        <router-link class=\"item\" :to=\"getPageRoute(RouteName.Job)\">\n          <i class=\"iconfont icon-horse\"></i>\n          <i18n :lkey=\"LANGUAGE_KEYS.PAGE_JOB\" />\n        </router-link>\n        <router-link class=\"item\" :to=\"getPageRoute(RouteName.Freelancer)\">\n          <i class=\"iconfont icon-tool\"></i>\n          <i18n :lkey=\"LANGUAGE_KEYS.PAGE_FREELANCER\" />\n        </router-link>\n        <router-link class=\"item guestbook\" :to=\"getPageRoute(RouteName.Guestbook)\">\n          <i class=\"iconfont icon-comment\"></i>\n          <i18n :lkey=\"LANGUAGE_KEYS.PAGE_GUESTBOOK\" />\n        </router-link>\n        <router-link class=\"item app\" :to=\"getPageRoute(RouteName.App)\">\n          <i class=\"iconfont icon-app\"></i>\n          <i18n :lkey=\"LANGUAGE_KEYS.PAGE_APP\" />\n        </router-link>\n      </nav>\n    </div>\n  </aside>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed } from 'vue'\n  import { RouteName, CategorySlug } from '/@/app/router'\n  import { useMetaStore } from '/@/store/meta'\n  import { getFileCDNUrl } from '/@/transforms/url'\n  import { getPageRoute, getCategoryArchiveRoute } from '/@/transforms/route'\n  import { LANGUAGE_KEYS } from '/@/language/key'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n\n  export default defineComponent({\n    name: 'MobileAside',\n    props: {\n      open: {\n        type: Boolean,\n        defualt: false\n      }\n    },\n    setup() {\n      const metaStore = useMetaStore()\n      const gravatar = computed(\n        () => metaStore.adminInfo.data?.gravatar || getFileCDNUrl('/images/gravatar.png')\n      )\n\n      return {\n        VALUABLE_LINKS,\n        LANGUAGE_KEYS,\n        RouteName,\n        CategorySlug,\n        getPageRoute,\n        getCategoryArchiveRoute,\n        gravatar\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  .aside {\n    display: block;\n    overflow: auto;\n    position: relative;\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    opacity: 0;\n    transform: scale(0.8, 0.8);\n    transition: $mobile-aside-transition;\n\n    &.open {\n      opacity: 1;\n      transform: scale(1, 1);\n    }\n\n    > .aside-user {\n      width: 100%;\n      display: flex;\n      align-items: flex-start;\n      flex-direction: column;\n      padding: $gap * 2;\n      padding-bottom: $gap;\n      border-bottom: 1px solid darken($mobile-aside-bg, 5%);\n\n      > .avatar {\n        width: 35%;\n\n        > img {\n          max-width: 100%;\n          border: 3px solid $module-bg;\n          @include radius-box($sm-radius);\n        }\n      }\n\n      > .profile {\n        color: $body-bg;\n        width: 100%;\n\n        > .name {\n          font-weight: bold;\n          margin-bottom: $gap;\n        }\n\n        > .slogan {\n          color: $primary;\n          @include text-overflow();\n        }\n      }\n    }\n\n    > .aside-nav {\n      width: 100%;\n\n      .nav-list {\n        padding: 0;\n        margin: 0;\n\n        .item {\n          display: block;\n          width: 100%;\n          height: 3em;\n          line-height: 3em;\n          padding: 0 1em;\n          margin-bottom: 0.5em;\n          border: none;\n          text-decoration: none;\n          text-transform: uppercase;\n          font-weight: 700;\n          color: $module-bg;\n\n          .iconfont {\n            font-weight: normal;\n          }\n\n          &.app {\n            margin-top: $gap;\n            color: $primary;\n          }\n\n          &:last-child {\n            margin-bottom: 0;\n          }\n\n          &.link-active {\n            color: $primary;\n            font-weight: bold;\n            background-color: $body-bg;\n          }\n\n          .iconfont {\n            width: 1em;\n            margin-right: 1em;\n            display: inline-block;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div id=\"mobile-main\">\n    <div id=\"aside\" :class=\"openedAsideClass\">\n      <aside-view :open=\"isOpenedSidebar\" />\n    </div>\n    <div id=\"main\" :class=\"openedAsideClass\">\n      <div v-if=\"isOpenedSidebar\" class=\"close-mask\" @click=\"closeMobileSidebar\" />\n      <header-view />\n      <main class=\"main-container\">\n        <slot></slot>\n      </main>\n      <footer-view />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import HeaderView from './header.vue'\n  import FooterView from './footer.vue'\n  import AsideView from './aside.vue'\n\n  export default defineComponent({\n    name: 'MobileMain',\n    components: {\n      HeaderView,\n      FooterView,\n      AsideView\n    },\n    setup() {\n      const { globalState } = useEnhancer()\n      const isOpenedSidebar = computed(() => globalState.switchBox.mobileSidebar)\n      const openedAsideClass = computed(() => ({ open: isOpenedSidebar.value }))\n      const closeMobileSidebar = () => {\n        globalState.switchTogglers.mobileSidebar(false)\n      }\n\n      return {\n        isOpenedSidebar,\n        openedAsideClass,\n        closeMobileSidebar\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  #mobile-main {\n    color: $text;\n    background-color: $module-bg-hover;\n    $aside-width: 68%;\n\n    #aside {\n      width: $aside-width;\n      position: fixed;\n      top: 0;\n      left: 0;\n      height: 100%;\n      background-color: $mobile-aside-bg;\n      transform: translate3d(-100%, 0, 0);\n      transition: $mobile-aside-transition;\n\n      &.open {\n        overflow: hidden;\n        transform: translate3d(0, 0, 0);\n        -webkit-overflow-scrolling: touch;\n      }\n    }\n\n    #main {\n      transition: $mobile-aside-transition;\n\n      &.open {\n        transform: translate3d($aside-width, 0, 0);\n      }\n\n      .close-mask {\n        position: fixed;\n        width: 100%;\n        height: 100%;\n        right: 0;\n        bottom: 0;\n        z-index: $z-index-top;\n        background-color: $module-bg-translucent;\n        @include backdrop-blur(3px);\n      }\n\n      .main-container {\n        position: relative;\n        overflow: hidden;\n        width: 100%;\n        margin: 0;\n        padding: ($mobile-header-height + $lg-gap) $gap $gap;\n        transition: width 0.35s;\n      }\n    }\n  }\n</style>\n","<template>\n  <div id=\"emoji-rain\" :class=\"{ active: state.kichikuing }\">\n    <canvas v-if=\"state.chambering\" ref=\"rainBase\" class=\"rain-base\"></canvas>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, reactive, nextTick, onMounted } from 'vue'\n  import { getFileCDNUrl } from '/@/transforms/url'\n\n  declare global {\n    interface Window {\n      $luanchEmojiRain(options: any): void\n    }\n  }\n\n  export default defineComponent({\n    name: 'EmojiRain',\n    setup() {\n      const rainBase = ref<HTMLElement>(null as any)\n      const state = reactive({\n        chambering: false,\n        kichikuing: false\n      })\n\n      onMounted(() => {\n        window.$luanchEmojiRain = (options) => {\n          if (!state.chambering && !state.kichikuing) {\n            state.chambering = true\n            nextTick(() => {\n              // @ts-ignore\n              rainBase.value.width =\n                document.documentElement.clientWidth || document.body.clientWidth\n              // @ts-ignore\n              rainBase.value.height =\n                document.documentElement.clientHeight || document.body.clientHeight\n              new window.$Emoji233333({\n                base: rainBase.value,\n                scale: 0.7,\n                speed: 12,\n                increaseSpeed: 0.4,\n                density: 5,\n                staggered: true,\n                emoji: getFileCDNUrl('/images/emojis/funny.png'),\n                ...options,\n                onStart() {\n                  state.kichikuing = true\n                },\n                onEnded() {\n                  state.kichikuing = false\n                  state.chambering = false\n                }\n              }).launch()\n            })\n          }\n        }\n      })\n\n      return {\n        state,\n        rainBase\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  #emoji-rain {\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: $z-index-underground;\n\n    &.active {\n      z-index: $z-index-top;\n    }\n\n    .rain-base {\n      width: 100%;\n      height: 100%;\n    }\n  }\n</style>\n","<template>\n  <div v-cloak id=\"app-root\" :class=\"theme\">\n    <client-only>\n      <progress-bar />\n      <emoji-rain />\n      <popup-root />\n    </client-only>\n    <!-- unuse suspense -> async route component -> can't extract style to css file -->\n    <captured>\n      <component :is=\"LayoutComponent\">\n        <router-view v-slot=\"{ Component, route }\">\n          <div class=\"router-view\">\n            <transition name=\"page\" mode=\"out-in\" @before-enter=\"handlePageTransitionDone\">\n              <suspense>\n                <component :is=\"Component\" :key=\"route.name\" />\n              </suspense>\n            </transition>\n          </div>\n        </router-view>\n      </component>\n    </captured>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { getLayoutByRouteMeta } from '/@/services/layout'\n  import Captured from '/@/components/root/captured.vue'\n  import PcMain from '/@/components/layout/pc/main.vue'\n  import MobileMain from '/@/components/layout/mobile/main.vue'\n  import EmojiRain from '/@/components/widget/emoji-rain.vue'\n\n  export default defineComponent({\n    name: 'App',\n    components: {\n      EmojiRain,\n      Captured\n    },\n    setup() {\n      const { theme, route, globalState, isMobile } = useEnhancer()\n      const LayoutComponent = computed(() => {\n        return isMobile.value ? MobileMain : PcMain\n      })\n\n      const handlePageTransitionDone = () => {\n        globalState.setLayoutColumn(getLayoutByRouteMeta(route.meta))\n      }\n\n      return {\n        LayoutComponent,\n        theme: theme.theme,\n        handlePageTransitionDone\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/init.scss';\n\n  #app-root {\n    color: $text;\n\n    &[v-cloak] {\n      color: transparent;\n      -webkit-text-fill-color: transparent;\n    }\n  }\n</style>\n","/**\n * @file App main logic\n * @module app.main\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { CreateAppFunction } from 'vue'\nimport { RouterHistory } from 'vue-router'\nimport API_CONFIG from '/@/config/api.config'\nimport { META } from '/@/config/app.config'\nimport { RouteName } from './router'\nimport { createUniversalRouter, RouterCreatorOptions } from './router'\nimport { createUniversalStore } from '/@/store'\nimport { createI18n } from '/@/services/i18n'\nimport { createMeta } from '/@/services/meta'\nimport { createTheme, Theme } from '/@/services/theme'\nimport { LayoutColumn } from '/@/services/layout'\nimport interior from '/@/services/interior'\nimport { rebirthSSRContext } from '/@/universal'\nimport { Language, languages, langMap } from '/@/language/data'\nimport { createGlobalState } from './state'\nimport { NODE_ENV } from '/@/environment'\nimport { isSSR } from '/@/app/environment'\nimport App from './index.vue'\n\nconsole.info(`[APP INITED]:`, { NODE_ENV, mode: isSSR ? 'SSR' : 'SPA' }, API_CONFIG)\n\nexport interface ICreatorContext {\n  appCreator: CreateAppFunction<Element>\n  historyCreator(base?: string): RouterHistory\n  routerBeforeMiddleware?(globalState: any): RouterCreatorOptions['beforeMiddleware']\n  routerAfterMiddleware?(globalState: any): RouterCreatorOptions['afterMiddleware']\n  layout?: LayoutColumn\n  theme: Theme\n  language: string\n  userAgent: string\n}\nexport type VueApp = ReturnType<typeof createVueApp>\nexport const createVueApp = (context: ICreatorContext) => {\n  const app = context.appCreator(App)\n  // ssr context\n  const ssrContext = rebirthSSRContext(app)\n\n  const globalState = createGlobalState({\n    userAgent: context.userAgent || '',\n    language: context.language || '',\n    layout: context.layout ?? LayoutColumn.Normal\n  })\n\n  const store = createUniversalStore({ globalState })\n  const router = createUniversalRouter({\n    beforeMiddleware: context.routerBeforeMiddleware?.(globalState),\n    afterMiddleware: context.routerAfterMiddleware?.(globalState),\n    history: context.historyCreator()\n  })\n\n  // keep music page PC only\n  if (globalState.userAgent.isMobile) {\n    router.removeRoute(RouteName.Music)\n  }\n\n  // meta\n  const meta = createMeta({\n    titler: (title: string) => `${title} | ${META.title}`\n  })\n\n  const theme = createTheme(context.theme)\n  const i18n = createI18n({\n    default: globalState.userAgent.isZhUser ? Language.Zh : Language.En,\n    languages,\n    map: langMap\n  })\n\n  // handle global error\n  app.config.errorHandler = (error) => globalState.setRenderError(error)\n  // handle router error https://next.router.vuejs.org/api/#onerror\n  router.onError(globalState.setRenderError)\n\n  // handle router validate error & 404 error\n  // https://next.router.vuejs.org/guide/advanced/navigation-guards.html#optional-third-argument-next\n  router.beforeEach((to, _, next) => {\n    if (to.meta.validate) {\n      ;(to.meta as any)\n        .validate({ route: to, i18n, store })\n        .then(next)\n        .catch((error) => {\n          const newError: any = new Error()\n          newError.code = error.code\n          newError.message = error.message\n          // next(error) > router error > global state error\n          next(newError)\n        })\n    } else {\n      next()\n    }\n  })\n\n  app.use(router)\n  app.use(store)\n  app.use(globalState)\n  app.use(i18n)\n  app.use(meta)\n  app.use(theme)\n  app.use(interior)\n\n  return {\n    app,\n    router,\n    store,\n    globalState,\n    i18n,\n    meta,\n    theme,\n    interior\n  }\n}\n","/**\n * @file Client app entry\n * @module CSR-entry\n * @author Surmon <https://github.com/surmon-china>\n */\n\n// polyfills\nimport 'intersection-observer'\n\nimport { createApp, createSSRApp } from 'vue'\nimport { createWebHistory } from 'vue-router'\nimport { GA_MEASUREMENT_ID, ADSENSE_CLIENT_ID } from '/@/config/app.config'\nimport { isSSR } from '/@/app/environment'\nimport { Language } from '/@/language/data'\nimport { getFileCDNUrl } from '/@/transforms/url'\nimport amplitude from '/@/services/amplitude'\nimport gtag from '/@/services/gtag'\nimport adsense from '/@/services/adsense'\nimport { getClientLocalTheme } from '/@/services/theme'\nimport { LayoutColumn, getLayoutByRouteMeta } from '/@/services/layout'\nimport { createDefer } from '/@/services/defer'\nimport { createMusic } from '/@/services/music'\nimport { createPopup } from '/@/services/popup'\nimport { createLoading } from '/@/services/loading'\nimport { consoleSlogan } from '/@/services/slogan'\nimport { enableCopyrighter } from '/@/services/copyright'\nimport { enableBaiduSEOer } from '/@/services/baidu-seo-push'\nimport { runTitler, resetTitler } from './services/titler'\nimport { exportEmojiRainToGlobal } from './services/emoji-23333'\nimport { exportStickyEventsToGlobal } from './services/sticky'\nimport { exportAppToGlobal } from '/@/services/exporter'\nimport { exportLozadToGlobal } from '/@/services/lozad'\nimport { randomNumber } from '/@/utils/random'\nimport { createVueApp } from '/@/app/main'\nimport { getSSRContext } from './universal'\nimport { isProd } from './environment'\n\nimport 'swiper/scss'\nimport 'swiper/scss/a11y'\nimport 'swiper/scss/autoplay'\nimport 'swiper/scss/mousewheel'\nimport 'swiper/scss/manipulation'\nimport 'swiper/scss/navigation'\nimport 'swiper/scss/pagination'\n\nimport '/@/styles/app.scss'\n\n// app\nconst { app, router, globalState, theme, i18n, store } = createVueApp({\n  historyCreator: createWebHistory,\n  appCreator: isSSR ? createSSRApp : createApp,\n  language: navigator.language,\n  userAgent: navigator.userAgent,\n  layout: isSSR ? getSSRContext('layout') : LayoutColumn.Normal,\n  theme: isSSR ? getSSRContext('theme') : getClientLocalTheme()\n})\n\n// services\nconst defer = createDefer()\nconst popup = createPopup()\nconst loading = createLoading()\nconst music = createMusic({ amplitude, autoStart: false })\n\n// plugins & services\napp.use(music)\napp.use(defer, { exportToGlobal: true })\napp.use(popup, { exportToGlobal: true })\napp.use(loading, { exportToGlobal: true })\napp.use(adsense, { ID: ADSENSE_CLIENT_ID, enabledAutoAD: true })\napp.use(gtag, {\n  router,\n  id: GA_MEASUREMENT_ID,\n  customResourceURL: getFileCDNUrl('/effects/gtag.js')\n})\n\n// init: store (from SSR context or fetch)\nisSSR ? store.initInSSR() : store.initInSPA()\n\n// init: services with client\ntheme.bindClientSystem()\nexportLozadToGlobal()\nexportEmojiRainToGlobal()\nexportStickyEventsToGlobal()\nexportAppToGlobal(app)\n\n// init: router loading middleware client only\nrouter.beforeEach((_, __, next) => {\n  loading.start()\n  next()\n})\nrouter.afterEach((_, __, failure) => {\n  failure ? loading.fail(failure) : loading.finish()\n})\n\n// router ready -> mount\nrouter.isReady().finally(() => {\n  // UI layout: set UI layout by route (for SPA)\n  globalState.setLayoutColumn(getLayoutByRouteMeta(router.currentRoute.value.meta))\n\n  // mount (isHydrate -> (SSR -> true | SPA -> false))\n  app.mount('#app', isSSR).$nextTick(() => {\n    // set hydrate state\n    globalState.setHydrate()\n    // reset: i18n language\n    i18n.set(globalState.userAgent.isZhUser ? Language.Zh : Language.En)\n\n    // Desktop\n    if (!globalState.userAgent.isMobile) {\n      // music player\n      defer.addTask(music.start)\n      // title surprise\n      document.addEventListener(\n        'visibilitychange',\n        (event) => {\n          // @ts-ignore\n          const isHidden = event.target?.hidden || event.target?.webkitHidden\n          const surprises = [\n            { favicon: '🔞', title: 'FBI WARNING!' },\n            { favicon: '⭕️', title: 'FBI WARNING!' },\n            { favicon: '🌝', title: 'new message (3)' }\n          ]\n          isHidden ? runTitler(surprises[randomNumber(surprises.length - 1)]) : resetTitler()\n        },\n        false\n      )\n    }\n\n    // Production\n    if (isProd) {\n      enableCopyrighter()\n      enableBaiduSEOer(router)\n      consoleSlogan(i18n)\n    }\n  })\n})\n"],"names":["languages","BezierEasing","_sfc_main","_hoisted_3","_openBlock","_createElementBlock","_withCtx","_normalizeClass","service","nodepress","hljs","escapeHTML","highlight","SwiperClass","Swiper","_hoisted_1","_Fragment","_createBlock","_hoisted_8","_hoisted_9","_hoisted_13","_hoisted_14","_hoisted_4","_hoisted_16","_hoisted_6","_hoisted_12","Events","_hoisted_7","_hoisted_11","_hoisted_18","_hoisted_2","_createCommentVNode","_createElementVNode","_hoisted_10","_hoisted_5","_hoisted_17","_hoisted_22","_hoisted_24","_hoisted_25","_hoisted_27","_hoisted_28","_hoisted_30","_createVNode","_Transition","qs","BaseShare","email","emailRegex","_toDisplayString","_renderSlot","_hoisted_15","_TransitionGroup","_createSlots","urlRegex","_hoisted_19","_hoisted_21","_hoisted_20","tunnel","_hoisted_26","_hoisted_32","_hoisted_34","_createTextVNode","Event","Emoji233333","_withDirectives","_normalizeStyle","_vModelText","_renderList","_normalizeProps","_guardReactiveProps","HeaderView","FooterView","AsideView","_resolveDynamicComponent","_Suspense"],"mappings":"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"}